<div class="content-page">
    <div class="content">
        <!-- Start Content-->
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="page-title-box">
                        <div class="page-title-right">
                            <a class="btn btn-primary btn-sm" routerLink="/admin/students">Students</a>
                        </div>
                        <h4 class="page-title">Edit Student Member</h4>
                    </div>
                </div>
            </div>
            <div class="container">
                <form [formGroup]="myForm" (ngSubmit)="uploadImage()" id="blog_form">
                    <div class="row">
                        <div class="form-group col-lg-12">
                            <label for="name">Student Member Name ( <span class="text-danger">required *</span>)</label>
                            <input type="text" class="form-control" id="name" formControlName="name" required>
                        </div>
                        <div class="form-group col-lg-12">
                            <label for="company">Student Member Company ( <span class="text-danger">required *</span>)</label>
                            <input type="text" class="form-control" id="company" formControlName="company" required>
                        </div>
                        <div class="form-group col-lg-12">
                            <label for="college">Student Member Comment ( <span class="text-danger">required *</span>)</label>
                            <textarea class="form-control" id="college" formControlName="college" rows="3" required></textarea>
                            <p class="text-danger">Max Character Count: 600 Characters</p>
                        </div>
                        <div class="preview-image" *ngIf="selectedStudent.image">
                            <img 
                            style="width: 200px; height: 200px;" 
                            [src]="(selectedStudent.image.startsWith('http') || selectedStudent.image.startsWith('/')) ? selectedStudent.image : env + '/'  + selectedStudent.image" 
                            alt="Current Blog Image">
                        </div>

                        <div class="form-group col-lg-4">
                        <label for="image">Student Member Cover Image ( <span class="text-danger">Change Image If Required *</span>)</label>
                        <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" (change)="onSelect($event)">
                            <ngx-dropzone-label>Drag and drop an image here, or click to select an image</ngx-dropzone-label>
                            <ngx-dropzone-image-preview
                            ngProjectAs="ngx-dropzone-preview"
                            [removable]="true"
                            *ngFor="let f of image"
                            [file]="f"
                            (removed)="onRemove(f)">
                            </ngx-dropzone-image-preview>
                        </div>

                        <!-- upload progress -->
                        <div *ngIf="uploading || uploadProgress > 0" class="mt-2">
                            <div class="mb-1 small">Image upload: {{ uploadProgress }}%</div>
                            <div class="progress" style="height: 8px;">
                            <div class="progress-bar" role="progressbar" [style.width.%]="uploadProgress" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>

                        <div *ngIf="uploadedImagePath && !uploading" class="small text-success mt-1">
                            Image uploaded
                        </div>

                        <br>
                        </div>

                        <hr>

                        <div class="d-flex justify-content-center">
                        <button
                            type="submit"
                            class="btn btn-primary"
                            [disabled]="isLoading || uploading || !myForm.valid">
                            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                            {{ isLoading ? 'Updating...' : 'Update' }}
                        </button>
                        </div>                        
                    </div>
                </form>
            </div>
        </div> <!-- container -->
    </div> <!-- content -->
</div>