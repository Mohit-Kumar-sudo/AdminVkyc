import './polyfills.server.mjs';
import{a as gi,b as O,c as D,d as hi,e as bi,f as Oi}from"./chunk-GFQIIZXR.mjs";import{a as rt,b as fi}from"./chunk-NACJYFW2.mjs";import{a as me,b as ai}from"./chunk-EYSXEQGJ.mjs";import{a as Z}from"./chunk-NERVCNNM.mjs";import{a as ci,b as pi,c as ce,d as ui}from"./chunk-MH62T7SX.mjs";import"./chunk-VPL6RACU.mjs";import{a as it,b as N,c as v,d as V,e as z,f as li,g as si,h as We,i as L,j as nt,k as G,l as ot,m as Q,n as Pe,o as B,p as R,q as Te,r as M,s as di,t as mi}from"./chunk-BF5WGBLO.mjs";import{b as Se,e as $,f as T,h as Vt}from"./chunk-ISSKYHUG.mjs";import{$ as At,$a as K,Aa as Gt,Ab as J,Ac as ni,Bb as Ce,Bc as oi,C as I,Cb as r,Cc as Ge,Db as _,Eb as x,Ec as ri,Fb as qe,Ga as q,Gb as Kt,Hb as Fe,Ib as Me,Jb as Oe,Jc as S,K as E,Ka as s,Kb as kt,La as f,Mb as $e,Mc as Qe,Nb as ye,Ob as de,Pb as ei,Qb as ee,Rb as ti,Sa as Qt,Sb as ne,Tb as te,W as Ye,Wa as g,X as Ne,Za as Ke,Zc as jt,_a as m,ab as se,bb as Wt,cb as Ht,da as P,dc as ii,ea as ze,fa as Xe,ga as Ut,hb as n,ib as t,jb as c,k as w,ka as qt,kb as Jt,la as h,lb as Zt,ma as b,mb as y,n as X,na as $t,nb as Yt,rb as u,sb as p,tb as et,ua as Ve,ub as Ue,vb as Le,vc as tt,wb as Ie,wc as F,xb as Xt,xc as k,yb as Y,zb as H}from"./chunk-NJ7T5E4P.mjs";import{a as re,b as Rt,g as Mi,h as je}from"./chunk-5XUXGTUW.mjs";function Ti(a,i){if(a&1){let e=y();n(0,"a",12),u("keyup.enter",function(){h(e),p(3);let l=Ce(1);return b(l.previous())})("click",function(){h(e),p(3);let l=Ce(1);return b(l.previous())}),r(1),n(2,"span",13),r(3),t()()}if(a&2){let e=p(3);s(),x(" ",e.previousLabel," "),s(2),_(e.screenReaderPageLabel)}}function Di(a,i){if(a&1&&(n(0,"span",14),r(1),n(2,"span",13),r(3),t()()),a&2){let e=p(3);s(),x(" ",e.previousLabel," "),s(2),_(e.screenReaderPageLabel)}}function Ai(a,i){if(a&1&&(n(0,"li",9),g(1,Ti,4,2,"a",10)(2,Di,4,2,"span",11),t()),a&2){p(2);let e=Ce(1);se("disabled",e.isFirstPage()),s(),m("ngIf",1<e.getCurrent()),s(),m("ngIf",e.isFirstPage())}}function ki(a,i){if(a&1){let e=y();n(0,"a",12),u("keyup.enter",function(){h(e);let l=p().$implicit;p(2);let d=Ce(1);return b(d.setCurrent(l.value))})("click",function(){h(e);let l=p().$implicit;p(2);let d=Ce(1);return b(d.setCurrent(l.value))}),n(1,"span",13),r(2),t(),n(3,"span"),r(4),ee(5,"number"),t()()}if(a&2){let e=p().$implicit,o=p(2);s(2),x("",o.screenReaderPageLabel," "),s(2),_(e.label==="..."?e.label:ne(5,2,e.label,""))}}function ji(a,i){if(a&1&&(Jt(0),n(1,"span",16)(2,"span",13),r(3),t(),n(4,"span"),r(5),ee(6,"number"),t()(),Zt()),a&2){let e=p().$implicit,o=p(2);s(3),x("",o.screenReaderCurrentLabel," "),s(2),_(e.label==="..."?e.label:ne(6,2,e.label,""))}}function Vi(a,i){if(a&1&&(n(0,"li"),g(1,ki,6,5,"a",10)(2,ji,7,5,"ng-container",15),t()),a&2){let e=i.$implicit;p(2);let o=Ce(1);se("current",o.getCurrent()===e.value)("ellipsis",e.label==="..."),s(),m("ngIf",o.getCurrent()!==e.value),s(),m("ngIf",o.getCurrent()===e.value)}}function Ni(a,i){if(a&1){let e=y();n(0,"a",12),u("keyup.enter",function(){h(e),p(3);let l=Ce(1);return b(l.next())})("click",function(){h(e),p(3);let l=Ce(1);return b(l.next())}),r(1),n(2,"span",13),r(3),t()()}if(a&2){let e=p(3);s(),x(" ",e.nextLabel," "),s(2),_(e.screenReaderPageLabel)}}function zi(a,i){if(a&1&&(n(0,"span",14),r(1),n(2,"span",13),r(3),t()()),a&2){let e=p(3);s(),x(" ",e.nextLabel," "),s(2),_(e.screenReaderPageLabel)}}function Li(a,i){if(a&1&&(n(0,"li",17),g(1,Ni,4,2,"a",10)(2,zi,4,2,"span",11),t()),a&2){p(2);let e=Ce(1);se("disabled",e.isLastPage()),s(),m("ngIf",!e.isLastPage()),s(),m("ngIf",e.isLastPage())}}function Bi(a,i){if(a&1&&(n(0,"ul",4),g(1,Ai,3,4,"li",5),n(2,"li",6),r(3),t(),g(4,Vi,3,6,"li",7)(5,Li,3,4,"li",8),t()),a&2){let e=p(),o=Ce(1);se("responsive",e.responsive),s(),m("ngIf",e.directionLinks),s(2),qe(" ",o.getCurrent()," / ",o.getLastPage()," "),s(),m("ngForOf",o.pages)("ngForTrackBy",e.trackByIndex),s(),m("ngIf",e.directionLinks)}}var Ze=class{constructor(){this.change=new Ve,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(i){return i.id==null&&(i.id=this.DEFAULT_ID),this.instances[i.id]?this.updateInstance(i):(this.instances[i.id]=i,!0)}updateInstance(i){let e=!1;for(let o in this.instances[i.id])i[o]!==this.instances[i.id][o]&&(this.instances[i.id][o]=i[o],e=!0);return e}getCurrentPage(i){return this.instances[i]?this.instances[i].currentPage:1}setCurrentPage(i,e){if(this.instances[i]){let o=this.instances[i],l=Math.ceil(o.totalItems/o.itemsPerPage);e<=l&&1<=e&&(this.instances[i].currentPage=e,this.change.emit(i))}}setTotalItems(i,e){this.instances[i]&&0<=e&&(this.instances[i].totalItems=e,this.change.emit(i))}setItemsPerPage(i,e){this.instances[i]&&(this.instances[i].itemsPerPage=e,this.change.emit(i))}getInstance(i=this.DEFAULT_ID){return this.instances[i]?this.clone(this.instances[i]):{}}clone(i){var e={};for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);return e}},Ri=Number.MAX_SAFE_INTEGER,pe=(()=>{class a{constructor(e){this.service=e,this.state={}}transform(e,o){if(!(e instanceof Array)){let we=o.id||this.service.defaultId();return this.state[we]?this.state[we].slice:e}let l=o.totalItems&&o.totalItems!==e.length,d=this.createInstance(e,o),C=d.id,A,j,le=d.itemsPerPage,xe=this.service.register(d);if(!l&&e instanceof Array){if(le=+le||Ri,A=(d.currentPage-1)*le,j=A+le,this.stateIsIdentical(C,e,A,j))return this.state[C].slice;{let Be=e.slice(A,j);return this.saveState(C,e,Be,A,j),this.service.change.emit(C),Be}}else return xe&&this.service.change.emit(C),this.saveState(C,e,e,A,j),e}createInstance(e,o){return this.checkConfig(o),{id:o.id!=null?o.id:this.service.defaultId(),itemsPerPage:+o.itemsPerPage||0,currentPage:+o.currentPage||1,totalItems:+o.totalItems||e.length}}checkConfig(e){let l=["itemsPerPage","currentPage"].filter(d=>!(d in e));if(0<l.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${l.join(", ")}`)}saveState(e,o,l,d,C){this.state[e]={collection:o,size:o.length,slice:l,start:d,end:C}}stateIsIdentical(e,o,l,d){let C=this.state[e];return!C||!(C.size===o.length&&C.start===l&&C.end===d)?!1:C.slice.every((j,le)=>j===o[l+le])}}return a.\u0275fac=function(e){return new(e||a)(f(Ze,16))},a.\u0275pipe=Ut({name:"paginate",type:a,pure:!1}),a})();var Ui=(()=>{class a{constructor(e,o){this.service=e,this.changeDetectorRef=o,this.maxSize=7,this.pageChange=new Ve,this.pageBoundsCorrection=new Ve,this.pages=[],this.changeSub=this.service.change.subscribe(l=>{this.id===l&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){this.id===void 0&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(e){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return this.getCurrent()===1}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(e){this.pageChange.emit(e)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let e=this.service.getInstance(this.id);return e.totalItems<1?1:Math.ceil(e.totalItems/e.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){this.service.getInstance(this.id).id==null&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let e=this.service.getInstance(this.id),o=this.outOfBoundCorrection(e);o!==e.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(o),this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)}):this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)}outOfBoundCorrection(e){let o=Math.ceil(e.totalItems/e.itemsPerPage);return o<e.currentPage&&0<o?o:e.currentPage<1?1:e.currentPage}createPageArray(e,o,l,d){d=+d;let C=[],A=Math.max(Math.ceil(l/o),1),j=Math.ceil(d/2),le=e<=j,xe=A-j<e,we=!le&&!xe,Be=d<A,Re=1;for(;Re<=A&&Re<=d;){let Dt,Bt=this.calculatePageNumber(Re,e,d,A),Ii=Re===2&&(we||xe),Fi=Re===d-1&&(we||le);Be&&(Ii||Fi)?Dt="...":Dt=Bt,C.push({label:Dt,value:Bt}),Re++}return C}calculatePageNumber(e,o,l,d){let C=Math.ceil(l/2);return e===l?d:e===1?e:l<d?d-C<o?d-l+e:C<o?o-C+e:e:e}}return a.\u0275fac=function(e){return new(e||a)(f(Ze),f(ii))},a.\u0275dir=Xe({type:a,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[qt]}),a})();function Nt(a){return!!a&&a!=="false"}var ue=(()=>{class a{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new Ve,this.pageBoundsCorrection=new Ve,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(e){this._directionLinks=Nt(e)}get autoHide(){return this._autoHide}set autoHide(e){this._autoHide=Nt(e)}get responsive(){return this._responsive}set responsive(e){this._responsive=Nt(e)}trackByIndex(e){return e}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=P({type:a,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[["p","paginationApi"],[3,"pageChange","pageBoundsCorrection","id","maxSize"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(e,o){if(e&1){let l=y();n(0,"pagination-template",1,0),u("pageChange",function(C){return h(l),b(o.pageChange.emit(C))})("pageBoundsCorrection",function(C){return h(l),b(o.pageBoundsCorrection.emit(C))}),n(2,"nav",2),g(3,Bi,6,8,"ul",3),t()()}if(e&2){let l=Ce(1);m("id",o.id)("maxSize",o.maxSize),s(2),Ke("aria-label",o.screenReaderPaginationLabel),s(),m("ngIf",!(o.autoHide&&l.pages.length<=1))}},dependencies:[Ui,k,F,oi],styles:[`.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}
`],encapsulation:2,changeDetection:0}),a})(),_i=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=ze({type:a}),a.\u0275inj=Ne({providers:[Ze],imports:[[Ge]]}),a})();var at=class a{constructor(i,e,o){this._projectService=i;this._apiService=e;this._contactService=o;this.fetchCounts()}totalProjects=0;totalQueries=0;totalBlogs=0;fetchCounts(){this.fetchTotalProjects(),this.fetchTotalQueries(),this.fetchTotalBlogs()}fetchTotalProjects(){this._projectService.get("projects",{}).subscribe(i=>{this.totalProjects=i.data?i.data.length:0,console.log("Total Projects:",this.totalProjects)})}fetchTotalQueries(){this._contactService.onContactGetAll().subscribe(i=>{this.totalQueries=i.length,console.log("Total Queries:",this.totalQueries)})}fetchTotalBlogs(){this._apiService.get("blogs",{}).subscribe(i=>{this.totalBlogs=i.length,console.log("Total Blogs:",this.totalBlogs)})}static \u0275fac=function(e){return new(e||a)(f(gi),f(O),f(rt))};static \u0275cmp=P({type:a,selectors:[["app-dashboard"]],decls:43,vars:3,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],[1,"page-title"],[1,"col-lg-3","col-6"],[1,"small-box","bg-primary"],[1,"inner"],[1,"text-center"],[1,"icon"],["src","","alt","",1,"ion"],["href","#",1,"small-box-footer"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),c(6,"div",6),n(7,"h4",7),r(8,"Dashboard"),t()()()(),n(9,"div",3)(10,"div",8)(11,"div",9)(12,"div",10)(13,"h3",11),r(14),t(),n(15,"p"),r(16,"\xA0"),t()(),n(17,"div",12),c(18,"img",13),t(),n(19,"span",14),r(20,"Total Projects"),t()()(),n(21,"div",8)(22,"div",9)(23,"div",10)(24,"h3",11),r(25),t(),n(26,"p"),r(27,"\xA0"),t()(),n(28,"div",12),c(29,"img",13),t(),n(30,"span",14),r(31,"Total Query"),t()()(),n(32,"div",8)(33,"div",9)(34,"div",10)(35,"h3",11),r(36),t(),n(37,"p"),r(38,"\xA0"),t()(),n(39,"div",12),c(40,"img",13),t(),n(41,"span",14),r(42,"Total Blogs"),t()()()()()()()),e&2&&(s(14),_(o.totalProjects),s(11),_(o.totalQueries),s(11),_(o.totalBlogs))},styles:[".stt[_ngcontent-%COMP%]   .bs-searchbox[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #525A65;height:40px}.stt.bootstrap-select[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{overflow-y:auto!important}table.dataTable.nowrap[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.dataTable.nowrap[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:normal!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle!important}.cursor[_ngcontent-%COMP%]{cursor:pointer}.error[_ngcontent-%COMP%]{color:red}.small-box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{font-size:90px;position:absolute;right:15px;top:15px;height:70px;transition:all .3s linear}.small-box[_ngcontent-%COMP%] > .small-box-footer[_ngcontent-%COMP%]{background:#0000001a;color:#fffc;display:block;padding:3px 0;position:relative;text-align:center;text-decoration:none;z-index:10}.small-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;margin:0 0 10px;padding:0;white-space:nowrap}.small-box[_ngcontent-%COMP%] > .inner[_ngcontent-%COMP%]{padding:10px}.small-box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#00000026;z-index:0}.small-box[_ngcontent-%COMP%]:hover{text-decoration:none}.small-box[_ngcontent-%COMP%]{border-radius:.25rem;box-shadow:0 0 1px #00000021,0 1px 3px #0003;display:block;margin-bottom:20px;position:relative}.project_images[_ngcontent-%COMP%]{width:100px;height:90px;margin-top:10px}.pro-user-name[_ngcontent-%COMP%]{display:none}.navbar-custom[_ngcontent-%COMP%]{background-color:#fff}.fe-menu[_ngcontent-%COMP%]{color:#000}.dropdown-toggle[_ngcontent-%COMP%]:after{color:#000}.menu-title[_ngcontent-%COMP%]{color:#000!important}#sidebar-menu[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:#0399fa;text-decoration:none}.active[_ngcontent-%COMP%]{color:#0399fa}#sidebar-menu[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]{color:#0399fa}.small-box[_ngcontent-%COMP%]{background-color:#0399fa!important}.small-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-size:3rem}#sidebar-menu[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:1.05rem}.btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}"]})};var $i=["confirmDeleteModal"],Gi=(a,i)=>({itemsPerPage:a,currentPage:i}),Qi=a=>["edit-project",a];function Wi(a,i){if(a&1&&c(0,"img",31),a&2){let e=p().$implicit,o=p(2);m("src",o.env+"/file/download/"+e,q)}}function Hi(a,i){a&1&&g(0,Wi,1,1,"ng-template",30)}function Ji(a,i){if(a&1){let e=y();n(0,"div",32)(1,"h5",33),r(2,"Confirm Deletion"),t(),n(3,"button",34),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",35)(5,"p"),r(6,"Are you sure you want to delete this project? This action cannot be undone."),t()(),n(7,"div",36)(8,"button",37),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",38),u("click",function(){let l=h(e).$implicit,d=p(2);return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}function Zi(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td",25),r(4),t(),n(5,"td",26)(6,"ngb-carousel"),g(7,Hi,1,0,null,21),t()(),n(8,"td",25),r(9),t(),n(10,"td"),r(11),t(),n(12,"td"),r(13),t(),n(14,"td",20)(15,"a",27),r(16,"Edit"),t()(),n(17,"td",20)(18,"div",28)(19,"button",29),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),r(20,"Delete"),t(),g(21,Ji,12,0,"ng-template",null,0,te),t()()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),_(e.name),s(3),m("ngForOf",e.images),s(2),x(" ",e.descriptions," "),s(2),_(e.created_at),s(2),_(e.updated_at),s(2),m("routerLink",ye(7,Qi,e._id))}}var lt=class a{constructor(i,e,o,l){this._projectService=i;this.fb=e;this.modalService=o;this.fileServ=l;this.env=Z.url,this.myForm=this.fb.group({name:["",v.required],descriptions:this.fb.array([]),images:this.fb.array([])})}p=1;itemsPerPage=10;env;selectedProject={};getData;myForm;projectToDeleteId=null;image=[];collection=[];confirmDeleteModal;ngOnInit(){this.fetchAllProjects()}fetchAllProjects(){this._projectService.get("projects",{}).subscribe(i=>{this.getData=i.data.map(e=>Rt(re({},e),{description:e.descriptions?.[0]||"No description available"})),console.log(this.getData)})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}editProjects(i,e){this.selectedProject=re({},i),this.modalService.open(e,{ariaLabelledBy:"modal-basic-name"})}onDelete(i){this.projectToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-name"}).result.then(o=>{o==="Delete"&&this.projectToDeleteId&&this._projectService.delete("projects",this.projectToDeleteId).subscribe(()=>{this.fetchAllProjects()})})}confirmDelete(i){i.close("Delete")}handleFileInput(i){this.selectedProject.image=i.target.files[0]}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.myForm.patchValue({image:e}),this.myForm.get("image")?.updateValueAndValidity())}onRemove(i){this.image.includes(i)&&(this.image=[],this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}uploadImage(i){this.image.length>0?this.fileServ.uploadFile(this.image[0]).subscribe(e=>{if(e.type===S.Response){let l=e.body.file.path;if(this.selectedProject.image=l,!this.selectedProject||!this.selectedProject._id){alert("No project selected or project ID is missing");return}this._projectService.put("projects",this.selectedProject._id,this.selectedProject).subscribe(()=>{this.fetchAllProjects(),i.close()})}},e=>{alert(`Error uploading image: ${e.message}`)}):alert("Please Select Image")}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(ce),f(D))};static \u0275cmp=P({type:a,selectors:[["app-projects"]],viewQuery:function(e,o){if(e&1&&Y($i,5),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first)}},decls:51,vars:7,consts:[["confirmDeleteModal",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],["routerLink","add-project",1,"btn","btn-primary","btn-sm"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3"],[1,"form-label","mb-0"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1"],["value","10"],["value","25"],["value","50"],["value","100"],["type","search","placeholder","Search",1,"form-control","form-control-sm","w-auto"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-muted"],[3,"pageChange"],[1,"text-truncate"],[2,"max-width","150px"],[1,"btn","btn-success","btn-sm",3,"routerLink"],[1,"d-flex","justify-content-center","gap-2","flex-nowrap"],[1,"btn","btn-danger","btn-sm",3,"click"],["ngbSlide",""],["alt","Project Image",1,"d-block","w-100","rounded-3",2,"height","100px","object-fit","cover",3,"src"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),r(6,"Project List"),t(),n(7,"a",7),r(8,"Add Project"),t()(),n(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),r(13," Show "),n(14,"select",12)(15,"option",13),r(16,"10"),t(),n(17,"option",14),r(18,"25"),t(),n(19,"option",15),r(20,"50"),t(),n(21,"option",16),r(22,"100"),t()(),r(23," entries "),t(),c(24,"input",17),t(),n(25,"table",18)(26,"thead",19)(27,"tr")(28,"th"),r(29,"S.no."),t(),n(30,"th"),r(31,"Project Name"),t(),n(32,"th"),r(33,"Project Image"),t(),n(34,"th"),r(35,"Description"),t(),n(36,"th"),r(37,"Created On"),t(),n(38,"th"),r(39,"Published On"),t(),n(40,"th",20),r(41,"Edit"),t(),n(42,"th",20),r(43,"Delete"),t()()(),n(44,"tbody"),g(45,Zi,23,9,"tr",21),ee(46,"paginate"),t()(),n(47,"div",22)(48,"small",23),r(49,"Showing 1 to 10 of 10 entries"),t(),n(50,"pagination-controls",24),u("pageChange",function(d){return o.p=d}),t()()()()()()()()),e&2&&(s(45),m("ngForOf",ne(46,1,o.getData,de(4,Gi,o.itemsPerPage,o.p))))},dependencies:[F,T,pi,ci,ue,B,R,pe],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}"]})};function Yi(a,i){if(a&1){let e=y();n(0,"button",26),u("click",function(){h(e);let l=p().index,d=p();return b(d.removeDescription(l))}),r(1,"Remove Description"),t()}}function Xi(a,i){if(a&1){let e=y();n(0,"div",20),c(1,"br"),n(2,"label",21),r(3),n(4,"span",13),r(5,"required *"),t(),r(6,")"),t(),c(7,"textarea",22),n(8,"p",13),r(9,"Max Character Count: 600 Characters"),t(),n(10,"div",23)(11,"button",24),u("click",function(){h(e);let l=p();return b(l.addDescription())}),r(12,"Add Another Description"),t(),g(13,Yi,2,0,"button",25),t(),c(14,"br")(15,"br"),t()}if(a&2){let e=i.index,o=p();s(2),Ie("for","description_",e,""),s(),x("Description ",e+1," ( "),s(4),Ie("id","description_",e,""),Le("formControlName",e),s(6),m("ngIf",o.descriptions.length>1)}}function Ki(a,i){if(a&1&&(n(0,"div",34)(1,"div",35),r(2),t(),n(3,"div",36),c(4,"div",37),t()()),a&2){let e=p().index,o=p();s(2),x("Upload: ",o.uploadProgress[e]||0,"%"),s(2),K("width",o.uploadProgress[e]||0,"%")}}function en(a,i){if(a&1&&(n(0,"div",38),r(1),t()),a&2){let e=p().index,o=p();s(),x(" Uploaded: ",o.uploadedImagePaths[e]," ")}}function tn(a,i){if(a&1){let e=y();n(0,"button",39),u("click",function(){h(e);let l=p().index,d=p();return b(d.removeImage(l))}),r(1,"Remove Image"),t()}if(a&2){let e=p().index,o=p();m("disabled",o.isLoading||o.uploadingFlags[e])}}function nn(a,i){if(a&1){let e=y();n(0,"div",27)(1,"label",21),r(2,"Project Cover Image ( "),n(3,"span",13),r(4,"required *"),t(),r(5,")"),t(),n(6,"input",28),u("change",function(l){let d=h(e).index,C=p();return b(C.onFileSelect(l,d))}),t(),g(7,Ki,5,3,"div",29)(8,en,2,1,"div",30),n(9,"div",31)(10,"button",32),u("click",function(){h(e);let l=p();return b(l.addImage())}),r(11,"Add Another Image"),t(),g(12,tn,2,1,"button",33),t(),c(13,"br")(14,"br"),t()}if(a&2){let e=i.index,o=p();s(),Ie("for","project_image_",e,""),s(5),Ie("id","project_image_",e,""),m("disabled",o.uploadingFlags[e]||o.isLoading),s(),m("ngIf",o.uploadingFlags[e]||o.uploadProgress[e]&&o.uploadProgress[e]>0),s(),m("ngIf",o.uploadedImagePaths[e]&&!o.uploadingFlags[e]),s(2),m("disabled",o.isLoading||o.uploadingAny),s(2),m("ngIf",o.imagesArray.length>1)}}function on(a,i){a&1&&c(0,"span",40)}var st=class a{constructor(i,e,o,l,d){this.fb=i;this.projectService=e;this.fileService=o;this.alertService=l;this.router=d;this.projectForm=this.fb.group({name:["",v.required],descriptions:this.fb.array([],v.required),images:this.fb.array([],v.required)})}projectForm;localFiles=[];uploadedImagePaths=[];uploadingFlags=[];uploadProgress=[];uploadSubs=[];isLoading=!1;postSub;ngOnInit(){let i={name:"",descriptions:[""],images:[""]};this.projectForm.patchValue({name:i.name}),this.setDescriptions(i.descriptions),this.setImages(i.images),this.ensureImageArrays(this.imagesArray.length)}ngOnDestroy(){this.uploadSubs.forEach(i=>i?.unsubscribe()),this.postSub?.unsubscribe()}get descriptions(){return this.projectForm.get("descriptions")}get imagesArray(){return this.projectForm.get("images")}get uploadingAny(){return this.uploadingFlags.some(i=>i===!0)}setDescriptions(i){i.forEach(e=>{this.descriptions.push(this.fb.control(e,v.required))})}setImages(i){i.forEach(e=>{this.imagesArray.push(this.fb.control(e||"",v.required))}),this.ensureImageArrays(this.imagesArray.length)}ensureImageArrays(i){for(;this.localFiles.length<i;)this.localFiles.push(null);for(;this.uploadedImagePaths.length<i;)this.uploadedImagePaths.push(null);for(;this.uploadingFlags.length<i;)this.uploadingFlags.push(!1);for(;this.uploadProgress.length<i;)this.uploadProgress.push(0);for(;this.uploadSubs.length<i;)this.uploadSubs.push(null)}addDescription(){this.descriptions.push(this.fb.control("",v.required))}removeDescription(i){this.descriptions.removeAt(i)}addImage(){this.imagesArray.push(this.fb.control("",v.required)),this.ensureImageArrays(this.imagesArray.length)}removeImage(i){this.uploadSubs[i]&&(this.uploadSubs[i]?.unsubscribe(),this.uploadSubs[i]=null),this.localFiles.splice(i,1),this.uploadedImagePaths.splice(i,1),this.uploadingFlags.splice(i,1),this.uploadProgress.splice(i,1),this.uploadSubs.splice(i,1),this.imagesArray.removeAt(i)}onFileSelect(i,e){let o=i.target;if(!o||!o.files||!o.files[0]){console.error("No file selected or invalid file input.");return}let l=o.files[0];this.localFiles[e]=l,this.uploadedImagePaths[e]=null,this.uploadingFlags[e]=!0,this.uploadProgress[e]=0,this.imagesArray.at(e).setValue("uploading...");let d=this.fileService.uploadFile(l).pipe(I(C=>(this.alertService.errorToast?.(`Image upload failed: ${C?.message||C}`),this.uploadingFlags[e]=!1,this.uploadProgress[e]=0,w(C))),E(()=>{this.uploadingFlags[e]=!1})).subscribe(C=>{if(C.type===S.UploadProgress&&C.total)this.uploadProgress[e]=Math.round(C.loaded/C.total*100);else if(C.type===S.Response){let A=C.body,j=A?.file?.path||A?.path||null;if(j){let le=j.replace(/\\/g,"/");this.uploadedImagePaths[e]=le,this.imagesArray.at(e).setValue(le),this.alertService.successToast?.("Image uploaded")}else this.imagesArray.at(e).setValue(""),this.alertService.warningToast?.("Upload succeeded but server returned no path.")}});this.uploadSubs[e]=d}onSubmit(){if(this.projectForm.markAllAsTouched(),!this.projectForm.valid){this.alertService.errorToast?.("Please complete all required fields.");return}if(this.uploadingAny){this.alertService.warningToast?.("Please wait until all images finish uploading.");return}if(this.isLoading)return;this.isLoading=!0;let i=this.imagesArray.value.map((o,l)=>this.uploadedImagePaths[l]||o||"");this.imagesArray.clear(),i.forEach(o=>this.imagesArray.push(this.fb.control(o)));let e=this.projectForm.value;this.postSub=this.projectService.post("projects",e).pipe(X(1e4),I(o=>w(o)),E(()=>{this.isLoading=!1})).subscribe(o=>{this.alertService.successToast?.("Project created successfully"),alert("Project created successfully"),this.router.navigate(["/admin/projects"]),this.resetForm()},o=>{let l=o?.name==="TimeoutError"?"Server timed out. Try again later.":o?.message||"Error submitting the project";this.alertService.errorToast?.(l),console.error("Error in onSubmit:",o)})}resetForm(){for(this.projectForm.reset();this.descriptions.length;)this.descriptions.removeAt(0);for(;this.imagesArray.length;)this.imagesArray.removeAt(0);this.localFiles=[],this.uploadedImagePaths=[],this.uploadingFlags=[],this.uploadProgress=[],this.uploadSubs.forEach(i=>i?.unsubscribe()),this.uploadSubs=[],this.addDescription(),this.addImage()}static \u0275fac=function(e){return new(e||a)(f(M),f(O),f(D),f(me),f($))};static \u0275cmp=P({type:a,selectors:[["app-add-project"]],decls:28,vars:6,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/projects",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","project_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","name"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Make It Mud",1,"form-control"],["class","form-group col-lg-12","formArrayName","descriptions",4,"ngFor","ngForOf"],["class","form-group col-lg-4","formArrayName","images",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["formArrayName","descriptions",1,"form-group","col-lg-12"],[3,"for"],["rows","5","placeholder","Project description",1,"form-control",3,"id","formControlName"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","me-5",3,"click"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],["formArrayName","images",1,"form-group","col-lg-4"],["type","file","accept","image/*",1,"form-control",3,"change","id","disabled"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],[1,"d-flex","justify-content-between","mt-2"],["type","button",1,"btn","btn-secondary","me-5",3,"click","disabled"],["type","button","class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"mt-2"],[1,"small","mb-1"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Projects"),t()(),n(9,"h4",8),r(10,"Add New Project"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.onSubmit()}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Project Name ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),g(21,Xi,16,7,"div",15)(22,nn,15,9,"div",16),c(23,"hr"),n(24,"div",17)(25,"button",18),g(26,on,1,0,"span",19),r(27),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.projectForm),s(9),m("ngForOf",o.descriptions.controls),s(),m("ngForOf",o.imagesArray.controls),s(3),m("disabled",o.isLoading||o.uploadingAny||!o.projectForm.valid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Saving...":"Add Project"," "))},dependencies:[F,k,T,L,N,V,z,G,Q,ot],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};function rn(a,i){if(a&1){let e=y();n(0,"button",26),u("click",function(){h(e);let l=p().index,d=p();return b(d.removeDescription(l))}),r(1,"Remove Description"),t()}}function an(a,i){if(a&1){let e=y();n(0,"div",20),c(1,"br"),n(2,"label",21),r(3),n(4,"span",13),r(5,"required *"),t(),r(6,")"),t(),c(7,"textarea",22),n(8,"p",13),r(9,"Max Character Count: 600 Characters"),t(),n(10,"div",23)(11,"button",24),u("click",function(){h(e);let l=p();return b(l.addDescription())}),r(12,"Add Another Description"),t(),g(13,rn,2,0,"button",25),t(),c(14,"br")(15,"br"),t()}if(a&2){let e=i.index,o=p();s(2),Ie("for","description_",e,""),s(),x("Description ",e+1," ( "),s(4),Ie("id","description_",e,""),Le("formControlName",e),s(6),m("ngIf",o.descriptions.length>1)}}function ln(a,i){if(a&1&&(n(0,"div",35),c(1,"img",36)(2,"br")(3,"br"),t()),a&2){let e=p().index,o=p();s(),m("src",o.getImageUrl(o.imagesArray.at(e).value),q)}}function sn(a,i){if(a&1&&(n(0,"div",37)(1,"div",38),r(2),t(),n(3,"div",39),c(4,"div",40),t()()),a&2){let e=p().index,o=p();s(2),x("Upload: ",o.uploadProgress[e]||0,"%"),s(2),K("width",o.uploadProgress[e]||0,"%")}}function dn(a,i){if(a&1&&(n(0,"div",41),r(1),t()),a&2){let e=p().index,o=p();s(),x(" Uploaded: ",o.uploadedImagePaths[e]," ")}}function mn(a,i){if(a&1){let e=y();n(0,"button",42),u("click",function(){h(e);let l=p().index,d=p();return b(d.removeImage(l))}),r(1,"Remove Image"),t()}if(a&2){let e=p().index,o=p();m("disabled",o.isLoading||o.uploadingFlags[e])}}function cn(a,i){if(a&1){let e=y();n(0,"div",27)(1,"label",21),r(2,"Project Cover Image ( "),n(3,"span",13),r(4,"required *"),t(),r(5,")"),t(),n(6,"input",28),u("change",function(l){let d=h(e).index,C=p();return b(C.onFileSelect(l,d))}),t(),g(7,ln,4,1,"div",29)(8,sn,5,3,"div",30)(9,dn,2,1,"div",31),n(10,"div",32)(11,"button",33),u("click",function(){h(e);let l=p();return b(l.addImage())}),r(12,"Add Another Image"),t(),g(13,mn,2,1,"button",34),t(),c(14,"br")(15,"br"),t()}if(a&2){let e=i.index,o=p();s(),Ie("for","project_image_",e,""),s(5),Ie("id","project_image_",e,""),m("disabled",o.uploadingFlags[e]||o.isLoading),s(),m("ngIf",o.imagesArray.at(e).value&&!o.isUploadingIndex(e)),s(),m("ngIf",o.uploadingFlags[e]||o.uploadProgress[e]&&o.uploadProgress[e]>0),s(),m("ngIf",o.uploadedImagePaths[e]&&!o.uploadingFlags[e]),s(2),m("disabled",o.isLoading||o.uploadingAny),s(2),m("ngIf",o.imagesArray.length>1)}}function pn(a,i){a&1&&c(0,"span",43)}var dt=class a{constructor(i,e,o,l,d){this.projectService=i;this.fb=e;this.fileServ=o;this.router=l;this.route=d;this.projectForm=this.fb.group({name:["",v.required],descriptions:this.fb.array([],v.required),images:this.fb.array([],v.required)})}projectForm;env=Z.url;selectedProject={};localFiles=[];uploadedImagePaths=[];uploadingFlags=[];uploadProgress=[];uploadSubs=[];isLoading=!1;updateSub;fetchSub;ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i?this.fetchProjectById(i):(console.error("Project ID is undefined on initialization"),this.showError("Error: Project ID is undefined on initialization"))}ngOnDestroy(){this.uploadSubs.forEach(i=>i?.unsubscribe()),this.updateSub?.unsubscribe(),this.fetchSub?.unsubscribe()}get descriptions(){return this.projectForm.get("descriptions")}get imagesArray(){return this.projectForm.get("images")}get uploadingAny(){return this.uploadingFlags.some(i=>i===!0)}showSuccess(i){try{alert(i)}catch{console.log(i)}}showWarning(i){try{alert(i)}catch{console.warn(i)}}showError(i){try{alert(i)}catch{console.error(i)}}getImageUrl(i){return i?i.startsWith("http")||i.startsWith("/")?i:`${this.env}/file/download/${i}`:""}fetchProjectById(i){this.fetchSub=this.projectService.get(`projects/${i}`,{}).subscribe(e=>{if(e?.data){this.selectedProject=e.data,this.projectForm.patchValue({name:this.selectedProject.name||""});let o=this.projectForm.get("descriptions");o.clear(),(this.selectedProject.descriptions||[""]).forEach(d=>{o.push(this.fb.control(d||"",v.required))});let l=this.projectForm.get("images");l.clear(),(this.selectedProject.images||[""]).forEach(d=>{l.push(this.fb.control(d||"",v.required))}),this.ensureImageArrays(l.length),l.controls.forEach((d,C)=>{let A=d.value;this.uploadedImagePaths[C]=A?`${A}`:null})}else console.error("Project data not found:",e),this.showError("Error: Project data not found.")},e=>{console.error("Error fetching project:",e),this.showError("Error fetching project data.")})}ensureImageArrays(i){for(;this.localFiles.length<i;)this.localFiles.push(null);for(;this.uploadedImagePaths.length<i;)this.uploadedImagePaths.push(null);for(;this.uploadingFlags.length<i;)this.uploadingFlags.push(!1);for(;this.uploadProgress.length<i;)this.uploadProgress.push(0);for(;this.uploadSubs.length<i;)this.uploadSubs.push(null)}addDescription(){this.descriptions.push(this.fb.control("",v.required))}removeDescription(i){this.descriptions.removeAt(i)}addImage(){this.imagesArray.push(this.fb.control("",v.required)),this.ensureImageArrays(this.imagesArray.length)}removeImage(i){this.uploadSubs[i]&&(this.uploadSubs[i]?.unsubscribe(),this.uploadSubs[i]=null),this.localFiles.splice(i,1),this.uploadedImagePaths.splice(i,1),this.uploadingFlags.splice(i,1),this.uploadProgress.splice(i,1),this.uploadSubs.splice(i,1),this.imagesArray.removeAt(i)}onFileSelect(i,e){let o=i.target?.files?.[0];if(!o){console.error("No file selected or invalid file input.");return}this.localFiles[e]=o,this.uploadedImagePaths[e]=null,this.uploadingFlags[e]=!0,this.uploadProgress[e]=0,this.imagesArray.at(e).setValue("uploading...");let l=this.fileServ.uploadFile(o).pipe(I(d=>(this.uploadingFlags[e]=!1,this.uploadProgress[e]=0,this.showError(`Image upload failed: ${d?.message||d}`),w(d))),E(()=>{this.uploadingFlags[e]=!1})).subscribe(d=>{if(d.type===S.UploadProgress&&d.total)this.uploadProgress[e]=Math.round(d.loaded/d.total*100);else if(d.type===S.Response){let C=d.body,A=C?.file?.path||C?.path||null;if(A){let j=A.replace(/\\/g,"/");this.uploadedImagePaths[e]=j,this.imagesArray.at(e).setValue(j),this.showSuccess("Image uploaded")}else this.imagesArray.at(e).setValue(""),this.showWarning("Upload succeeded but server did not return path")}});this.uploadSubs[e]=l}isUploadingIndex(i){return this.uploadingFlags[i]===!0}onSubmit=()=>{if(this.projectForm.markAllAsTouched(),this.projectForm.invalid){this.showWarning("Please complete all required fields.");return}if(this.uploadingAny){this.showWarning("Please wait until all images finish uploading.");return}if(!this.selectedProject?._id){this.showError("Missing project id.");return}if(this.isLoading)return;let i=this.imagesArray.value.map((o,l)=>this.uploadedImagePaths[l]||(typeof o=="string"?o:""));this.imagesArray.clear(),i.forEach(o=>this.imagesArray.push(this.fb.control(o)));let e=this.projectForm.value;e.images=(e.images||[]).filter(o=>!!o),this.isLoading=!0,this.updateSub=this.projectService.put("projects",this.selectedProject._id,e).pipe(X(1e4),I(o=>w(o)),E(()=>{this.isLoading=!1})).subscribe(o=>{this.showSuccess("Project updated successfully!"),this.router.navigate(["/admin/projects"])},o=>{console.error("Error updating project:",o);let l=o?.name==="TimeoutError"?"Server timed out. Try later.":o?.message||"Error updating project.";this.showError(l)})};static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(D),f($),f(Se))};static \u0275cmp=P({type:a,selectors:[["app-edit-project"]],decls:28,vars:6,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/projects",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","project_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","name"],[1,"text-danger"],["type","text","id","name","formControlName","name",1,"form-control"],["class","form-group col-lg-12","formArrayName","descriptions",4,"ngFor","ngForOf"],["class","form-group col-lg-4","formArrayName","images",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["formArrayName","descriptions",1,"form-group","col-lg-12"],[3,"for"],["rows","5",1,"form-control",3,"id","formControlName"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary","me-5",3,"click"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],["formArrayName","images",1,"form-group","col-lg-4"],["type","file","accept","image/*",1,"form-control",3,"change","id","disabled"],["class","preview-image mt-2",4,"ngIf"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],[1,"d-flex","justify-content-between","mt-2"],["type","button",1,"btn","btn-secondary","me-5",3,"click","disabled"],["type","button","class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"preview-image","mt-2"],["alt","Project Image",1,"rounded-3",2,"width","85px",3,"src"],[1,"mt-2"],[1,"small","mb-1"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["type","button",1,"btn","btn-danger",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Projects"),t()(),n(9,"h4",8),r(10,"Edit Project"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.onSubmit()}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Project Name ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),g(21,an,16,7,"div",15)(22,cn,16,10,"div",16),c(23,"hr"),n(24,"div",17)(25,"button",18),g(26,pn,1,0,"span",19),r(27),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.projectForm),s(9),m("ngForOf",o.descriptions.controls),s(),m("ngForOf",o.imagesArray.controls),s(3),m("disabled",o.isLoading||o.uploadingAny||o.projectForm.invalid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Updating...":"Update Project"," "))},dependencies:[F,k,T,L,N,V,z,G,Q,ot],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};var un=["confirmDeleteModal"],gn=(a,i)=>({itemsPerPage:a,currentPage:i}),fn=a=>["edit-blog",a];function hn(a,i){if(a&1){let e=y();n(0,"div",30)(1,"h5",31),r(2,"Confirm Deletion"),t(),n(3,"button",32),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",33)(5,"p"),r(6,"Are you sure you want to delete this blog? This action cannot be undone."),t()(),n(7,"div",34)(8,"button",35),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",36),u("click",function(){let l=h(e).$implicit,d=p(2);return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}function bn(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td",25),r(4),t(),n(5,"td"),c(6,"img",26),t(),n(7,"td",25),r(8),t(),n(9,"td"),r(10),t(),n(11,"td"),r(12),t(),n(13,"td",20)(14,"a",27),r(15,"Edit"),t()(),n(16,"td",20)(17,"div",28)(18,"button",29),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),r(19,"Delete"),t(),g(20,hn,12,0,"ng-template",null,0,te),t()()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),_(e.title),s(2),m("src",l.env+"/file/download/"+e.image,q),s(2),x(" ",e.description," "),s(2),_(e.created_at),s(2),_(e.updated_at),s(2),m("routerLink",ye(7,fn,e._id))}}var mt=class a{constructor(i,e,o,l){this._blogService=i;this.fb=e;this.modalService=o;this.fileServ=l;this.env=Z.url,this.myForm=this.fb.group({image:[null,v.required],title:["",v.required],description:["",v.required]});for(let d=1;d<=100;d++)this.collection.push(`item ${d}`)}p=1;itemsPerPage=10;env;selectedBlog={};getData;myForm;blogToDeleteId=null;image=[];collection=[];confirmDeleteModal;data;ngOnInit(){this.fetchAllBlogs()}fetchAllBlogs(){this._blogService.get("blogs",{}).subscribe(i=>{this.getData=i,console.log(this.getData.length)})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}editBlog(i,e){this.selectedBlog=re({},i),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"})}onDelete(i){this.blogToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Delete"&&this.blogToDeleteId&&this._blogService.delete("blogs",this.blogToDeleteId).subscribe(l=>{console.log(l),this.fetchAllBlogs()})})}confirmDelete(i){i.close("Delete")}onDeleteAll(){}handleFileInput(i){this.selectedBlog.image=i.target.files[0]}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.myForm.patchValue({image:e}),this.myForm.get("image")?.updateValueAndValidity())}onRemove(i){this.image.includes(i)&&(this.image=[],this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}uploadImage(i){this.image.length>0?this.fileServ.uploadFile(this.image[0]).subscribe(e=>{if(e.type===S.Response){let l=e.body.file.path;this.selectedBlog.image=l,console.log("blog",this.selectedBlog),this._blogService.put("blogs",this.selectedBlog._id,this.selectedBlog).subscribe(d=>{this.fetchAllBlogs(),i.close()})}},e=>{alert(`Error uploading image: ${e.message}`)}):alert("Please Select Image")}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(ce),f(D))};static \u0275cmp=P({type:a,selectors:[["app-blogs"]],viewQuery:function(e,o){if(e&1&&Y(un,5),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first)}},decls:51,vars:7,consts:[["confirmDeleteModal",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],["routerLink","add-blog",1,"btn","btn-primary","btn-sm"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3"],[1,"form-label","mb-0"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1"],["value","10"],["value","25"],["value","50"],["value","100"],["type","search","placeholder","Search",1,"form-control","form-control-sm","w-auto"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-muted"],[3,"pageChange"],[1,"text-truncate"],["alt","Blog","width","85",1,"rounded-3",3,"src"],[1,"btn","btn-success","btn-sm",3,"routerLink"],[1,"d-flex","justify-content-center","gap-2","flex-nowrap"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),r(6,"Blogs"),t(),n(7,"a",7),r(8,"Add Blog"),t()(),n(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),r(13," Show "),n(14,"select",12)(15,"option",13),r(16,"10"),t(),n(17,"option",14),r(18,"25"),t(),n(19,"option",15),r(20,"50"),t(),n(21,"option",16),r(22,"100"),t()(),r(23," entries "),t(),c(24,"input",17),t(),n(25,"table",18)(26,"thead",19)(27,"tr")(28,"th"),r(29,"S.no."),t(),n(30,"th"),r(31,"Blog Name"),t(),n(32,"th"),r(33,"Blog Image"),t(),n(34,"th"),r(35,"Description"),t(),n(36,"th"),r(37,"Created On"),t(),n(38,"th"),r(39,"Published On"),t(),n(40,"th",20),r(41,"Edit"),t(),n(42,"th",20),r(43,"Delete"),t()()(),n(44,"tbody"),g(45,bn,22,9,"tr",21),ee(46,"paginate"),t()(),n(47,"div",22)(48,"small",23),r(49,"Showing 1 to 10 of 10 entries"),t(),n(50,"pagination-controls",24),u("pageChange",function(d){return o.p=d}),t()()()()()()()()),e&2&&(s(45),m("ngForOf",ne(46,1,o.getData,de(4,gn,o.itemsPerPage,o.p))))},dependencies:[F,T,ue,B,R,pe],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}"]})};var xi=[[["ngx-dropzone-label"]]],Ci=["ngx-dropzone-label"];function _n(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-remove-badge",1),u("click",function(l){h(e);let d=p();return b(d._remove(l))}),t()}}var vn=["fileInput"],xn=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],Cn=["ngx-dropzone-preview","*","ngx-dropzone-label"];function yn(a,i){a&1&&Ue(0,2,["*ngIf","!_hasPreviews"])}function Sn(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-remove-badge",2),u("click",function(l){h(e);let d=p();return b(d._remove(l))}),t()}}var he=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275dir=Xe({type:a,selectors:[["ngx-dropzone-label"]]}),a})();function He(a){return a!=null&&`${a}`!="false"}function Pn(a){return!isNaN(parseFloat(a))&&!isNaN(Number(a))?Number(a):null}var yi=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=P({type:a,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(e,o){e&1&&($t(),n(0,"svg"),c(1,"line",0)(2,"line",1),t())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),a})(),zt=function(a){return a[a.BACKSPACE=8]="BACKSPACE",a[a.DELETE=46]="DELETE",a}(zt||{}),Lt=(()=>{class a{constructor(e){this.sanitizer=e,this._removable=!1,this.removed=new Ve,this.tabIndex=0}set file(e){this._file=e}get file(){return this._file}get removable(){return this._removable}set removable(e){this._removable=He(e)}keyEvent(e){switch(e.keyCode){case zt.BACKSPACE:case zt.DELETE:this.remove();break;default:break}}get hostStyle(){return this.sanitizer.bypassSecurityTrustStyle(`
			display: flex;
			height: 140px;
			min-height: 140px;
			min-width: 180px;
			max-width: 180px;
			justify-content: center;
			align-items: center;
			padding: 0 20px;
			margin: 10px;
			border-radius: 5px;
			position: relative;
		`)}_remove(e){e.stopPropagation(),this.remove()}remove(){this._removable&&this.removed.next(this.file)}readFile(){return je(this,null,function*(){return new Promise((e,o)=>{let l=new FileReader;if(l.onload=d=>{e(d.target.result)},l.onerror=d=>{console.error(`FileReader failed on file ${this.file.name}.`),o(d)},!this.file)return o("No file to read. Please provide a file using the [file] Input property.");l.readAsDataURL(this.file)})})}}return a.\u0275fac=function(e){return new(e||a)(f(jt))},a.\u0275cmp=P({type:a,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(e,o){e&1&&u("keyup",function(d){return o.keyEvent(d)}),e&2&&(Yt("tabindex",o.tabIndex),Wt(o.hostStyle))},inputs:{file:"file",removable:"removable"},outputs:{removed:"removed"},ngContentSelectors:Ci,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(e,o){e&1&&(et(xi),Ue(0),g(1,_n,1,0,"ngx-dropzone-remove-badge",0)),e&2&&(s(),m("ngIf",o.removable))},dependencies:[yi,k],styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),a})(),vi=(()=>{class a{parseFileList(e,o,l,d){let C=[],A=[];for(let le=0;le<e.length;le++){let xe=e.item(le);if(!this.isAccepted(xe,o)){this.rejectFile(A,xe,"type");continue}if(l&&xe.size>l){this.rejectFile(A,xe,"size");continue}if(!d&&C.length>=1){this.rejectFile(A,xe,"no_multiple");continue}C.push(xe)}return{addedFiles:C,rejectedFiles:A}}isAccepted(e,o){if(o==="*")return!0;let l=o.split(",").map(j=>j.toLowerCase().trim()),d=e.type.toLowerCase(),C=e.name.toLowerCase();return!!l.find(j=>j.endsWith("/*")?d.split("/")[0]===j.split("/")[0]:j.startsWith(".")?C.endsWith(j):j==d)}rejectFile(e,o,l){let d=o;d.reason=l,e.push(d)}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=Ye({token:a,factory:a.\u0275fac}),a})(),be=(()=>{class a{constructor(e){this.service=e,this.change=new Ve,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._processDirectoryDrop=!1,this._isHovered=!1}get _hasPreviews(){return!!this._previewChildren.length}get disabled(){return this._disabled}set disabled(e){this._disabled=He(e),this._isHovered&&(this._isHovered=!1)}get multiple(){return this._multiple}set multiple(e){this._multiple=He(e)}get maxFileSize(){return this._maxFileSize}set maxFileSize(e){this._maxFileSize=Pn(e)}get expandable(){return this._expandable}set expandable(e){this._expandable=He(e)}get disableClick(){return this._disableClick}set disableClick(e){this._disableClick=He(e)}get processDirectoryDrop(){return this._processDirectoryDrop}set processDirectoryDrop(e){this._processDirectoryDrop=He(e)}_onClick(){this.disableClick||this.showFileSelector()}_onDragOver(e){this.disabled||(this.preventDefault(e),this._isHovered=!0)}_onDragLeave(){this._isHovered=!1}_onDrop(e){if(!this.disabled)if(this.preventDefault(e),this._isHovered=!1,!this.processDirectoryDrop||!DataTransferItem.prototype.webkitGetAsEntry)this.handleFileDrop(e.dataTransfer.files);else{let o=e.dataTransfer.items;if(o.length>0){let l=[],d=[];for(let A=0;A<o.length;A++){let j=o[A].webkitGetAsEntry();j.isFile?l.push(e.dataTransfer.files[A]):j.isDirectory&&d.push(j)}let C=new DataTransfer;if(l.forEach(A=>{C.items.add(A)}),!d.length&&C.items.length&&this.handleFileDrop(C.files),d.length){let A=[];for(let j of d)A.push(this.extractFilesFromDirectory(j));Promise.all(A).then(j=>{j.reduce((le,xe)=>[...le,...xe]).forEach(le=>{C.items.add(le)}),this.handleFileDrop(C.files)})}}}}extractFilesFromDirectory(e){function o(l){return je(this,null,function*(){try{return yield new Promise((d,C)=>l.file(d,C))}catch(d){console.log("Error converting a fileEntry to a File: ",d)}})}return new Promise((l,d)=>{let C=[],A=e.createReader(),j=()=>{A.readEntries(le=>je(this,null,function*(){if(!le.length)l(C);else{let xe=le.filter(we=>we.isFile);for(let we of xe){let Be=yield o(we);C.push(Be)}j()}}))};j()})}showFileSelector(){this.disabled||this._fileInput.nativeElement.click()}_onFilesSelected(e){let o=e.target.files;this.handleFileDrop(o),this._fileInput.nativeElement.value="",this.preventDefault(e)}handleFileDrop(e){let o=this.service.parseFileList(e,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:o.addedFiles,rejectedFiles:o.rejectedFiles,source:this})}preventDefault(e){e.preventDefault(),e.stopPropagation()}}return a.\u0275fac=function(e){return new(e||a)(f(vi,2))},a.\u0275cmp=P({type:a,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(e,o,l){if(e&1&&Xt(l,Lt,5),e&2){let d;H(d=J())&&(o._previewChildren=d)}},viewQuery:function(e,o){if(e&1&&Y(vn,7),e&2){let l;H(l=J())&&(o._fileInput=l.first)}},hostVars:8,hostBindings:function(e,o){e&1&&u("click",function(){return o._onClick()})("dragover",function(d){return o._onDragOver(d)})("dragleave",function(){return o._onDragLeave()})("drop",function(d){return o._onDrop(d)}),e&2&&se("ngx-dz-disabled",o.disabled)("expandable",o.expandable)("unclickable",o.disableClick)("ngx-dz-hovered",o._isHovered)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",processDirectoryDrop:"processDirectoryDrop",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedBy:[0,"aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[kt([vi])],ngContentSelectors:Cn,decls:5,vars:8,consts:[["fileInput",""],["type","file",3,"change","id","multiple","accept","disabled"],[4,"ngIf"]],template:function(e,o){if(e&1){let l=y();et(xn),n(0,"input",1,0),u("change",function(C){return h(l),b(o._onFilesSelected(C))}),t(),g(2,yn,1,0,"ng-content",2),Ue(3),Ue(4,1)}e&2&&(m("id",o.id)("multiple",o.multiple)("accept",o.accept)("disabled",o.disabled),Ke("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby)("aria-describedby",o.ariaDescribedBy),s(2),m("ngIf",!o._hasPreviews))},dependencies:[k],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:1px dotted #000;outline:-webkit-focus-ring-color auto 5px}"]}),a})(),_e=(()=>{class a extends Lt{constructor(e){super(e),this.defaultImgLoading="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiByZ2IoMjQxLCAyNDIsIDI0Mykgbm9uZSByZXBlYXQgc2Nyb2xsIDAlIDAlOyBkaXNwbGF5OiBibG9jazsgc2hhcGUtcmVuZGVyaW5nOiBhdXRvOyIgd2lkdGg9IjIyNHB4IiBoZWlnaHQ9IjIyNHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgo8Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSIxNCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiM4NWEyYjYiIHN0cm9rZS1kYXNoYXJyYXk9IjIxLjk5MTE0ODU3NTEyODU1MiAyMS45OTExNDg1NzUxMjg1NTIiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGR1cj0iMS4xNjI3OTA2OTc2NzQ0MTg0cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGtleVRpbWVzPSIwOzEiIHZhbHVlcz0iMCA1MCA1MDszNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjEwIiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iI2JiY2VkZCIgc3Ryb2tlLWRhc2hhcnJheT0iMTUuNzA3OTYzMjY3OTQ4OTY2IDE1LjcwNzk2MzI2Nzk0ODk2NiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE1LjcwNzk2MzI2Nzk0ODk2NiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZHVyPSIxLjE2Mjc5MDY5NzY3NDQxODRzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIga2V5VGltZXM9IjA7MSIgdmFsdWVzPSIwIDUwIDUwOy0zNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjwhLS0gW2xkaW9dIGdlbmVyYXRlZCBieSBodHRwczovL2xvYWRpbmcuaW8vIC0tPjwvc3ZnPg==",this.imageSrc=this.sanitizer.bypassSecurityTrustUrl(this.defaultImgLoading)}set file(e){this._file=e,this.renderImage()}get file(){return this._file}ngOnInit(){this.renderImage()}renderImage(){this.readFile().then(e=>setTimeout(()=>this.imageSrc=e)).catch(e=>console.error(e))}}return a.\u0275fac=function(e){return new(e||a)(f(jt))},a.\u0275cmp=P({type:a,selectors:[["ngx-dropzone-image-preview"]],inputs:{file:"file"},features:[kt([{provide:Lt,useExisting:a}]),Qt],ngContentSelectors:Ci,decls:3,vars:2,consts:[[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(e,o){e&1&&(et(xi),c(0,"img",0),Ue(1),g(2,Sn,1,0,"ngx-dropzone-remove-badge",1)),e&2&&(m("src",o.imageSrc,q),s(2),m("ngIf",o.removable))},dependencies:[yi,k],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:hover   img[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   img[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;border-radius:5px;opacity:.8}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),a})();var Si=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=ze({type:a}),a.\u0275inj=Ne({imports:[[Ge]]}),a})();function En(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",25),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function wn(a,i){if(a&1&&(n(0,"div",26)(1,"div",27),r(2),t(),n(3,"div",28),c(4,"div",29),t()()),a&2){let e=p();s(2),x("Image upload: ",e.uploadProgress,"%"),s(2),K("width",e.uploadProgress,"%")}}function In(a,i){a&1&&c(0,"span",30)}var ct=class a{constructor(i,e,o,l,d){this.fb=i;this.fileServ=e;this.api=o;this.as=l;this.route=d;this.myForm=this.fb.group({image:[null,v.required],title:["",v.required],description:["",[v.required,v.maxLength(1500)]]})}myForm;isLoading=!1;image=[];uploading=!1;uploadProgress=0;uploadedImagePath=null;uploadSub;ngOnInit(){}uploadImage(i){if(this.uploadedImagePath){this.myForm.patchValue({image:this.uploadedImagePath}),this.onSubmit(i);return}if(this.image.length>0&&!this.uploading){this.uploading=!0,this.uploadProgress=0;let e=this.image[0];this.uploadSub=this.fileServ.uploadFile(e).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){this.uploading=!1;let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d,this.myForm.patchValue({image:d}),this.onSubmit(i)):this.as.errorToast("Upload succeeded but server did not return image path.")}},o=>{this.uploading=!1,this.isLoading=!1,this.uploadProgress=0,this.as.errorToast(`Error uploading image: ${o?.message||o}`)})}else this.as.warningToast("Please select an image")}onSubmit(i){if(!i.valid){this.as.warningToast("Please fill required fields");return}this.isLoading=!0,this.api.post("blogs",i.value).subscribe(e=>{if(this.isLoading=!1,e)this.as.successToast("Blog created successfully!"),alert("Blog created successfully!"),this.route.navigate(["/admin/blogs"]);else{let o=e?.error?.message||"Unknown error creating blog";this.as.warningToast(o)}},e=>{this.isLoading=!1,this.as.errorToast(e?.message||"Error creating blog")})}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.uploadProgress=0,this.uploading=!0,this.uploadedImagePath=null,this.uploadSub=this.fileServ.uploadFile(e).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){this.uploading=!1;let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d,this.myForm.patchValue({image:d}),this.myForm.get("image")?.updateValueAndValidity(),this.as.successToast("Image uploaded")):this.as.warningToast("Image uploaded but response missing path")}},o=>{this.uploading=!1,this.uploadProgress=0,this.as.errorToast(`Image upload failed: ${o?.message||o}`)}))}onRemove(i){this.image.includes(i)&&(this.uploadSub&&(this.uploadSub.unsubscribe(),this.uploadSub=void 0),this.image=[],this.uploading=!1,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}static \u0275fac=function(e){return new(e||a)(f(M),f(D),f(O),f(me),f($))};static \u0275cmp=P({type:a,selectors:[["app-add-blog"]],decls:47,vars:6,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/blogs",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","blog_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","title"],[1,"text-danger"],["type","text","id","title","formControlName","title",1,"form-control"],["for","description"],["id","description","formControlName","description","rows","5",1,"form-control"],[1,"form-group","col-lg-4"],["for","blog_image"],["ngx-dropzone","",1,"custom-dropzone",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","removable","file"],[1,"mt-2"],[1,"mb-1","small"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Blogs"),t()(),n(9,"h4",8),r(10,"Add Blog"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.uploadImage(o.myForm)}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Blog Name ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),n(21,"div",11)(22,"label",15),r(23,"Blog Description ( "),n(24,"span",13),r(25,"required *"),t(),r(26,")"),t(),c(27,"textarea",16),n(28,"p",13),r(29,"Max Character Count : 1500 Character"),t()(),n(30,"div",17)(31,"label",18),r(32,"Blog Image ( "),n(33,"span",13),r(34,"required *"),t(),r(35,")"),t(),n(36,"div",19),u("change",function(d){return o.onSelect(d)}),n(37,"ngx-dropzone-label"),r(38,"Drag and drop an image here, or click to select an image"),t(),g(39,En,1,2,"ngx-dropzone-image-preview",20),t(),g(40,wn,5,3,"div",21),c(41,"br"),t(),c(42,"hr"),n(43,"div",22)(44,"button",23),g(45,In,1,0,"span",24),r(46," Add "),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.myForm),s(24),m("accept","image/*"),s(3),m("ngForOf",o.image),s(),m("ngIf",o.uploading||o.uploadProgress>0),s(4),m("disabled",o.isLoading||o.uploading||!o.myForm.valid),s(),m("ngIf",o.isLoading))},dependencies:[F,k,T,be,he,_e,L,N,V,z,G,Q],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #007bff;border-radius:6px;padding:30px;text-align:center;background-color:#f8f9fa;cursor:pointer;box-shadow:0 4px 8px #0003;transition:background-color .3s ease,box-shadow .3s ease}.dropzone[_ngcontent-%COMP%]:hover{background-color:#e2e6ea;box-shadow:0 8px 16px #0000004d}.dropzone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#007bff}.dropzone[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.preview-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center}.preview-image[_ngcontent-%COMP%]{max-width:25%;max-height:25%;border-radius:6px;box-shadow:0 2px 4px #0000001a}.btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};function Fn(a,i){if(a&1&&(n(0,"div",27),c(1,"img",28),t()),a&2){let e=p();s(),m("src",e.selectedBlog.image.startsWith("http")||e.selectedBlog.image.startsWith("/")?e.selectedBlog.image:e.env+"/"+e.selectedBlog.image,q)}}function Mn(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",29),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function On(a,i){if(a&1&&(n(0,"div",30)(1,"div",31),r(2),t(),n(3,"div",32),c(4,"div",33),t()()),a&2){let e=p();s(2),x("Image upload: ",e.uploadProgress,"%"),s(2),K("width",e.uploadProgress,"%")}}function Tn(a,i){a&1&&(n(0,"div",34),r(1," Image uploaded "),t())}function Dn(a,i){a&1&&c(0,"span",35)}var pt=class a{constructor(i,e,o,l,d){this._blogService=i;this.fb=e;this.fileServ=o;this.router=l;this.route=d;this.myForm=this.fb.group({image:[null],title:["",v.required],description:["",v.required]})}env=Z.url;selectedBlog={};myForm;image=[];uploading=!1;uploadProgress=0;uploadedImagePath=null;isLoading=!1;uploadSub;updateSub;ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i?this.fetchBlogById(i):(console.error("Blog ID is undefined on initialization"),alert("Error: Blog ID is undefined on initialization"))}ngOnDestroy(){this.uploadSub?.unsubscribe(),this.updateSub?.unsubscribe()}fetchBlogById(i){this._blogService.get(`blogs/${i}`,{}).subscribe(e=>{e&&e.data&&e.data._id?(this.selectedBlog=e.data,this.selectedBlog.image&&!this.selectedBlog.image.startsWith("http")&&(this.selectedBlog.image=this.selectedBlog.image.replace(/\\/g,"/")),this.populateForm()):(console.error("Blog data does not contain an _id:",e),alert("Error: Blog data is missing an ID."))},e=>{console.error(`Error fetching blog with ID ${i}:`,e),alert(`Error fetching blog: ${e?.message||e}`)})}populateForm(){this.myForm.patchValue({title:this.selectedBlog.title,description:this.selectedBlog.description,image:null}),this.uploadedImagePath=this.selectedBlog.image||null}uploadImage(){if(this.myForm.markAllAsTouched(),!this.myForm.valid){alert("Please fill required fields");return}if(this.selectedBlog.title=this.myForm.value.title,this.selectedBlog.description=this.myForm.value.description,this.image.length>0&&!this.uploadedImagePath){this.uploading=!0,this.uploadProgress=0;let i=this.image[0];this.uploadSub=this.fileServ.uploadFile(i).pipe(I(e=>(this.uploading=!1,this.uploadProgress=0,console.error("Error uploading image:",e),alert(`Error uploading image: ${e?.message||e}`),w(e))),E(()=>{this.uploading=!1})).subscribe(e=>{if(e.type===S.UploadProgress&&e.total)this.uploadProgress=Math.round(e.loaded/e.total*100);else if(e.type===S.Response){let o=e.body;if(o&&o.file&&o.file.path){let l=o.file.path.replace(/\\/g,"/");this.uploadedImagePath=l,this.selectedBlog.image=l,this.updateBlog()}else console.error("Image upload response does not contain a valid path"),alert("Error: Image upload failed.")}});return}this.updateBlog()}updateBlog(){if(this.uploadedImagePath&&(this.selectedBlog.image=this.uploadedImagePath),!this.selectedBlog._id){console.error("Missing blog id for update",this.selectedBlog),alert("Error: Missing blog id.");return}this.isLoading||(this.isLoading=!0,this.updateSub=this._blogService.put("blogs",this.selectedBlog._id,this.selectedBlog).pipe(X(1e4),I(i=>w(i)),E(()=>{this.isLoading=!1})).subscribe(i=>{alert("Blog updated successfully"),this.router.navigate(["/admin/blogs"])},i=>{let e=i?.name==="TimeoutError"?"Server is taking too long to respond. Please try again later.":i?.message||"Error updating blog";console.error("Error updating blog:",i),alert(e)}))}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.uploadedImagePath=null,this.uploadProgress=0,this.uploading=!0,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity(),this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,console.error("Image upload failed:",o),alert(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body;if(l&&l.file&&l.file.path){let d=l.file.path.replace(/\\/g,"/");this.uploadedImagePath=d,this.myForm.patchValue({image:d}),this.selectedBlog.image=d,this.myForm.get("image")?.updateValueAndValidity()}else console.error("Upload succeeded but response missing path"),alert("Upload succeeded but server did not return image path")}}))}onRemove(i){this.image.includes(i)&&(this.uploadSub?.unsubscribe(),this.uploadSub=void 0,this.image=[],this.uploading=!1,this.uploadProgress=0,this.uploadedImagePath=this.selectedBlog?.image||null,this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity())}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(D),f($),f(Se))};static \u0275cmp=P({type:a,selectors:[["app-edit-blog"]],decls:49,vars:9,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/blogs",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","blog_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","title"],[1,"text-danger"],["type","text","id","title","formControlName","title","required","",1,"form-control"],["for","description"],["id","description","formControlName","description","rows","5","required","",1,"form-control"],["class","preview-image",4,"ngIf"],[1,"form-group","col-lg-4"],["for","image"],["ngx-dropzone","",1,"custom-dropzone",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"preview-image"],["alt","Current Blog Image",2,"width","200px","height","200px",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","removable","file"],[1,"mt-2"],[1,"mb-1","small"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Blogs"),t()(),n(9,"h4",8),r(10,"Edit Blog"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.uploadImage()}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Blog Title ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),n(21,"div",11)(22,"label",15),r(23,"Blog Description ( "),n(24,"span",13),r(25,"required *"),t(),r(26,")"),t(),c(27,"textarea",16),n(28,"p",13),r(29,"Max Character Count: 600 Characters"),t()(),g(30,Fn,2,1,"div",17),n(31,"div",18)(32,"label",19),r(33,"Blog Cover Image ( "),n(34,"span",13),r(35,"Change Image If Required *"),t(),r(36,")"),t(),n(37,"div",20),u("change",function(d){return o.onSelect(d)}),n(38,"ngx-dropzone-label"),r(39,"Drag and drop an image here, or click to select an image"),t(),g(40,Mn,1,2,"ngx-dropzone-image-preview",21),t(),g(41,On,5,3,"div",22)(42,Tn,2,0,"div",23),c(43,"br"),t(),c(44,"hr"),n(45,"div",24)(46,"button",25),g(47,Dn,1,0,"span",26),r(48),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.myForm),s(18),m("ngIf",o.selectedBlog.image),s(7),m("accept","image/*"),s(3),m("ngForOf",o.image),s(),m("ngIf",o.uploading||o.uploadProgress>0),s(),m("ngIf",o.uploadedImagePath&&!o.uploading),s(4),m("disabled",o.isLoading||o.uploading||!o.myForm.valid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Updating...":"Update"," "))},dependencies:[F,k,T,be,he,_e,L,N,V,z,Te,G,Q],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};var An=["confirmDeleteModal"],kn=(a,i)=>({itemsPerPage:a,currentPage:i});function jn(a,i){if(a&1){let e=y();n(0,"div",27)(1,"h5",28),r(2,"Confirm Deletion"),t(),n(3,"button",29),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",30)(5,"p"),r(6,"Are you sure you want to delete this contact? This action cannot be undone."),t()(),n(7,"div",31)(8,"button",32),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",33),u("click",function(){let l=h(e).$implicit,d=p(2);return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}function Vn(a,i){if(a&1){let e=y();n(0,"div",27)(1,"h5",28),r(2,"Edit Contact"),t(),n(3,"button",29),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cross click"))}),t()(),n(4,"div",30)(5,"form")(6,"div",34)(7,"label",35),r(8,"Name"),t(),n(9,"input",36),Oe("ngModelChange",function(l){h(e);let d=p(2);return Me(d.selectedContact.name,l)||(d.selectedContact.name=l),b(l)}),t()(),n(10,"div",34)(11,"label",35),r(12,"Email"),t(),n(13,"input",37),Oe("ngModelChange",function(l){h(e);let d=p(2);return Me(d.selectedContact.email,l)||(d.selectedContact.email=l),b(l)}),t()(),n(14,"div",34)(15,"label",35),r(16,"Phone"),t(),n(17,"input",38),Oe("ngModelChange",function(l){h(e);let d=p(2);return Me(d.selectedContact.number,l)||(d.selectedContact.number=l),b(l)}),t()(),n(18,"div",34)(19,"label",35),r(20,"Country Code"),t(),n(21,"input",39),Oe("ngModelChange",function(l){h(e);let d=p(2);return Me(d.selectedContact.countryCode,l)||(d.selectedContact.countryCode=l),b(l)}),t()(),n(22,"div",34)(23,"label",35),r(24,"Message"),t(),n(25,"textarea",40),Oe("ngModelChange",function(l){h(e);let d=p(2);return Me(d.selectedContact.message,l)||(d.selectedContact.message=l),b(l)}),t()()()(),n(26,"div",31)(27,"button",32),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(28,"Cancel"),t(),n(29,"button",41),u("click",function(){let l=h(e).$implicit;return b(l.close("Save"))}),r(30,"Update"),t()()}if(a&2){let e=p(2);s(9),Fe("ngModel",e.selectedContact.name),s(4),Fe("ngModel",e.selectedContact.email),s(4),Fe("ngModel",e.selectedContact.number),s(4),Fe("ngModel",e.selectedContact.countryCode),s(4),Fe("ngModel",e.selectedContact.message)}}function Nn(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td"),r(4),t(),n(5,"td"),r(6),t(),n(7,"td"),r(8),t(),n(9,"td"),r(10),t(),n(11,"td"),r(12),t(),n(13,"td",19)(14,"div",24)(15,"button",25),u("click",function(){let l=h(e).$implicit,d=Ce(22),C=p();return b(C.editContact(l,d))}),r(16,"Edit"),t(),n(17,"button",26),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),r(18,"Delete"),t()(),g(19,jn,12,0,"ng-template",null,0,te)(21,Vn,31,5,"ng-template",null,1,te),t()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),_(e.name),s(2),_(e.email),s(2),_(e.countryCode),s(2),_(e.number),s(2),_(e.message)}}var ut=class a{constructor(i,e,o){this.http=i;this._contactService=e;this.modalService=o;for(let l=1;l<=100;l++)this.collection.push(`item ${l}`)}collection=[];p=1;itemsPerPage=10;getData;selectedContact={name:"",email:"",countryCode:"",number:"",message:""};isDeletingAll=!1;confirmDeleteModal;contactToDeleteId=null;ngOnInit(){this.fetchAllContacts()}fetchAllContacts(){this._contactService.onContactGetAll().subscribe(i=>{this.getData=i,console.log(this.getData.length)})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}editContact(i,e){this.selectedContact=re({},i),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Save"&&this.updateContact(this.selectedContact._id,this.selectedContact)})}updateContact(i,e){this._contactService.onContactUpdate(i,e).subscribe(o=>{let l=this.getData.findIndex(d=>d._id===i);l!==-1&&(this.getData[l]=e)})}onDelete(i){this.contactToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Delete"&&this.contactToDeleteId&&this._contactService.onContactDelete(this.contactToDeleteId).subscribe(l=>{this.fetchAllContacts()})})}confirmDelete(i){i.close("Delete")}confirmDeleteAll(){this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(e=>{e==="Confirm"&&this.confirmDeleteAllAction()})}confirmDeleteAllAction(){this.isDeletingAll=!0,setTimeout(()=>{this._contactService.onContactDeleteAll().subscribe(i=>{this.fetchAllContacts(),this.isDeletingAll=!1})},1e4)}static \u0275fac=function(e){return new(e||a)(f(Qe),f(rt),f(ce))};static \u0275cmp=P({type:a,selectors:[["app-query"]],viewQuery:function(e,o){if(e&1&&Y(An,5),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first)}},decls:47,vars:7,consts:[["confirmDeleteModal",""],["content",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"card-title","mb-3"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3"],[1,"form-label","mb-0"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1"],["value","10"],["value","25"],["value","50"],["value","100"],["type","search","placeholder","Search",1,"form-control","form-control-sm"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-muted"],[3,"pageChange"],[1,"d-flex","justify-content-center","gap-2"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"mb-3"],[1,"form-label"],["type","text","name","name",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","email",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","number",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","countryCode",1,"form-control",3,"ngModelChange","ngModel"],["name","message",1,"form-control","text-truncate",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,o){e&1&&(n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h4",6),r(5,"Contacts List"),t(),n(6,"div",7)(7,"div",8)(8,"div",9)(9,"label",10),r(10," Show "),n(11,"select",11)(12,"option",12),r(13,"10"),t(),n(14,"option",13),r(15,"25"),t(),n(16,"option",14),r(17,"50"),t(),n(18,"option",15),r(19,"100"),t()(),r(20," entries "),t(),n(21,"div"),c(22,"input",16),t()(),n(23,"table",17)(24,"thead",18)(25,"tr")(26,"th"),r(27,"S.no"),t(),n(28,"th"),r(29,"Name"),t(),n(30,"th"),r(31,"Email"),t(),n(32,"th"),r(33,"Country Code"),t(),n(34,"th"),r(35,"Phone"),t(),n(36,"th"),r(37,"Message"),t(),n(38,"th",19),r(39,"Actions"),t()()(),n(40,"tbody"),g(41,Nn,23,6,"tr",20),ee(42,"paginate"),t()(),n(43,"div",21)(44,"small",22),r(45,"Showing 1 to 10 of 10 entries"),t(),n(46,"pagination-controls",23),u("pageChange",function(d){return o.p=d}),t()()()()()()()()),e&2&&(s(41),m("ngForOf",ne(42,1,o.getData,de(4,kn,o.itemsPerPage,o.p))))},dependencies:[F,ue,L,B,R,N,V,z,We,si,pe],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}textarea[_ngcontent-%COMP%]{resize:vertical}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:250px}"]})};var U=class a{constructor(i,e){this.authService=i;this.router=e}canActivate(){return this.authService.isLoggedIn()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(e){return new(e||a)(At(ai),At($))};static \u0275prov=Ye({token:a,factory:a.\u0275fac,providedIn:"root"})};var zn=["confirmDeleteModal"],Ln=(a,i)=>({itemsPerPage:a,currentPage:i}),Bn=(a,i,e,o)=>({"bg-success":a,"bg-warning text-dark":i,"bg-danger":e,"bg-secondary":o});function Rn(a,i){if(a&1){let e=y();n(0,"div",27)(1,"h5",28),r(2,"Confirm Deletion"),t(),n(3,"button",29),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",30)(5,"p"),r(6,"Are you sure you want to delete this contact? This action cannot be undone."),t()(),n(7,"div",31)(8,"button",32),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",33),u("click",function(){let l=h(e).$implicit,d=p(2);return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}function Un(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td"),r(4),t(),n(5,"td"),r(6),t(),n(7,"td"),r(8),t(),n(9,"td",18)(10,"span",23),r(11),ee(12,"titlecase"),t()(),n(13,"td"),r(14),t(),n(15,"td"),r(16),t(),n(17,"td",18)(18,"div",24)(19,"button",25),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),c(20,"i",26),r(21," Delete "),t(),g(22,Rn,12,0,"ng-template",null,0,te),t()()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),_(e.name),s(2),_(e.email),s(2),_(e.course),s(2),m("ngClass",ei(10,Bn,e.payment_status==="successful",e.payment_status==="pending",e.payment_status==="failed",e.payment_status==="abandoned")),s(),x(" ",ti(12,8,e.payment_status)," "),s(3),_(e.countryCode),s(2),_(e.number)}}var gt=class a{constructor(i,e,o){this.http=i;this._courseService=e;this.modalService=o;for(let l=1;l<=100;l++)this.collection.push(`item ${l}`)}collection=[];p=1;itemsPerPage=10;getData;selectedCourse={name:"",email:"",countryCode:"",number:"",course:"",price:"",total_amount:0};isDeletingAll=!1;confirmDeleteModal;courseToDeleteId=null;ngOnInit(){this.fetchAllCourses()}fetchAllCourses(){this._courseService.onCourseGetAll().subscribe(i=>{this.getData=i,console.log(this.getData.length)})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}editCourse(i,e){this.selectedCourse=re({},i),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Save"&&this.updateCourse(this.selectedCourse._id,this.selectedCourse)})}updateCourse(i,e){this._courseService.onCourseUpdate(i,e).subscribe(o=>{let l=this.getData.findIndex(d=>d._id===i);l!==-1&&(this.getData[l]=e)})}onDelete(i){this.courseToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Delete"&&this.courseToDeleteId&&this._courseService.onCourseDelete(this.courseToDeleteId).subscribe(l=>{this.fetchAllCourses()})})}confirmDelete(i){i.close("Delete")}confirmDeleteAll(){this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(e=>{e==="Confirm"&&this.confirmDeleteAllAction()})}confirmDeleteAllAction(){this.isDeletingAll=!0,setTimeout(()=>{this._courseService.onCourseDeleteAll().subscribe(i=>{this.fetchAllCourses(),this.isDeletingAll=!1})},1e4)}static \u0275fac=function(e){return new(e||a)(f(Qe),f(fi),f(ce))};static \u0275cmp=P({type:a,selectors:[["app-course-query"]],viewQuery:function(e,o){if(e&1&&Y(zn,5),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first)}},decls:48,vars:7,consts:[["confirmDeleteModal",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"card-title","mb-3"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3"],[1,"form-label","mb-0"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1"],["value","10"],["value","25"],["value","50"],["value","100"],["type","search","placeholder","Search",1,"form-control","form-control-sm","w-auto"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-muted"],[3,"pageChange"],[1,"badge",3,"ngClass"],[1,"d-flex","justify-content-center","gap-2","flex-nowrap"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash","me-1"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h4",5),r(5,"Course Query List"),t(),n(6,"div",6)(7,"div",7)(8,"div",8)(9,"label",9),r(10," Show "),n(11,"select",10)(12,"option",11),r(13,"10"),t(),n(14,"option",12),r(15,"25"),t(),n(16,"option",13),r(17,"50"),t(),n(18,"option",14),r(19,"100"),t()(),r(20," entries "),t(),c(21,"input",15),t(),n(22,"table",16)(23,"thead",17)(24,"tr")(25,"th"),r(26,"S.no"),t(),n(27,"th"),r(28,"Name"),t(),n(29,"th"),r(30,"Email"),t(),n(31,"th"),r(32,"Course"),t(),n(33,"th",18),r(34,"Payment Status"),t(),n(35,"th"),r(36,"Country Code"),t(),n(37,"th"),r(38,"Phone"),t(),n(39,"th",18),r(40,"Actions"),t()()(),n(41,"tbody"),g(42,Un,24,15,"tr",19),ee(43,"paginate"),t()(),n(44,"div",20)(45,"small",21),r(46,"Showing 1 to 10 of 10 entries"),t(),n(47,"pagination-controls",22),u("pageChange",function(d){return o.p=d}),t()()()()()()()()),e&2&&(s(42),m("ngForOf",ne(43,1,o.getData,de(4,Ln,o.itemsPerPage,o.p))))},dependencies:[tt,F,ue,B,R,ni,pe],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}"]})};var qn=["confirmDeleteModal"],$n=(a,i)=>({itemsPerPage:a,currentPage:i});function Gn(a,i){if(a&1){let e=y();n(0,"div",28)(1,"h5",29),r(2,"Confirm Deletion"),t(),n(3,"button",30),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",31)(5,"p"),r(6,"Are you sure you want to delete this contact? This action cannot be undone."),t()(),n(7,"div",32)(8,"button",33),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",34),u("click",function(){let l=h(e).$implicit,d=p(2);return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}function Qn(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td"),r(4),t(),n(5,"td"),r(6),t(),n(7,"td"),r(8),t(),n(9,"td"),r(10),t(),n(11,"td"),r(12),t(),n(13,"td"),r(14),t(),n(15,"td"),r(16),t(),n(17,"td"),r(18),t(),n(19,"td",18)(20,"div",23)(21,"button",24),u("click",function(){let l=h(e).$implicit,d=p();return b(d.viewResume(l.resume))}),c(22,"i",25),r(23," View "),t(),n(24,"button",26),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),c(25,"i",27),r(26," Delete "),t(),g(27,Gn,12,0,"ng-template",null,0,te),t()()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),_(e.name),s(2),_(e.email),s(2),_(e.linkedin),s(2),_(e.countryCode),s(2),_(e.number),s(2),_(e.category),s(2),_(e.experience),s(2),_(e.resume),s(3),m("disabled",!e.resume)}}var ft=class a{constructor(i,e,o,l){this.http=i;this.CarrierFormService=e;this.modalService=o;this.fileService=l;for(let d=1;d<=100;d++)this.collection.push(`item ${d}`)}collection=[];p=1;itemsPerPage=10;getData;selectedCarrierForm={name:"",email:"",countryCode:"",number:"",category:"",linkedin:"",experience:"",resume:""};isDeletingAll=!1;confirmDeleteModal;CarrierFormToDeleteId=null;isBrowser(){return typeof window<"u"&&typeof document<"u"}getFileExtension(i){let e=i.split(".");return e.length>1?e.pop().toLowerCase():null}getFileName(i){return i.replace(/\\/g,"/").split("/").pop()||"resume"}ngOnInit(){this.fetchAllCarrierForm()}fetchAllCarrierForm(){this.CarrierFormService.onCarrierFormGetAll().subscribe(i=>{this.getData=i,console.log(this.getData.length)})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}editCarrierForm(i,e){this.selectedCarrierForm=re({},i),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Save"&&this.updateCarrierForm(this.selectedCarrierForm._id,this.selectedCarrierForm)})}updateCarrierForm(i,e){this.CarrierFormService.onCarrierFormUpdate(i,e).subscribe(o=>{let l=this.getData.findIndex(d=>d._id===i);l!==-1&&(this.getData[l]=e)})}onDelete(i){this.CarrierFormToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Delete"&&this.CarrierFormToDeleteId&&this.CarrierFormService.onCarrierFormDelete(this.CarrierFormToDeleteId).subscribe(l=>{this.fetchAllCarrierForm()})})}confirmDelete(i){i.close("Delete")}confirmDeleteAll(){this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(e=>{e==="Confirm"&&this.confirmDeleteAllAction()})}confirmDeleteAllAction(){this.isDeletingAll=!0,setTimeout(()=>{this.CarrierFormService.onCarrierFormDeleteAll().subscribe(i=>{this.fetchAllCarrierForm(),this.isDeletingAll=!1})},1e4)}extractServerFilePath(i){let e=i.replace(/\\/g,"/"),o=e.indexOf("uploads/");return o>=0?e.substring(o+8):e}viewResume(i){if(!i){console.error("No resume path provided");return}console.log("Original resume path:",i);let e=this.fileService.view(i);console.log("Constructed URL:",e),this.isBrowser()&&window.open(e,"_blank")}downloadResume(i){let e=this.fileService.download(i);if(this.isBrowser()){let o=document.createElement("a");o.href=e,o.download=i.split("/").pop(),o.click()}}static \u0275fac=function(e){return new(e||a)(f(Qe),f(hi),f(ce),f(D))};static \u0275cmp=P({type:a,selectors:[["app-carrier-query"]],viewQuery:function(e,o){if(e&1&&Y(qn,5),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first)}},decls:52,vars:7,consts:[["confirmDeleteModal",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"card-title","mb-3"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3"],[1,"form-label","mb-0"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1"],["value","10"],["value","25"],["value","50"],["value","100"],["type","search","placeholder","Search",1,"form-control","form-control-sm","w-auto"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-muted"],[3,"pageChange"],[1,"d-flex","justify-content-center","gap-2","flex-nowrap"],["title","View Resume",1,"btn","btn-info","btn-sm",3,"click","disabled"],[1,"fas","fa-eye","me-1"],["title","Delete Entry",1,"btn","btn-warning","btn-sm",3,"click"],[1,"fas","fa-trash","me-1"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h4",5),r(5,"Carrier Query List"),t(),n(6,"div",6)(7,"div",7)(8,"div",8)(9,"label",9),r(10," Show "),n(11,"select",10)(12,"option",11),r(13,"10"),t(),n(14,"option",12),r(15,"25"),t(),n(16,"option",13),r(17,"50"),t(),n(18,"option",14),r(19,"100"),t()(),r(20," entries "),t(),c(21,"input",15),t(),n(22,"table",16)(23,"thead",17)(24,"tr")(25,"th"),r(26,"S.no"),t(),n(27,"th"),r(28,"Name"),t(),n(29,"th"),r(30,"Email"),t(),n(31,"th"),r(32,"LinkedIn Profile"),t(),n(33,"th"),r(34,"Country Code"),t(),n(35,"th"),r(36,"Phone"),t(),n(37,"th"),r(38,"Category"),t(),n(39,"th"),r(40,"Experience"),t(),n(41,"th"),r(42,"Resume/CV"),t(),n(43,"th",18),r(44,"Action"),t()()(),n(45,"tbody"),g(46,Qn,29,10,"tr",19),ee(47,"paginate"),t()(),n(48,"div",20)(49,"small",21),r(50,"Showing 1 to 10 of 10 entries"),t(),n(51,"pagination-controls",22),u("pageChange",function(d){return o.p=d}),t()()()()()()()()),e&2&&(s(46),m("ngForOf",ne(47,1,o.getData,de(4,$n,o.itemsPerPage,o.p))))},dependencies:[F,ue,B,R,pe],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none}.btn-info[_ngcontent-%COMP%]:hover{background-color:#138496;color:#fff}.btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none}.btn-success[_ngcontent-%COMP%]:hover{background-color:#218838;color:#fff}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333;color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}textarea[_ngcontent-%COMP%]{resize:vertical}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}"]})};var Wn=["confirmDeleteModal"],Hn=(a,i)=>({itemsPerPage:a,currentPage:i}),Jn=a=>["edit-career",a];function Zn(a,i){if(a&1){let e=y();n(0,"div",29)(1,"h5",30),r(2,"Confirm Deletion"),t(),n(3,"button",31),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",32)(5,"p"),r(6,"Are you sure you want to delete this job? This action cannot be undone."),t()(),n(7,"div",33)(8,"button",34),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",35),u("click",function(){let l=h(e).$implicit,d=p(2);return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}function Yn(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td"),r(4),t(),n(5,"td"),r(6),t(),n(7,"td"),r(8),t(),n(9,"td",25),r(10),t(),n(11,"td",25),r(12),t(),n(13,"td",25),r(14),t(),n(15,"td",25),r(16),t(),n(17,"td",25),r(18),t(),n(19,"td",25),r(20),t(),n(21,"td",25),r(22),t(),n(23,"td",25),r(24),t(),n(25,"td"),r(26),t(),n(27,"td"),r(28),t(),n(29,"td",20)(30,"a",26),r(31,"Edit"),t()(),n(32,"td",20)(33,"div",27)(34,"button",28),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),r(35," Delete "),t(),g(36,Zn,12,0,"ng-template",null,0,te),t()()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),_(e.jobTitle),s(2),_(e.jobRole),s(2),_(e.jobDuration),s(2),_(e.jobLocation),s(2),_(e.jobSkills),s(2),_(e.jobExperience),s(2),_(e.jobType),s(2),_(e.jobPreference),s(2),_(e.jobDescription),s(2),_(e.status),s(2),_(e.jobSalary),s(2),_(e.created_at),s(2),_(e.updated_at),s(2),m("routerLink",ye(15,Jn,e._id))}}var ht=class a{constructor(i,e,o){this.carriersService=i;this.fb=e;this.modalService=o;this.env=Z.url,this.myForm=this.fb.group({jobTitle:["",v.required],jobRole:["",v.required],jobDuration:["",v.required],jobLocation:["",v.required],jobSkills:["",v.required],jobExperience:["",v.required],jobType:["",v.required],jobPreference:["",v.required],jobDescription:["",v.required],jobSalary:["",v.required],status:["",v.required]});for(let l=1;l<=100;l++)this.collection.push(`item ${l}`)}p=1;itemsPerPage=10;env;selectedCarrier={};carriers=[];myForm;carrierToDeleteId=null;collection=[];isLoading=!1;confirmDeleteModal;ngOnInit(){this.fetchAllCarriers()}fetchAllCarriers(){this.isLoading=!0,this.carriersService.get("carriers",{}).subscribe({next:i=>{if(i&&typeof i=="object")if(Array.isArray(i.data))this.carriers=i.data;else if(Array.isArray(i))this.carriers=i;else{console.log("API response structure:",i);for(let e in i)if(Array.isArray(i[e])){console.log(`Found array in property: ${e}`),this.carriers=i[e];break}Array.isArray(this.carriers)||(console.error("Could not find array in API response"),this.carriers=[])}else this.carriers=[];console.log("Carriers data loaded:",this.carriers),this.isLoading=!1},error:i=>{console.error("Error fetching carriers:",i),this.carriers=[],this.isLoading=!1}})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}editCarriers(i,e){this.selectedCarrier=re({},i),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"})}onDelete(i){this.carrierToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Delete"&&this.carrierToDeleteId&&this.carriersService.delete("carriers",this.carrierToDeleteId).subscribe({next:l=>{console.log("Carrier deleted successfully:",l),this.fetchAllCarriers()},error:l=>{console.error("Error deleting carrier:",l)}})})}confirmDelete(i){i.close("Delete")}static \u0275fac=function(e){return new(e||a)(f(bi),f(M),f(ce))};static \u0275cmp=P({type:a,selectors:[["app-carriers"]],viewQuery:function(e,o){if(e&1&&Y(Wn,5),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first)}},decls:67,vars:7,consts:[["confirmDeleteModal",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],["routerLink","add-career",1,"btn","btn-primary","btn-sm"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3"],[1,"form-label","mb-0"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1"],["value","10"],["value","25"],["value","50"],["value","100"],["type","search","placeholder","Search",1,"form-control","form-control-sm","w-auto"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-muted"],[3,"pageChange"],[1,"text-truncate"],[1,"btn","btn-success","btn-sm",3,"routerLink"],[1,"d-flex","justify-content-center","gap-2","flex-nowrap"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),r(6,"Job List"),t(),n(7,"a",7),r(8,"Add Jobs"),t()(),n(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),r(13," Show "),n(14,"select",12)(15,"option",13),r(16,"10"),t(),n(17,"option",14),r(18,"25"),t(),n(19,"option",15),r(20,"50"),t(),n(21,"option",16),r(22,"100"),t()(),r(23," entries "),t(),c(24,"input",17),t(),n(25,"table",18)(26,"thead",19)(27,"tr")(28,"th"),r(29,"S.no."),t(),n(30,"th"),r(31,"Job Title"),t(),n(32,"th"),r(33,"Job Role"),t(),n(34,"th"),r(35,"Job Duration"),t(),n(36,"th"),r(37,"Location"),t(),n(38,"th"),r(39,"Skills"),t(),n(40,"th"),r(41,"Experience"),t(),n(42,"th"),r(43,"Type"),t(),n(44,"th"),r(45,"Preference"),t(),n(46,"th"),r(47,"Description"),t(),n(48,"th"),r(49,"Status"),t(),n(50,"th"),r(51,"Salary"),t(),n(52,"th"),r(53,"Created On"),t(),n(54,"th"),r(55,"Published On"),t(),n(56,"th",20),r(57,"Edit"),t(),n(58,"th",20),r(59,"Delete"),t()()(),n(60,"tbody"),g(61,Yn,38,17,"tr",21),ee(62,"paginate"),t()(),n(63,"div",22)(64,"small",23),r(65,"Showing 1 to 10 of 10 entries"),t(),n(66,"pagination-controls",24),u("pageChange",function(d){return o.p=d}),t()()()()()()()()),e&2&&(s(61),m("ngForOf",ne(62,1,o.carriers,de(4,Hn,o.itemsPerPage,o.p))))},dependencies:[F,T,ue,B,R,pe],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:250px}"]})};var Xn=["confirmDeleteModal"],Kn=(a,i)=>({itemsPerPage:a,currentPage:i}),eo=a=>["edit-courses",a];function to(a,i){if(a&1&&(n(0,"div"),r(1),t()),a&2){let e=p().$implicit;s(),_(e.cdate)}}function io(a,i){if(a&1&&(n(0,"div"),r(1),t()),a&2){let e=p().$implicit;s(),x(" ",e.ctime||e.chour+" "+(e.csession||"")," ")}}function no(a,i){a&1&&(n(0,"div"),r(1,"-"),t())}function oo(a,i){if(a&1&&c(0,"img",40),a&2){let e=p().$implicit,o=p();m("src",o.env+"/file/download/"+e.image,q)}}function ro(a,i){a&1&&(n(0,"span",24),r(1,"No image"),t())}function ao(a,i){if(a&1&&c(0,"img",41),a&2){let e=p().$implicit,o=p();m("src",o.env+"/file/download/"+e.image1,q)}}function lo(a,i){a&1&&(n(0,"span",24),r(1,"-"),t())}function so(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td")(4,"span",27),r(5),t()(),n(6,"td")(7,"span",28),r(8),t()(),n(9,"td")(10,"span",29),r(11),t()(),n(12,"td")(13,"span",30),r(14),t()(),n(15,"td")(16,"span"),r(17),t()(),n(18,"td")(19,"small"),g(20,to,2,1,"div",31)(21,io,2,1,"div",31)(22,no,2,0,"div",31),t()(),n(23,"td"),g(24,oo,1,1,"img",32)(25,ro,2,0,"span",33),t(),n(26,"td"),g(27,ao,1,1,"img",34)(28,lo,2,0,"span",33),t(),n(29,"td")(30,"small",24),r(31),t()(),n(32,"td")(33,"small",24),r(34),t()(),n(35,"td",21)(36,"div",35)(37,"a",36),c(38,"i",37),t(),n(39,"button",38),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),c(40,"i",39),t()()()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),m("title",e.title),s(),_(l.truncateText(e.title,30)),s(2),m("title",e.skill),s(),x(" ",l.truncateText(e.skill,20)," "),s(3),x("",e.duration," months"),s(3),x("\u20B9",e.price,""),s(2),Ht(l.getStatusBadgeClass(e.status)),s(),x(" ",e.status||"active"," "),s(3),m("ngIf",e.cdate),s(),m("ngIf",e.ctime||e.chour),s(),m("ngIf",!e.cdate&&!e.ctime&&!e.chour),s(2),m("ngIf",e.image),s(),m("ngIf",!e.image),s(2),m("ngIf",e.image1),s(),m("ngIf",!e.image1),s(3),_(l.formatDate(e.created_at)),s(3),_(l.formatDate(e.updated_at)),s(3),m("routerLink",ye(20,eo,e._id))}}function mo(a,i){a&1&&(n(0,"div",42),c(1,"i",43),n(2,"h5",24),r(3,"No Courses Found"),t(),n(4,"p",24),r(5,"Get started by adding your first course."),t(),n(6,"a",7),r(7,"Add Your First Course"),t()())}function co(a,i){if(a&1){let e=y();n(0,"div",44)(1,"h5",45),r(2,"Confirm Deletion"),t(),n(3,"button",46),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",47)(5,"p"),r(6,"Are you sure you want to delete this course? This action cannot be undone."),t()(),n(7,"div",48)(8,"button",49),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",50),u("click",function(){let l=h(e).$implicit,d=p();return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}var bt=class a{constructor(i,e,o,l){this._courseService=i;this.fb=e;this.modalService=o;this.fileServ=l;this.env=Z.url,this.initializeForm();for(let d=1;d<=100;d++)this.collection.push(`item ${d}`)}p=1;itemsPerPage=10;env;selectedCourse={};getData;myForm;courseToDeleteId=null;image=[];image1=[];collection=[];confirmDeleteModal;data;initializeForm(){this.myForm=this.fb.group({image:[null,v.required],image1:[null],title:["",v.required],skill:[""],price:[""],duration:[""],heading:[""],heading0:[""],heading1:[""],description:[""],description0:[""],description1:[""],tdescription:[""],pointer:[""],pointer0:[""],pointer1:[""],pointer2:[""],pointer3:[""],pointer4:[""],pointer5:[""],pointer6:[""],pointer7:[""],pointer8:[""],pointer9:[""],cdate:[""],ctime:[""],chour:[""],csession:[""],status:[""]})}ngOnInit(){this.fetchAllCourses()}fetchAllCourses(){this._courseService.get("courses",{}).subscribe(i=>{this.getData=i,console.log("Total courses:",this.getData.length)})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}getDisplayRange(){if(!this.getData||this.getData.length===0)return"Showing 0 to 0 of 0 entries";let i=(this.p-1)*this.itemsPerPage+1,e=Math.min(this.p*this.itemsPerPage,this.getData.length),o=this.getData.length;return`Showing ${i} to ${e} of ${o} entries`}editCourse(i,e){this.selectedCourse=re({},i),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}onDelete(i){this.courseToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Delete"&&this.courseToDeleteId&&this._courseService.delete("courses",this.courseToDeleteId).subscribe(l=>{console.log(l),this.fetchAllCourses()})})}confirmDelete(i){i.close("Delete")}onDeleteAll(){}handleFileInput(i){this.selectedCourse.image=i.target.files[0]}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.myForm.patchValue({image:e}),this.myForm.get("image")?.updateValueAndValidity())}onSelect1(i){let e=i.addedFiles[0];e&&(this.image1=[e],this.myForm.patchValue({image1:e}),this.myForm.get("image1")?.updateValueAndValidity())}onRemove(i){this.image.includes(i)&&(this.image=[],this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}onRemove1(i){this.image1.includes(i)&&(this.image1=[],this.myForm.patchValue({image1:null}),this.myForm.get("image1")?.updateValueAndValidity())}uploadImage(i){this.image.length>0?this.fileServ.uploadFile(this.image[0]).subscribe(e=>{if(e.type===S.Response){let l=e.body.file.path;this.selectedCourse.image=l,this.image1.length>0?this.uploadSecondImage(i):this.updateCourse(i)}},e=>{alert(`Error uploading image: ${e.message}`)}):this.updateCourse(i)}uploadSecondImage(i){this.image1.length>0?this.fileServ.uploadFile(this.image1[0]).subscribe(e=>{if(e.type===S.Response){let l=e.body.file.path;this.selectedCourse.image1=l}this.updateCourse(i)},e=>{alert(`Error uploading second image: ${e.message}`),this.updateCourse(i)}):this.updateCourse(i)}updateCourse(i){console.log("Updating course:",this.selectedCourse),this._courseService.put("courses",this.selectedCourse._id,this.selectedCourse).subscribe(e=>{this.fetchAllCourses(),i.close()})}formatDate(i){return i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}getStatusBadgeClass(i){switch(i){case"active":return"badge bg-success";case"inactive":return"badge bg-secondary";case"upcoming":return"badge bg-warning";default:return"badge bg-light text-dark"}}truncateText(i,e=50){return i?i.length>e?i.substring(0,e)+"...":i:"-"}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(ce),f(D))};static \u0275cmp=P({type:a,selectors:[["app-courses"]],viewQuery:function(e,o){if(e&1&&Y(Xn,5),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first)}},decls:63,vars:10,consts:[["confirmDeleteModal",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],["routerLink","add-courses",1,"btn","btn-primary","btn-sm"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","justify-content-between","align-items-center","mb-3","flex-wrap"],[1,"form-label","mb-0","me-3"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"ms-auto"],["type","search","placeholder","Search",1,"form-control","form-control-sm"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted"],["previousLabel","Previous","nextLabel","Next",1,"my-pagination",3,"pageChange"],["class","text-center py-5",4,"ngIf"],[3,"title"],[1,"text-truncate","d-inline-block","w-100",3,"title"],[1,"badge","bg-info"],[1,"fw-bold","text-success"],[4,"ngIf"],["alt","course","class","img-thumbnail","style","width: 60px; height: 60px; object-fit: cover;",3,"src",4,"ngIf"],["class","text-muted",4,"ngIf"],["alt","course additional","class","img-thumbnail","style","width: 60px; height: 60px; object-fit: cover;",3,"src",4,"ngIf"],["role","group",1,"btn-group","btn-group-sm"],["title","Edit Course",1,"btn","btn-success","btn-sm",3,"routerLink"],[1,"fas","fa-edit"],["title","Delete Course",1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],["alt","course",1,"img-thumbnail",2,"width","60px","height","60px","object-fit","cover",3,"src"],["alt","course additional",1,"img-thumbnail",2,"width","60px","height","60px","object-fit","cover",3,"src"],[1,"text-center","py-5"],[1,"fas","fa-graduation-cap","fa-3x","text-muted","mb-3"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){if(e&1){let l=y();n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),r(6,"Courses"),t(),n(7,"a",7),r(8,"Add Course"),t()(),n(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),r(13," Show "),n(14,"select",12),Oe("ngModelChange",function(C){return h(l),Me(o.itemsPerPage,C)||(o.itemsPerPage=C),b(C)}),n(15,"option",13),r(16,"10"),t(),n(17,"option",14),r(18,"25"),t(),n(19,"option",15),r(20,"50"),t(),n(21,"option",16),r(22,"100"),t()(),r(23," entries "),t(),n(24,"div",17),c(25,"input",18),t()(),n(26,"table",19)(27,"thead",20)(28,"tr")(29,"th"),r(30,"S.no."),t(),n(31,"th"),r(32,"Course Title"),t(),n(33,"th"),r(34,"Skill"),t(),n(35,"th"),r(36,"Duration"),t(),n(37,"th"),r(38,"Price"),t(),n(39,"th"),r(40,"Status"),t(),n(41,"th"),r(42,"Schedule"),t(),n(43,"th"),r(44,"Main Image"),t(),n(45,"th"),r(46,"Additional Image"),t(),n(47,"th"),r(48,"Created On"),t(),n(49,"th"),r(50,"Updated On"),t(),n(51,"th",21),r(52,"Actions"),t()()(),n(53,"tbody"),g(54,so,41,22,"tr",22),ee(55,"paginate"),t()(),n(56,"div",23)(57,"small",24),r(58),t(),n(59,"pagination-controls",25),u("pageChange",function(C){return h(l),b(o.p=C)}),t()(),g(60,mo,8,0,"div",26),t()()()()()(),g(61,co,12,0,"ng-template",null,0,te)}e&2&&(s(14),Fe("ngModel",o.itemsPerPage),s(40),m("ngForOf",ne(55,4,o.getData,de(7,Kn,o.itemsPerPage,o.p))),s(4),_(o.getDisplayRange()),s(2),m("ngIf",!o.getData||o.getData.length===0))},dependencies:[F,k,T,ue,B,R,Pe,V,We,pe],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}.img-thumbnail[_ngcontent-%COMP%]{object-fit:cover}.delete_blog[_ngcontent-%COMP%]{cursor:pointer}"]})};var po=()=>[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],uo=()=>["pointer","pointer0","pointer1","pointer2","pointer3","pointer4","pointer5","pointer6","pointer7","pointer8","pointer9"];function go(a,i){if(a&1&&(n(0,"option",69),r(1),t()),a&2){let e=i.$implicit;m("value",e),s(),_(e)}}function fo(a,i){a&1&&(n(0,"div",13)(1,"label",70),r(2,"Original Price (Before Discount) ( "),n(3,"span",15),r(4,"required *"),t(),r(5,")"),t(),c(6,"input",71),t())}function ho(a,i){a&1&&(n(0,"div",13)(1,"label",72),r(2,"Sale End Date & Time ( "),n(3,"span",15),r(4,"required *"),t(),r(5,")"),t(),c(6,"input",73),n(7,"small",74),r(8,"Set when the discount timer should end"),t()())}function bo(a,i){if(a&1&&(n(0,"option",69),r(1),t()),a&2){let e=i.$implicit;m("value",e),s(),_(e)}}function _o(a,i){if(a&1&&(n(0,"option",69),r(1),t()),a&2){let e=i.$implicit;m("value",e),s(),_(e)}}function vo(a,i){if(a&1&&(n(0,"div",13)(1,"label",75),r(2),t(),c(3,"input",76),t()),a&2){let e=i.$implicit,o=i.index;s(),Le("for",e),s(),x("Point ",o+1,""),s(),m("id",e)("formControlName",e)("placeholder","Key point "+(o+1))}}function xo(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",77),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function Co(a,i){if(a&1&&(n(0,"div",78)(1,"div",79),r(2),t(),n(3,"div",80),c(4,"div",81),t()()),a&2){let e=p();s(2),x("Main image upload: ",e.uploadProgress,"%"),s(2),K("width",e.uploadProgress,"%")}}function yo(a,i){a&1&&(n(0,"div",82),r(1," Main image uploaded "),t())}function So(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",77),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove1(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function Po(a,i){if(a&1&&(n(0,"div",78)(1,"div",79),r(2),t(),n(3,"div",80),c(4,"div",83),t()()),a&2){let e=p();s(2),x("Additional image upload: ",e.uploadProgress1,"%"),s(2),K("width",e.uploadProgress1,"%")}}function Eo(a,i){a&1&&(n(0,"div",82),r(1," Additional image uploaded "),t())}function wo(a,i){a&1&&c(0,"span",84)}function Io(a,i){a&1&&(n(0,"div",85)(1,"div",86),r(2,"Saving course \u2014 please wait"),t()())}var _t=class a{constructor(i,e,o,l,d){this.fb=i;this.fileServ=e;this._courseService=o;this.as=l;this.route=d;this.initializeForm()}myForm;isLoading=!1;image=[];image1=[];uploading=!1;uploading1=!1;uploadProgress=0;uploadProgress1=0;uploadedImagePath=null;uploadedImage1Path=null;uploadSub;uploadSub1;postSub;hours=["01","02","03","04","05","06","07","08","09","10","11","12"];sessions=["AM","PM"];ngOnInit(){}ngOnDestroy(){this.uploadSub&&this.uploadSub.unsubscribe(),this.uploadSub1&&this.uploadSub1.unsubscribe(),this.postSub&&this.postSub.unsubscribe()}initializeForm(){this.myForm=this.fb.group({image:[null,v.required],image1:[null],title:["",v.required],skill:[""],duration:[""],price:[""],heading:[""],heading0:[""],heading1:[""],description:[""],description0:[""],description1:[""],tdescription:[""],pointer:[""],pointer0:[""],pointer1:[""],pointer2:[""],pointer3:[""],pointer4:[""],pointer5:[""],pointer6:[""],pointer7:[""],pointer8:[""],pointer9:[""],cdate:[""],ctime:[""],chour:[""],csession:[""],status:[""],has_sale:[!1],original_price:[""],sale_end_date:[""]}),this.setupSaleValidators()}setupSaleValidators(){this.myForm.get("has_sale")?.valueChanges.subscribe(i=>{let e=this.myForm.get("original_price"),o=this.myForm.get("sale_end_date");i?(e?.setValidators([v.required,v.min(0)]),o?.setValidators([v.required,this.futureDateValidator()])):(e?.clearValidators(),o?.clearValidators()),e?.updateValueAndValidity(),o?.updateValueAndValidity()})}futureDateValidator(){return i=>i.value&&new Date(i.value)<=new Date?{pastDate:!0}:null}uploadImage(i){if(i.markAllAsTouched(),!i.valid){this.as?.warningToast?.("Please fill all required fields");return}if(this.uploadedImagePath){this.myForm.patchValue({image:this.uploadedImagePath}),this.uploadedImage1Path&&this.myForm.patchValue({image1:this.uploadedImage1Path}),this.onSubmit(i);return}this.image.length>0&&!this.uploading?this.uploadMainImage(i):this.as?.warningToast?.("Please select an image")}uploadMainImage(i){this.uploading=!0,this.uploadProgress=0;let e=this.image[0];this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.as?.errorToast?.(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d,this.myForm.patchValue({image:d}),this.myForm.get("image")?.updateValueAndValidity(),this.as?.successToast?.("Main image uploaded"),this.image1.length>0?this.uploadSecondImage(i):this.onSubmit(i)):this.as?.warningToast?.("Upload succeeded but server did not return image path.")}})}uploadSecondImage(i){this.uploading1=!0,this.uploadProgress1=0;let e=this.image1[0];this.uploadSub1=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading1=!1,this.uploadProgress1=0,this.as?.errorToast?.(`Second image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading1=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress1=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImage1Path=d,this.myForm.patchValue({image1:d}),this.myForm.get("image1")?.updateValueAndValidity(),this.as?.successToast?.("Second image uploaded")):this.as?.warningToast?.("Second image upload succeeded but server did not return image path."),this.onSubmit(i)}})}onSubmit(i){if(i.markAllAsTouched(),!i.valid){this.as?.warningToast?.("Please fill all required fields");return}this.isLoading||(this.isLoading=!0,this.postSub=this._courseService.post("courses",i.value).pipe(X(1e4),I(e=>w(e)),E(()=>{this.isLoading=!1})).subscribe(()=>{this.as?.successToast?.("Course added successfully"),alert("Course added successfully"),this.route.navigate(["/admin/courses"])},e=>{let o=e?.name==="TimeoutError"?"Server is taking too long to respond. Please try again later.":e?.message||"Error adding course";this.as?.errorToast?.(o)}))}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.uploading=!0,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity(),this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.as?.errorToast?.(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d,this.myForm.patchValue({image:d}),this.myForm.get("image")?.updateValueAndValidity(),this.as?.successToast?.("Main image uploaded")):this.as?.warningToast?.("Upload succeeded but response missing path")}}))}onSelect1(i){let e=i.addedFiles[0];e&&(this.image1=[e],this.uploading1=!0,this.uploadProgress1=0,this.uploadedImage1Path=null,this.myForm.patchValue({image1:null}),this.myForm.get("image1")?.updateValueAndValidity(),this.uploadSub1=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading1=!1,this.uploadProgress1=0,this.as?.errorToast?.(`Second image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading1=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress1=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImage1Path=d,this.myForm.patchValue({image1:d}),this.myForm.get("image1")?.updateValueAndValidity(),this.as?.successToast?.("Second image uploaded")):this.as?.warningToast?.("Second image upload succeeded but response missing path")}}))}onRemove(i){this.image.includes(i)&&(this.uploadSub&&(this.uploadSub.unsubscribe(),this.uploadSub=void 0),this.image=[],this.uploading=!1,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}onRemove1(i){this.image1.includes(i)&&(this.uploadSub1&&(this.uploadSub1.unsubscribe(),this.uploadSub1=void 0),this.image1=[],this.uploading1=!1,this.uploadProgress1=0,this.uploadedImage1Path=null,this.myForm.patchValue({image1:null}),this.myForm.get("image1")?.updateValueAndValidity())}static \u0275fac=function(e){return new(e||a)(f(M),f(D),f(O),f(me),f($))};static \u0275cmp=P({type:a,selectors:[["app-add-courses"]],decls:161,vars:21,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/courses",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","blog_form",3,"ngSubmit","formGroup"],[1,"col-12","mb-4"],[1,"border-bottom","pb-2"],[1,"form-group","col-lg-6"],["for","title"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Web Development/Web Designing/Graphic Designing",1,"form-control"],["for","skill"],["type","text","id","skill","formControlName","skill","placeholder","HTML/CSS/JavaScript/PHP/Laravel/WordPress",1,"form-control"],["for","price"],["type","number","id","price","formControlName","price","placeholder","49999",1,"form-control"],["for","duration"],["formControlName","duration","id","duration",1,"form-control"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["for","status"],["formControlName","status","id","status",1,"form-control"],["value","active"],["value","inactive"],["value","upcoming"],[1,"form-group","col-lg-6","mt-4"],["for","has_sale"],["type","checkbox","id","has_sale","formControlName","has_sale",1,"me-2"],["class","form-group col-lg-6",4,"ngIf"],[1,"col-12","mb-4","mt-4"],["for","cdate"],["type","date","id","cdate","formControlName","cdate",1,"form-control"],["for","ctime"],["type","time","id","ctime","formControlName","ctime",1,"form-control"],["for","chour"],["formControlName","chour","id","chour",1,"form-control"],["for","csession"],["formControlName","csession","id","csession",1,"form-control"],[1,"form-group","col-lg-12"],["for","tdescription"],["id","tdescription","formControlName","tdescription","rows","5","placeholder","Overall course description",1,"form-control"],["for","heading"],["id","heading","formControlName","heading","rows","5","placeholder","Why learn web development?",1,"form-control"],["for","description"],["id","description","formControlName","description","rows","5","placeholder","In this course you will learn about web development",1,"form-control"],["for","heading0"],["id","heading0","formControlName","heading0","rows","5","placeholder","Why learn web designing?",1,"form-control"],["for","description0"],["id","description0","formControlName","description0","rows","5","placeholder","In this course you will learn about web designing",1,"form-control"],["for","heading1"],["id","heading1","formControlName","heading1","rows","5","placeholder","Why learn graphic designing?",1,"form-control"],["for","description1"],["id","description1","formControlName","description1","rows","5","placeholder","In this course you will learn about graphic designing",1,"form-control"],["class","form-group col-lg-6",4,"ngFor","ngForOf"],["for","blog_image"],["ngx-dropzone","",1,"custom-dropzone",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],["for","blog_image1"],[1,"d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["class","text-center my-3 ms-3",4,"ngIf"],[3,"value"],["for","original_price"],["type","number","id","original_price","formControlName","original_price","placeholder","1499",1,"form-control"],["for","sale_end_date"],["type","datetime-local","id","sale_end_date","formControlName","sale_end_date",1,"form-control"],[1,"text-muted"],[3,"for"],["type","text",1,"form-control",3,"id","formControlName","placeholder"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","removable","file"],[1,"mt-2"],[1,"mb-1","small"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"text-center","my-3","ms-3"],[1,"small","text-muted"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Courses"),t()(),n(9,"h4",8),r(10,"Add Course"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.uploadImage(o.myForm)}),n(13,"div",3)(14,"div",11)(15,"h5",12),r(16,"Basic Information"),t()(),n(17,"div",13)(18,"label",14),r(19,"Course Title ( "),n(20,"span",15),r(21,"required *"),t(),r(22,")"),t(),c(23,"input",16),t(),n(24,"div",13)(25,"label",17),r(26,"Course Skill"),t(),c(27,"input",18),t(),n(28,"div",13)(29,"label",19),r(30,"Course Price"),t(),c(31,"input",20),t(),n(32,"div",13)(33,"label",21),r(34,"Course Duration (Months)"),t(),n(35,"select",22)(36,"option",23),r(37,"Select Duration"),t(),g(38,go,2,2,"option",24),t()(),n(39,"div",13)(40,"label",25),r(41,"Status"),t(),n(42,"select",26)(43,"option",23),r(44,"Select Status"),t(),n(45,"option",27),r(46,"Active"),t(),n(47,"option",28),r(48,"Inactive"),t(),n(49,"option",29),r(50,"Upcoming"),t()()(),n(51,"div",30)(52,"label",31),c(53,"input",32),r(54," Enable Sale/Discount "),t()(),g(55,fo,7,0,"div",33)(56,ho,9,0,"div",33),n(57,"div",34)(58,"h5",12),r(59,"Schedule Information"),t()(),n(60,"div",13)(61,"label",35),r(62,"Course Date"),t(),c(63,"input",36),t(),n(64,"div",13)(65,"label",37),r(66,"Course Time (24-hour format)"),t(),c(67,"input",38),t(),n(68,"div",13)(69,"label",39),r(70,"Course Hour (12-hour format)"),t(),n(71,"select",40)(72,"option",23),r(73,"Select Hour"),t(),g(74,bo,2,2,"option",24),t()(),n(75,"div",13)(76,"label",41),r(77,"AM/PM"),t(),n(78,"select",42)(79,"option",23),r(80,"Select"),t(),g(81,_o,2,2,"option",24),t()(),n(82,"div",34)(83,"h5",12),r(84,"Course Content"),t()(),n(85,"div",43)(86,"label",44),r(87,"Main Description"),t(),c(88,"textarea",45),n(89,"p",15),r(90,"Max Character Count : 1500 Character"),t()(),n(91,"div",43)(92,"label",46),r(93,"Course Heading 1"),t(),c(94,"textarea",47),n(95,"p",15),r(96,"Max Character Count : 1500 Character"),t()(),n(97,"div",43)(98,"label",48),r(99,"Course Description 1"),t(),c(100,"textarea",49),n(101,"p",15),r(102,"Max Character Count : 1500 Character"),t()(),n(103,"div",43)(104,"label",50),r(105,"Course Heading 2"),t(),c(106,"textarea",51),n(107,"p",15),r(108,"Max Character Count : 1500 Character"),t()(),n(109,"div",43)(110,"label",52),r(111,"Course Description 2"),t(),c(112,"textarea",53),n(113,"p",15),r(114,"Max Character Count : 1500 Character"),t()(),n(115,"div",43)(116,"label",54),r(117,"Course Heading 3"),t(),c(118,"textarea",55),n(119,"p",15),r(120,"Max Character Count : 1500 Character"),t()(),n(121,"div",43)(122,"label",56),r(123,"Course Description 3"),t(),c(124,"textarea",57),n(125,"p",15),r(126,"Max Character Count : 1500 Character"),t()(),n(127,"div",34)(128,"h5",12),r(129,"Key Points/Features"),t()(),g(130,vo,4,5,"div",58),n(131,"div",34)(132,"h5",12),r(133,"Course Images"),t()(),n(134,"div",13)(135,"label",59),r(136,"Main Course Image ( "),n(137,"span",15),r(138,"required *"),t(),r(139,")"),t(),n(140,"div",60),u("change",function(d){return o.onSelect(d)}),n(141,"ngx-dropzone-label"),r(142,"Drag and drop main image here, or click to select"),t(),g(143,xo,1,2,"ngx-dropzone-image-preview",61),t(),g(144,Co,5,3,"div",62)(145,yo,2,0,"div",63),t(),n(146,"div",13)(147,"label",64),r(148,"Additional Course Image (Optional)"),t(),n(149,"div",60),u("change",function(d){return o.onSelect1(d)}),n(150,"ngx-dropzone-label"),r(151,"Drag and drop additional image here, or click to select"),t(),g(152,So,1,2,"ngx-dropzone-image-preview",61),t(),g(153,Po,5,3,"div",62)(154,Eo,2,0,"div",63),t(),c(155,"hr"),n(156,"div",65)(157,"button",66),g(158,wo,1,0,"span",67),r(159),t(),g(160,Io,3,0,"div",68),t()()()()()()()),e&2){let l,d;s(12),m("formGroup",o.myForm),s(26),m("ngForOf",$e(19,po)),s(17),m("ngIf",(l=o.myForm.get("has_sale"))==null?null:l.value),s(),m("ngIf",(d=o.myForm.get("has_sale"))==null?null:d.value),s(18),m("ngForOf",o.hours),s(7),m("ngForOf",o.sessions),s(49),m("ngForOf",$e(20,uo)),s(10),m("accept","image/*"),s(3),m("ngForOf",o.image),s(),m("ngIf",o.uploading||o.uploadProgress>0),s(),m("ngIf",o.uploadedImagePath&&!o.uploading),s(4),m("accept","image/*"),s(3),m("ngForOf",o.image1),s(),m("ngIf",o.uploading1||o.uploadProgress1>0),s(),m("ngIf",o.uploadedImage1Path&&!o.uploading1),s(3),m("disabled",o.isLoading||o.uploading||o.uploading1||!o.myForm.valid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Submitting...":"Add Course"," "),s(),m("ngIf",o.isLoading&&!o.uploading&&!o.uploading1)}},dependencies:[F,k,T,be,he,_e,L,B,R,N,nt,it,Pe,V,z,G,Q],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #007bff;border-radius:6px;padding:30px;text-align:center;background-color:#f8f9fa;cursor:pointer;box-shadow:0 4px 8px #0003;transition:background-color .3s ease,box-shadow .3s ease}.dropzone[_ngcontent-%COMP%]:hover{background-color:#e2e6ea;box-shadow:0 8px 16px #0000004d}.dropzone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#007bff}.dropzone[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.preview-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center}.preview-image[_ngcontent-%COMP%]{max-width:25%;max-height:25%;border-radius:6px;box-shadow:0 2px 4px #0000001a}.btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};var Fo=()=>[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],Mo=()=>["pointer","pointer0","pointer1","pointer2","pointer3","pointer4","pointer5","pointer6","pointer7","pointer8","pointer9"];function Oo(a,i){if(a&1&&(n(0,"option",69),r(1),t()),a&2){let e=i.$implicit;m("value",e),s(),_(e)}}function To(a,i){a&1&&(n(0,"div",13)(1,"label",70),r(2,"Original Price (Before Discount) ( "),n(3,"span",15),r(4,"required *"),t(),r(5,")"),t(),c(6,"input",71),n(7,"small",72),r(8,"The original price before the discount"),t()())}function Do(a,i){a&1&&(n(0,"small"),r(1,"Sale end date is required"),t())}function Ao(a,i){a&1&&(n(0,"small"),r(1,"Sale end date must be in the future"),t())}function ko(a,i){if(a&1&&(n(0,"div",76),g(1,Do,2,0,"small",77)(2,Ao,2,0,"small",77),t()),a&2){let e,o,l=p(2);s(),m("ngIf",(e=l.myForm.get("sale_end_date"))==null?null:e.hasError("required")),s(),m("ngIf",(o=l.myForm.get("sale_end_date"))==null?null:o.hasError("pastDate"))}}function jo(a,i){if(a&1&&(n(0,"div",13)(1,"label",73),r(2,"Sale End Date & Time ( "),n(3,"span",15),r(4,"required *"),t(),r(5,")"),t(),c(6,"input",74),n(7,"small",72),r(8,"Set when the discount timer should end"),t(),g(9,ko,3,2,"div",75),t()),a&2){let e,o=p();s(9),m("ngIf",((e=o.myForm.get("sale_end_date"))==null?null:e.invalid)&&((e=o.myForm.get("sale_end_date"))==null?null:e.touched))}}function Vo(a,i){if(a&1&&(n(0,"span"),r(1),t()),a&2){let e,o=p(2);s(),x("Active - Ends ",o.formatDate((e=o.myForm.get("sale_end_date"))==null?null:e.value),"")}}function No(a,i){a&1&&(n(0,"span",15),r(1,"Expired"),t())}function zo(a,i){if(a&1&&(n(0,"div",4)(1,"div",78)(2,"strong"),r(3,"Sale Status:"),t(),g(4,Vo,2,1,"span",77)(5,No,2,0,"span",79),t()()),a&2){let e=p();s(4),m("ngIf",e.isSaleActive()),s(),m("ngIf",!e.isSaleActive())}}function Lo(a,i){if(a&1&&(n(0,"option",69),r(1),t()),a&2){let e=i.$implicit;m("value",e),s(),_(e)}}function Bo(a,i){if(a&1&&(n(0,"option",69),r(1),t()),a&2){let e=i.$implicit;m("value",e),s(),_(e)}}function Ro(a,i){if(a&1&&(n(0,"div",13)(1,"label",80),r(2),t(),c(3,"input",81),t()),a&2){let e=i.$implicit,o=i.index;s(),Le("for",e),s(),x("Point ",o+1,""),s(),m("id",e)("formControlName",e)("placeholder","Key point "+(o+1))}}function Uo(a,i){if(a&1&&(n(0,"div",13)(1,"label"),r(2,"Current Main Image"),t(),n(3,"div",82),c(4,"img",83),t()()),a&2){let e=p();s(4),m("src",e.selectedCourse.image.startsWith("http")||e.selectedCourse.image.startsWith("/")?e.selectedCourse.image:e.env+"/"+e.selectedCourse.image,q)}}function qo(a,i){if(a&1&&(n(0,"div",13)(1,"label"),r(2,"Current Additional Image"),t(),n(3,"div",82),c(4,"img",84),t()()),a&2){let e=p();s(4),m("src",e.selectedCourse.image1.startsWith("http")||e.selectedCourse.image1.startsWith("/")?e.selectedCourse.image1:e.env+"/"+e.selectedCourse.image1,q)}}function $o(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",85),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function Go(a,i){if(a&1&&(n(0,"div",86)(1,"div",87),r(2),t(),n(3,"div",88),c(4,"div",89),t()()),a&2){let e=p();s(2),x("Main image upload: ",e.uploadProgress,"%"),s(2),K("width",e.uploadProgress,"%")}}function Qo(a,i){a&1&&(n(0,"div",90),r(1," Main image uploaded "),t())}function Wo(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",85),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove1(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function Ho(a,i){if(a&1&&(n(0,"div",86)(1,"div",87),r(2),t(),n(3,"div",88),c(4,"div",91),t()()),a&2){let e=p();s(2),x("Additional image upload: ",e.uploadProgress1,"%"),s(2),K("width",e.uploadProgress1,"%")}}function Jo(a,i){a&1&&(n(0,"div",90),r(1," Additional image uploaded "),t())}function Zo(a,i){a&1&&c(0,"span",92)}var vt=class a{constructor(i,e,o,l,d){this._courseService=i;this.fb=e;this.fileServ=o;this.router=l;this.route=d;this.initializeForm()}env=Z.url;selectedCourse={};myForm;image=[];image1=[];uploading=!1;uploading1=!1;uploadProgress=0;uploadProgress1=0;uploadedImagePath=null;uploadedImage1Path=null;isLoading=!1;hours=["01","02","03","04","05","06","07","08","09","10","11","12"];sessions=["AM","PM"];uploadSub;uploadSub1;fetchSub;updateSub;initializeForm(){this.myForm=this.fb.group({image:[null],image1:[null],title:["",v.required],skill:[""],duration:[""],price:[""],heading:[""],heading0:[""],heading1:[""],description:[""],description0:[""],description1:[""],has_sale:[!1],original_price:[""],sale_end_date:[""],tdescription:[""],pointer:[""],pointer0:[""],pointer1:[""],pointer2:[""],pointer3:[""],pointer4:[""],pointer5:[""],pointer6:[""],pointer7:[""],pointer8:[""],pointer9:[""],cdate:[""],ctime:[""],chour:[""],csession:[""],status:[""]}),this.setupSaleValidators()}isBrowser(){return typeof window<"u"}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i?this.fetchCourseById(i):(console.error("course ID is undefined on initialization"),this.showError("Error: course ID is undefined on initialization"))}ngOnDestroy(){this.uploadSub?.unsubscribe(),this.uploadSub1?.unsubscribe(),this.fetchSub?.unsubscribe(),this.updateSub?.unsubscribe()}showSuccess(i){this.isBrowser()?window.alert?window.alert(i):console.log(i):console.log("[SSR SUCCESS]",i)}showWarning(i){this.isBrowser()?window.alert?window.alert(i):console.warn(i):console.warn("[SSR WARNING]",i)}showError(i){this.isBrowser()?window.alert?window.alert(i):console.error(i):console.error("[SSR ERROR]",i)}setupSaleValidators(){this.myForm.get("has_sale")?.valueChanges.subscribe(i=>{let e=this.myForm.get("original_price"),o=this.myForm.get("sale_end_date");i?(e?.setValidators([v.required,v.min(0)]),o?.setValidators([v.required,this.futureDateValidator()])):(e?.clearValidators(),o?.clearValidators()),e?.updateValueAndValidity(),o?.updateValueAndValidity()})}futureDateValidator(){return i=>i.value&&new Date(i.value)<=new Date?{pastDate:!0}:null}fetchCourseById(i){this.fetchSub=this._courseService.get(`courses/${i}`,{}).subscribe(e=>{e&&e.data&&e.data._id?(this.selectedCourse=e.data,this.selectedCourse.image&&!this.selectedCourse.image.startsWith("http")&&(this.selectedCourse.image=this.selectedCourse.image.replace(/\\/g,"/")),this.selectedCourse.image1&&!this.selectedCourse.image1.startsWith("http")&&(this.selectedCourse.image1=this.selectedCourse.image1.replace(/\\/g,"/")),this.populateForm(),this.uploadedImagePath=this.selectedCourse.image||null,this.uploadedImage1Path=this.selectedCourse.image1||null):(console.error("course data does not contain an _id:",e),this.showError("Error: course data is missing an ID."))},e=>{console.error(`Error fetching course with ID ${i}:`,e),this.showError(`Error fetching course: ${e?.message||e}`)})}populateForm(){let i="";this.selectedCourse.sale_end_date&&(i=new Date(this.selectedCourse.sale_end_date).toISOString().slice(0,16)),this.myForm.patchValue({title:this.selectedCourse.title,skill:this.selectedCourse.skill,duration:this.selectedCourse.duration,price:this.selectedCourse.price,has_sale:this.selectedCourse.has_sale||!1,original_price:this.selectedCourse.original_price||"",sale_end_date:i,heading:this.selectedCourse.heading,heading0:this.selectedCourse.heading0,heading1:this.selectedCourse.heading1,description:this.selectedCourse.description,description0:this.selectedCourse.description0,description1:this.selectedCourse.description1,tdescription:this.selectedCourse.tdescription,pointer:this.selectedCourse.pointer,pointer0:this.selectedCourse.pointer0,pointer1:this.selectedCourse.pointer1,pointer2:this.selectedCourse.pointer2,pointer3:this.selectedCourse.pointer3,pointer4:this.selectedCourse.pointer4,pointer5:this.selectedCourse.pointer5,pointer6:this.selectedCourse.pointer6,pointer7:this.selectedCourse.pointer7,pointer8:this.selectedCourse.pointer8,pointer9:this.selectedCourse.pointer9,cdate:this.selectedCourse.cdate,ctime:this.selectedCourse.ctime,chour:this.selectedCourse.chour,csession:this.selectedCourse.csession,status:this.selectedCourse.status,image:null,image1:null})}uploadImage(){if(this.myForm.markAllAsTouched(),!this.myForm.valid){this.showWarning("Please fill all required fields");return}if(this.selectedCourse.title=this.myForm.value.title,this.selectedCourse.skill=this.myForm.value.skill,this.selectedCourse.duration=this.myForm.value.duration,this.selectedCourse.price=this.myForm.value.price,this.selectedCourse.has_sale=this.myForm.value.has_sale,this.selectedCourse.original_price=this.myForm.value.original_price,this.myForm.value.sale_end_date?this.selectedCourse.sale_end_date=new Date(this.myForm.value.sale_end_date).toISOString():this.selectedCourse.sale_end_date=null,this.selectedCourse.heading=this.myForm.value.heading,this.selectedCourse.heading0=this.myForm.value.heading0,this.selectedCourse.heading1=this.myForm.value.heading1,this.selectedCourse.description=this.myForm.value.description,this.selectedCourse.description0=this.myForm.value.description0,this.selectedCourse.description1=this.myForm.value.description1,this.selectedCourse.tdescription=this.myForm.value.tdescription,this.selectedCourse.pointer=this.myForm.value.pointer,this.selectedCourse.pointer0=this.myForm.value.pointer0,this.selectedCourse.pointer1=this.myForm.value.pointer1,this.selectedCourse.pointer2=this.myForm.value.pointer2,this.selectedCourse.pointer3=this.myForm.value.pointer3,this.selectedCourse.pointer4=this.myForm.value.pointer4,this.selectedCourse.pointer5=this.myForm.value.pointer5,this.selectedCourse.pointer6=this.myForm.value.pointer6,this.selectedCourse.pointer7=this.myForm.value.pointer7,this.selectedCourse.pointer8=this.myForm.value.pointer8,this.selectedCourse.pointer9=this.myForm.value.pointer9,this.selectedCourse.cdate=this.myForm.value.cdate,this.selectedCourse.ctime=this.myForm.value.ctime,this.selectedCourse.chour=this.myForm.value.chour,this.selectedCourse.csession=this.myForm.value.csession,this.selectedCourse.status=this.myForm.value.status,this.image.length>0&&!this.uploadedImagePath){this.uploadMainImage();return}if(this.image1.length>0&&!this.uploadedImage1Path){this.uploadSecondImage();return}this.updateCourse()}uploadMainImage(){this.uploading=!0,this.uploadProgress=0;let i=this.image[0];this.uploadSub=this.fileServ.uploadFile(i).pipe(I(e=>(this.uploading=!1,this.uploadProgress=0,console.error("Error uploading main image:",e),this.showError(`Error uploading main image: ${e?.message||e}`),w(e))),E(()=>{this.uploading=!1})).subscribe(e=>{if(e.type===S.UploadProgress&&e.total)this.uploadProgress=Math.round(e.loaded/e.total*100);else if(e.type===S.Response){let o=e.body;if(o&&o.file&&o.file.path){let l=o.file.path.replace(/\\/g,"/");this.uploadedImagePath=l,this.selectedCourse.image=l,this.image1.length>0&&!this.uploadedImage1Path?this.uploadSecondImage():this.updateCourse()}else console.error("Main image upload response does not contain a valid path"),this.showError("Error: Main image upload failed.")}})}uploadSecondImage(){this.uploading1=!0,this.uploadProgress1=0;let i=this.image1[0];this.uploadSub1=this.fileServ.uploadFile(i).pipe(I(e=>(this.uploading1=!1,this.uploadProgress1=0,console.error("Error uploading second image:",e),this.showError(`Error uploading second image: ${e?.message||e}`),w(e))),E(()=>{this.uploading1=!1})).subscribe(e=>{if(e.type===S.UploadProgress&&e.total)this.uploadProgress1=Math.round(e.loaded/e.total*100);else if(e.type===S.Response){let o=e.body;if(o&&o.file&&o.file.path){let l=o.file.path.replace(/\\/g,"/");this.uploadedImage1Path=l,this.selectedCourse.image1=l}else console.error("Second image upload response does not contain a valid path"),this.showError("Error: Second image upload failed.");this.updateCourse()}})}updateCourse(){if(this.uploadedImagePath&&(this.selectedCourse.image=this.uploadedImagePath),this.uploadedImage1Path&&(this.selectedCourse.image1=this.uploadedImage1Path),!this.selectedCourse._id){console.error("Missing course id for update",this.selectedCourse),this.showError("Error: Missing course id.");return}this.isLoading||(this.isLoading=!0,this.updateSub=this._courseService.put("courses",this.selectedCourse._id,this.selectedCourse).pipe(X(1e4),I(i=>w(i)),E(()=>{this.isLoading=!1})).subscribe(i=>{this.showSuccess("Course updated successfully"),alert("Course updated successfully"),this.router.navigate(["/admin/courses"])},i=>{let e=i?.name==="TimeoutError"?"Server timed out. Please try again later.":i?.message||"Error updating course";console.error("Error updating Course:",i),this.showError(e)}))}isSaleActive(){let i=this.myForm.get("sale_end_date")?.value;return i?new Date(i)>new Date:!1}formatDate(i){return i?new Date(i).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.uploading=!0,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity(),this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.showError(`Main image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body;if(l&&l.file&&l.file.path){let d=l.file.path.replace(/\\/g,"/");this.uploadedImagePath=d,this.myForm.patchValue({image:d}),this.selectedCourse.image=d,this.myForm.get("image")?.updateValueAndValidity()}else console.error("Main image upload succeeded but response missing path"),this.showError("Main image upload succeeded but server did not return image path")}}))}onSelect1(i){let e=i.addedFiles[0];e&&(this.image1=[e],this.uploading1=!0,this.uploadProgress1=0,this.uploadedImage1Path=null,this.myForm.patchValue({image1:null}),this.myForm.get("image1")?.updateValueAndValidity(),this.uploadSub1=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading1=!1,this.uploadProgress1=0,this.showError(`Second image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading1=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress1=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body;if(l&&l.file&&l.file.path){let d=l.file.path.replace(/\\/g,"/");this.uploadedImage1Path=d,this.myForm.patchValue({image1:d}),this.selectedCourse.image1=d,this.myForm.get("image1")?.updateValueAndValidity()}else console.error("Second image upload succeeded but response missing path"),this.showError("Second image upload succeeded but server did not return image path")}}))}onRemove(i){this.image.includes(i)&&(this.uploadSub?.unsubscribe(),this.uploadSub=void 0,this.image=[],this.uploading=!1,this.uploadProgress=0,this.uploadedImagePath=this.selectedCourse?.image||null,this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity())}onRemove1(i){this.image1.includes(i)&&(this.uploadSub1?.unsubscribe(),this.uploadSub1=void 0,this.image1=[],this.uploading1=!1,this.uploadProgress1=0,this.uploadedImage1Path=this.selectedCourse?.image1||null,this.myForm.patchValue({image1:this.uploadedImage1Path}),this.myForm.get("image1")?.updateValueAndValidity())}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(D),f($),f(Se))};static \u0275cmp=P({type:a,selectors:[["app-edit-courses"]],decls:161,vars:23,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/courses",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","course_form",3,"ngSubmit","formGroup"],[1,"col-12","mb-4"],[1,"border-bottom","pb-2"],[1,"form-group","col-lg-6"],["for","title"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Web Development","required","",1,"form-control"],["for","skill"],["type","text","id","skill","formControlName","skill","placeholder","HTML/CSS/JavaScript",1,"form-control"],["for","price"],["type","number","id","price","formControlName","price","placeholder","49999",1,"form-control"],["for","duration"],["formControlName","duration","id","duration",1,"form-control"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["for","status"],["formControlName","status","id","status",1,"form-control"],["value","active"],["value","inactive"],["value","upcoming"],[1,"form-group","col-lg-6","mt-4"],["for","has_sale"],["type","checkbox","id","has_sale","formControlName","has_sale",1,"me-2"],["class","form-group col-lg-6",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12","mb-4","mt-4"],["for","cdate"],["type","date","id","cdate","formControlName","cdate",1,"form-control"],["for","ctime"],["type","time","id","ctime","formControlName","ctime",1,"form-control"],["for","chour"],["formControlName","chour","id","chour",1,"form-control"],["for","csession"],["formControlName","csession","id","csession",1,"form-control"],[1,"form-group","col-lg-12"],["for","tdescription"],["id","tdescription","formControlName","tdescription","rows","5","placeholder","Overall course description",1,"form-control"],["for","heading"],["id","heading","formControlName","heading","rows","5","placeholder","Why learn this course?",1,"form-control"],["for","description"],["id","description","formControlName","description","rows","5","placeholder","Detailed description",1,"form-control"],["for","heading0"],["id","heading0","formControlName","heading0","rows","5","placeholder","Additional heading",1,"form-control"],["for","description0"],["id","description0","formControlName","description0","rows","5","placeholder","Additional description",1,"form-control"],["for","heading1"],["id","heading1","formControlName","heading1","rows","5","placeholder","Additional heading",1,"form-control"],["for","description1"],["id","description1","formControlName","description1","rows","5","placeholder","Additional description",1,"form-control"],["class","form-group col-lg-6",4,"ngFor","ngForOf"],["for","image"],["ngx-dropzone","",1,"custom-dropzone",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],["for","image1"],[1,"d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[3,"value"],["for","original_price"],["type","number","id","original_price","formControlName","original_price","placeholder","1499",1,"form-control"],[1,"text-muted"],["for","sale_end_date"],["type","datetime-local","id","sale_end_date","formControlName","sale_end_date",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],[1,"text-danger","mt-1"],[4,"ngIf"],[1,"alert","alert-info"],["class","text-danger",4,"ngIf"],[3,"for"],["type","text",1,"form-control",3,"id","formControlName","placeholder"],[1,"preview-image"],["alt","Current Course Image",2,"width","200px","height","200px","object-fit","cover",3,"src"],["alt","Current Additional Course Image",2,"width","200px","height","200px","object-fit","cover",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","removable","file"],[1,"mt-2"],[1,"mb-1","small"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Courses"),t()(),n(9,"h4",8),r(10,"Edit Course"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.uploadImage()}),n(13,"div",3)(14,"div",11)(15,"h5",12),r(16,"Basic Information"),t()(),n(17,"div",13)(18,"label",14),r(19,"Course Title ( "),n(20,"span",15),r(21,"required *"),t(),r(22,")"),t(),c(23,"input",16),t(),n(24,"div",13)(25,"label",17),r(26,"Course Skill"),t(),c(27,"input",18),t(),n(28,"div",13)(29,"label",19),r(30,"Course Price"),t(),c(31,"input",20),t(),n(32,"div",13)(33,"label",21),r(34,"Course Duration (Months)"),t(),n(35,"select",22)(36,"option",23),r(37,"Select Duration"),t(),g(38,Oo,2,2,"option",24),t()(),n(39,"div",13)(40,"label",25),r(41,"Status"),t(),n(42,"select",26)(43,"option",23),r(44,"Select Status"),t(),n(45,"option",27),r(46,"Active"),t(),n(47,"option",28),r(48,"Inactive"),t(),n(49,"option",29),r(50,"Upcoming"),t()()(),n(51,"div",30)(52,"label",31),c(53,"input",32),r(54," Enable Sale/Discount "),t()(),c(55,"div",4),g(56,To,9,0,"div",33)(57,jo,10,1,"div",33)(58,zo,6,2,"div",34),n(59,"div",35)(60,"h5",12),r(61,"Schedule Information"),t()(),n(62,"div",13)(63,"label",36),r(64,"Course Date"),t(),c(65,"input",37),t(),n(66,"div",13)(67,"label",38),r(68,"Course Time (24-hour format)"),t(),c(69,"input",39),t(),n(70,"div",13)(71,"label",40),r(72,"Course Hour (12-hour format)"),t(),n(73,"select",41)(74,"option",23),r(75,"Select Hour"),t(),g(76,Lo,2,2,"option",24),t()(),n(77,"div",13)(78,"label",42),r(79,"AM/PM"),t(),n(80,"select",43)(81,"option",23),r(82,"Select"),t(),g(83,Bo,2,2,"option",24),t()(),n(84,"div",35)(85,"h5",12),r(86,"Course Content"),t()(),n(87,"div",44)(88,"label",45),r(89,"Total Description"),t(),c(90,"textarea",46),n(91,"p",15),r(92,"Max Character Count : 1500 Character"),t()(),n(93,"div",44)(94,"label",47),r(95,"Course Heading 1"),t(),c(96,"textarea",48),n(97,"p",15),r(98,"Max Character Count : 1500 Character"),t()(),n(99,"div",44)(100,"label",49),r(101,"Course Description 1"),t(),c(102,"textarea",50),n(103,"p",15),r(104,"Max Character Count : 1500 Character"),t()(),n(105,"div",44)(106,"label",51),r(107,"Course Heading 2"),t(),c(108,"textarea",52),n(109,"p",15),r(110,"Max Character Count : 1500 Character"),t()(),n(111,"div",44)(112,"label",53),r(113,"Course Description 2"),t(),c(114,"textarea",54),n(115,"p",15),r(116,"Max Character Count : 1500 Character"),t()(),n(117,"div",44)(118,"label",55),r(119,"Course Heading 3"),t(),c(120,"textarea",56),n(121,"p",15),r(122,"Max Character Count : 1500 Character"),t()(),n(123,"div",44)(124,"label",57),r(125,"Course Description 3"),t(),c(126,"textarea",58),n(127,"p",15),r(128,"Max Character Count : 1500 Character"),t()(),n(129,"div",35)(130,"h5",12),r(131,"Key Points/Features"),t()(),g(132,Ro,4,5,"div",59),n(133,"div",35)(134,"h5",12),r(135,"Course Images"),t()(),g(136,Uo,5,1,"div",33)(137,qo,5,1,"div",33),n(138,"div",13)(139,"label",60),r(140,"Main Course Image (Change if required)"),t(),n(141,"div",61),u("change",function(d){return o.onSelect(d)}),n(142,"ngx-dropzone-label"),r(143,"Drag and drop main image here, or click to select"),t(),g(144,$o,1,2,"ngx-dropzone-image-preview",62),t(),g(145,Go,5,3,"div",63)(146,Qo,2,0,"div",64),t(),n(147,"div",13)(148,"label",65),r(149,"Additional Course Image (Change if required)"),t(),n(150,"div",61),u("change",function(d){return o.onSelect1(d)}),n(151,"ngx-dropzone-label"),r(152,"Drag and drop additional image here, or click to select"),t(),g(153,Wo,1,2,"ngx-dropzone-image-preview",62),t(),g(154,Ho,5,3,"div",63)(155,Jo,2,0,"div",64),t(),c(156,"hr"),n(157,"div",66)(158,"button",67),g(159,Zo,1,0,"span",68),r(160),t()()()()()()()()),e&2){let l,d,C;s(12),m("formGroup",o.myForm),s(26),m("ngForOf",$e(21,Fo)),s(18),m("ngIf",(l=o.myForm.get("has_sale"))==null?null:l.value),s(),m("ngIf",(d=o.myForm.get("has_sale"))==null?null:d.value),s(),m("ngIf",((C=o.myForm.get("has_sale"))==null?null:C.value)&&o.selectedCourse.sale_end_date),s(18),m("ngForOf",o.hours),s(7),m("ngForOf",o.sessions),s(49),m("ngForOf",$e(22,Mo)),s(4),m("ngIf",o.selectedCourse.image),s(),m("ngIf",o.selectedCourse.image1),s(4),m("accept","image/*"),s(3),m("ngForOf",o.image),s(),m("ngIf",o.uploading||o.uploadProgress>0),s(),m("ngIf",o.uploadedImagePath&&!o.uploading),s(4),m("accept","image/*"),s(3),m("ngForOf",o.image1),s(),m("ngIf",o.uploading1||o.uploadProgress1>0),s(),m("ngIf",o.uploadedImage1Path&&!o.uploading1),s(3),m("disabled",o.isLoading||o.uploading||o.uploading1||!o.myForm.valid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Updating...":"Update Course"," ")}},dependencies:[F,k,T,be,he,_e,L,B,R,N,nt,it,Pe,V,z,Te,G,Q],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}.alert-info[_ngcontent-%COMP%]{background-color:#d1ecf1;border-color:#bee5eb;color:#0c5460;padding:12px;border-radius:6px;margin-bottom:20px}input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}small.text-muted[_ngcontent-%COMP%]{display:block;margin-top:5px;font-size:.85rem}.text-danger[_ngcontent-%COMP%]{font-size:.875rem}.text-danger[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:4px}"]})};function Yo(a,i){a&1&&c(0,"span",44)}function Xo(a,i){a&1&&(n(0,"div",45),r(1," Sending request \u2014 please wait "),t())}var xt=class a{constructor(i,e,o,l){this.carriersService=i;this.fb=e;this.as=o;this.route=l;this.myForm=this.fb.group({jobTitle:[""],jobRole:[""],jobDuration:[""],jobLocation:[""],jobSkills:[""],jobExperience:[""],jobType:[""],jobPreference:[""],jobDescription:[""],jobSalary:[""],status:[""]})}myForm;isLoading=!1;ngOnInit(){}showSuccess(i){try{this.as&&typeof this.as.successToast=="function"?this.as.successToast(i):alert(i)}catch{alert(i)}}showError(i){try{this.as&&typeof this.as.errorToast=="function"?this.as.errorToast(i):alert(i)}catch{alert(i)}}buildPayload(i){let e=["jobTitle","jobRole","jobDuration","jobLocation","jobSkills","jobExperience","jobType","jobPreference","jobDescription","jobSalary"],o={};for(let l of e){let d=i[l];if(d!=null&&!(typeof d=="string"&&d.trim()===""))if(["jobDuration","jobExperience","jobSalary"].includes(l)){let C=Number(d);o[l]=Number.isFinite(C)?C:d}else o[l]=d}return o}onSubmit(i){if(this.isLoading)return;let e=this.buildPayload(i.value);this.isLoading=!0,this.carriersService.post("carriers",e).pipe(X(1e4),E(()=>this.isLoading=!1)).subscribe(o=>{this.showSuccess("Carrier created successfully"),this.route.navigate(["/admin/careers"])},o=>{let l=o?.name==="TimeoutError"?"Server is taking too long to respond. Please try again later.":o?.message||"Error creating carrier";this.showError(l)})}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(me),f($))};static \u0275cmp=P({type:a,selectors:[["app-add-carrier"]],decls:129,vars:5,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/careers",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","blog_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","title"],[1,"text-danger"],["type","text","id","tijobTitletle","formControlName","jobTitle","placeholder","Web Developer/Designer/Tester",1,"form-control"],["type","text","id","jobRole","formControlName","jobRole","placeholder","frontend developer/backend developer",1,"form-control"],["type","text","id","jobDuration","formControlName","jobDuration","placeholder","5",1,"form-control"],["for","description"],["type","text","id","jobLocation","formControlName","jobLocation","placeholder","new delhi/bangalore/bhopal/mumbai",1,"form-control"],["type","text","id","jobSkills","formControlName","jobSkills","placeholder","html/css/js/php/laravel/react",1,"form-control"],["type","text","id","jobExperience","formControlName","jobExperience","placeholder","2",1,"form-control"],["type","text","formControlName","jobType","id","jobType",1,"form-control"],["value","","disabled","","selected","","hidden",""],["value","Freelance"],["value","Temporary"],["value","Internship"],["value","Full Time"],["value","Part Time"],["value","Contract"],["type","text","formControlName","jobPreference","id","jobPreference",1,"form-control"],["value","Work from Home"],["value","Work From Office"],["value","Hybrid"],["value","Remote"],["id","description","formControlName","jobDescription","rows","5","placeholder","This is job description",1,"form-control"],["for","status"],["type","text","formControlName","status","id","status",1,"form-control"],["value","Open"],["value","Close"],["type","text","id","jobSalary","formControlName","jobSalary","placeholder","50000",1,"form-control"],[1,"d-flex","justify-content-center","align-items-center","gap-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["class","text-muted small",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"text-muted","small"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Job List"),t()(),n(9,"h4",8),r(10,"Add Job"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.onSubmit(o.myForm)}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Job Title ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),n(21,"div",11)(22,"label",12),r(23,"JOb Role ( "),n(24,"span",13),r(25,"required *"),t(),r(26,")"),t(),c(27,"input",15),t(),n(28,"div",11)(29,"label",12),r(30,"JOb Duration ( "),n(31,"span",13),r(32,"required * type only number e.g: 60"),t(),r(33,")"),t(),c(34,"input",16),t(),n(35,"div",11)(36,"label",17),r(37,"JOb Location ( "),n(38,"span",13),r(39,"required *"),t(),r(40,")"),t(),c(41,"input",18),t(),n(42,"div",11)(43,"label",17),r(44,"JOb Skills ( "),n(45,"span",13),r(46,"required *"),t(),r(47,")"),t(),c(48,"input",19),t(),n(49,"div",11)(50,"label",17),r(51,"JOb Experience ( "),n(52,"span",13),r(53,"required * type only number e.g: 5"),t(),r(54,")"),t(),c(55,"input",20),t(),n(56,"div",11)(57,"label",17),r(58,"JOb Type( "),n(59,"span",13),r(60,"required *"),t(),r(61,")"),t(),n(62,"select",21)(63,"option",22),r(64,"Select"),t(),n(65,"option",23),r(66,"Freelance"),t(),n(67,"option",24),r(68,"Temporary"),t(),n(69,"option",25),r(70,"Internship"),t(),n(71,"option",26),r(72,"Full Time"),t(),n(73,"option",27),r(74,"Part Time"),t(),n(75,"option",28),r(76,"Contract"),t()()(),n(77,"div",11)(78,"label",17),r(79,"JOb Preference( "),n(80,"span",13),r(81,"required *"),t(),r(82,")"),t(),n(83,"select",29)(84,"option",22),r(85,"Select"),t(),n(86,"option",30),r(87,"Work from Home"),t(),n(88,"option",31),r(89,"Work From Office"),t(),n(90,"option",32),r(91,"Hybrid"),t(),n(92,"option",33),r(93,"Remote"),t()()(),n(94,"div",11)(95,"label",17),r(96,"JOb Description( "),n(97,"span",13),r(98,"required *"),t(),r(99,")"),t(),c(100,"textarea",34),n(101,"p",13),r(102,"Max Character Count : 1500 Character"),t()(),n(103,"div",11)(104,"label",35),r(105,"JOb Status( "),n(106,"span",13),r(107,"required *"),t(),r(108,")"),t(),n(109,"select",36)(110,"option",22),r(111,"Select"),t(),n(112,"option",37),r(113,"Open"),t(),n(114,"option",38),r(115,"Close"),t()()(),n(116,"div",11)(117,"label",17),r(118,"JOb Salary ( "),n(119,"span",13),r(120,"required * type only number e.g 15000"),t(),r(121,")"),t(),c(122,"input",39),t(),c(123,"hr"),n(124,"div",40)(125,"button",41),g(126,Yo,1,0,"span",42),r(127),t(),g(128,Xo,2,0,"div",43),t()()()()()()()),e&2&&(s(12),m("formGroup",o.myForm),s(113),m("disabled",o.isLoading),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Submitting...":"Add"," "),s(),m("ngIf",o.isLoading))},dependencies:[k,T,L,B,R,N,Pe,V,z,G,Q],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #007bff;border-radius:6px;padding:30px;text-align:center;background-color:#f8f9fa;cursor:pointer;box-shadow:0 4px 8px #0003;transition:background-color .3s ease,box-shadow .3s ease}.dropzone[_ngcontent-%COMP%]:hover{background-color:#e2e6ea;box-shadow:0 8px 16px #0000004d}.dropzone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#007bff}.dropzone[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.preview-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center}.preview-image[_ngcontent-%COMP%]{max-width:25%;max-height:25%;border-radius:6px;box-shadow:0 2px 4px #0000001a}.btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};function Ko(a,i){a&1&&c(0,"span",33)}var Ct=class a{constructor(i,e,o,l,d){this.carriersService=i;this.fb=e;this.router=o;this.route=l;this.as=d;this.myForm=this.fb.group({jobTitle:[""],jobRole:[""],jobDuration:[""],jobLocation:[""],jobSkills:[""],jobExperience:[""],jobType:[""],jobPreference:[""],jobDescription:[""],jobSalary:[""],status:[""]})}selectedCarriers={};myForm;image=[];isLoading=!1;updateSub;fetchSub;ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i?this.fetchCarriersById(i):(console.error("Carriers ID is undefined on initialization"),this.showError("Error: Carriers ID is undefined on initialization"))}ngOnDestroy(){this.updateSub?.unsubscribe(),this.fetchSub?.unsubscribe()}showSuccess(i){try{this.as&&typeof this.as.successToast=="function"?this.as.successToast(i):alert(i)}catch{alert(i)}}showWarning(i){try{this.as&&typeof this.as.warningToast=="function"?this.as.warningToast(i):alert(i)}catch{alert(i)}}showError(i){try{this.as&&typeof this.as.errorToast=="function"?this.as.errorToast(i):alert(i)}catch{alert(i)}}fetchCarriersById(i){this.fetchSub=this.carriersService.get(`carriers/${i}`,{}).subscribe(e=>{e&&e.data&&e.data._id?(this.selectedCarriers=e.data,this.populateForm()):(console.error("Carriers data does not contain an _id:",e),this.showError("Error: Carriers data is missing an ID."))},e=>{console.error(`Error fetching Carriers with ID ${i}:`,e),this.showError(`Error fetching carriers: ${e?.message||e}`)})}populateForm(){this.myForm.patchValue({jobTitle:this.selectedCarriers.jobTitle??"",jobRole:this.selectedCarriers.jobRole??"",jobDuration:this.selectedCarriers.jobDuration??"",jobLocation:this.selectedCarriers.jobLocation??"",jobSkills:this.selectedCarriers.jobSkills??"",jobExperience:this.selectedCarriers.jobExperience??"",jobType:this.selectedCarriers.jobType??"",jobPreference:this.selectedCarriers.jobPreference??"",jobDescription:this.selectedCarriers.jobDescription??"",jobSalary:this.selectedCarriers.jobSalary??"",status:this.selectedCarriers.status??""})}buildPayloadForUpdate(i){let e=["jobTitle","jobRole","jobDuration","jobLocation","jobSkills","jobExperience","jobType","jobPreference","jobDescription","jobSalary","status"],o={};for(let l of e){let d=i[l];if(d!=null&&!(typeof d=="string"&&d.trim()===""))if(["jobDuration","jobExperience","jobSalary"].includes(l)){let C=Number(d);o[l]=Number.isFinite(C)?C:d}else o[l]=d}return o}updateCarriers(){if(this.myForm.markAllAsTouched(),this.isLoading)return;let i=this.buildPayloadForUpdate(this.myForm.value);if(Object.keys(i).length===0){this.showWarning("No changes detected. Update requires at least one field changed.");return}if(i.updated_at=new Date,!this.selectedCarriers._id){console.error("Missing carrier id for update",this.selectedCarriers),this.showError("Error: Missing carrier id.");return}this.isLoading=!0,this.updateSub=this.carriersService.put("carriers",this.selectedCarriers._id,i).pipe(X(1e4),I(e=>w(e)),E(()=>{this.isLoading=!1})).subscribe(e=>{this.showSuccess("Career updated successfully"),alert("Career updated successfully"),this.router.navigate(["/admin/careers"])},e=>{let o=e?.name==="TimeoutError"?"Server is taking too long to respond. Please try again later.":e?.message||"Error updating career";console.error("Error updating Career:",e),this.showError(o)})}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f($),f(Se),f(me))};static \u0275cmp=P({type:a,selectors:[["app-edit-carrier"]],decls:104,vars:4,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/careers",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","course_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","title"],[1,"text-danger"],["type","text","id","tijobTitletle","formControlName","jobTitle",1,"form-control"],["type","text","id","jobRole","formControlName","jobRole",1,"form-control"],["type","text","id","jobDuration","formControlName","jobDuration",1,"form-control"],["for","description"],["type","text","id","jobLocation","formControlName","jobLocation",1,"form-control"],["type","text","id","jobSkills","formControlName","jobSkills",1,"form-control"],["type","text","id","jobExperience","formControlName","jobExperience",1,"form-control"],["type","text","id","jobType","formControlName","jobType",1,"form-control"],["type","text","id","jobPreference","formControlName","jobPreference",1,"form-control"],["id","description","formControlName","jobDescription","rows","5",1,"form-control"],["for","status"],["type","text","formControlName","status","id","status",1,"form-control"],["value","","disabled","","selected","","hidden",""],["value","Open"],["value","Close"],["type","text","id","jobSalary","formControlName","jobSalary",1,"form-control"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"JOb"),t()(),n(9,"h4",8),r(10,"Edit JOb"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.updateCarriers()}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Job Title ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),n(21,"div",11)(22,"label",12),r(23,"JOb Role ( "),n(24,"span",13),r(25,"required *"),t(),r(26,")"),t(),c(27,"input",15),t(),n(28,"div",11)(29,"label",12),r(30,"JOb Duration ( "),n(31,"span",13),r(32,"required *"),t(),r(33,")"),t(),c(34,"input",16),t(),n(35,"div",11)(36,"label",17),r(37,"JOb Location ( "),n(38,"span",13),r(39,"required *"),t(),r(40,")"),t(),c(41,"input",18),t(),n(42,"div",11)(43,"label",17),r(44,"JOb Skills ( "),n(45,"span",13),r(46,"required *"),t(),r(47,")"),t(),c(48,"input",19),t(),n(49,"div",11)(50,"label",17),r(51,"JOb Experience ( "),n(52,"span",13),r(53,"required *"),t(),r(54,")"),t(),c(55,"input",20),t(),n(56,"div",11)(57,"label",17),r(58,"JOb Type( "),n(59,"span",13),r(60,"required *"),t(),r(61,")"),t(),c(62,"input",21),t(),n(63,"div",11)(64,"label",17),r(65,"JOb Preference( "),n(66,"span",13),r(67,"required *"),t(),r(68,")"),t(),c(69,"input",22),t(),n(70,"div",11)(71,"label",17),r(72,"JOb Description( "),n(73,"span",13),r(74,"required *"),t(),r(75,")"),t(),c(76,"textarea",23),n(77,"p",13),r(78,"Max Character Count : 1500 Character"),t()(),n(79,"div",11)(80,"label",24),r(81,"JOb Status( "),n(82,"span",13),r(83,"required *"),t(),r(84,")"),t(),n(85,"select",25)(86,"option",26),r(87,"Select"),t(),n(88,"option",27),r(89,"Open"),t(),n(90,"option",28),r(91,"Close"),t()()(),n(92,"div",11)(93,"label",17),r(94,"JOb Salary ( "),n(95,"span",13),r(96,"required *"),t(),r(97,")"),t(),c(98,"input",29),t(),c(99,"hr"),n(100,"div",30)(101,"button",31),g(102,Ko,1,0,"span",32),r(103),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.myForm),s(89),m("disabled",o.isLoading),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Updating...":"Update"," "))},dependencies:[k,T,L,B,R,N,Pe,V,z,G,Q],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};var er=["confirmDeleteModal"],tr=(a,i)=>({itemsPerPage:a,currentPage:i}),ir=a=>["edit-testimonial",a];function nr(a,i){if(a&1){let e=y();n(0,"div",30)(1,"h5",31),r(2,"Confirm Deletion"),t(),n(3,"button",32),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",33)(5,"p"),r(6,"Are you sure you want to delete this blog? This action cannot be undone."),t()(),n(7,"div",34)(8,"button",35),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",36),u("click",function(){let l=h(e).$implicit,d=p(2);return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}function or(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td",25),r(4),t(),n(5,"td"),c(6,"img",26),t(),n(7,"td",25),r(8),t(),n(9,"td",25),r(10),t(),n(11,"td",25),r(12),t(),n(13,"td"),r(14),t(),n(15,"td"),r(16),t(),n(17,"td",20)(18,"a",27),r(19,"Edit"),t()(),n(20,"td",20)(21,"div",28)(22,"button",29),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),r(23,"Delete"),t(),g(24,nr,12,0,"ng-template",null,0,te),t()()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),_(e.name),s(2),m("src",l.env+"/file/download/"+e.image,q),s(2),x(" ",e.profession," "),s(2),x(" ",e.comment," "),s(2),x(" ",e.rating," "),s(2),_(e.created_at),s(2),_(e.updated_at),s(2),m("routerLink",ye(9,ir,e._id))}}var yt=class a{constructor(i,e,o,l){this.testimonialService=i;this.fb=e;this.modalService=o;this.fileServ=l;this.env=Z.url,this.myForm=this.fb.group({image:[null,v.required],name:[""],profession:[""],comment:[""],rating:[""]});for(let d=1;d<=100;d++)this.collection.push(`item ${d}`)}p=1;itemsPerPage=10;env;selectedTestimonial={};getData;myForm;testimonialToDeleteId=null;image=[];collection=[];confirmDeleteModal;data;ngOnInit(){this.fetchAllTestimonials()}fetchAllTestimonials(){this.testimonialService.get("testimonials",{}).subscribe(i=>{this.getData=i,console.log(this.getData.length)})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}editTestimonial(i,e){this.selectedTestimonial=re({},i),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"})}onDelete(i){this.testimonialToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Delete"&&this.testimonialToDeleteId&&this.testimonialService.delete("testimonials",this.testimonialToDeleteId).subscribe(l=>{console.log(l),this.fetchAllTestimonials()})})}confirmDelete(i){i.close("Delete")}onDeleteAll(){}handleFileInput(i){this.selectedTestimonial.image=i.target.files[0]}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.myForm.patchValue({image:e}),this.myForm.get("image")?.updateValueAndValidity())}onRemove(i){this.image.includes(i)&&(this.image=[],this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}uploadImage(i){this.image.length>0?this.fileServ.uploadFile(this.image[0]).subscribe(e=>{if(e.type===S.Response){let l=e.body.file.path;this.selectedTestimonial.image=l,console.log("testimonials",this.selectedTestimonial),this.testimonialService.put("testimonials",this.selectedTestimonial._id,this.selectedTestimonial).subscribe(d=>{this.fetchAllTestimonials(),i.close()})}},e=>{alert(`Error uploading image: ${e.message}`)}):alert("Please Select Image")}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(ce),f(D))};static \u0275cmp=P({type:a,selectors:[["app-testimonials"]],viewQuery:function(e,o){if(e&1&&Y(er,5),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first)}},decls:55,vars:7,consts:[["confirmDeleteModal",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],["routerLink","add-testimonial",1,"btn","btn-primary","btn-sm"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3"],[1,"form-label","mb-0"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1"],["value","10"],["value","25"],["value","50"],["value","100"],["type","search","placeholder","Search",1,"form-control","form-control-sm","w-auto"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-muted"],[3,"pageChange"],[1,"text-truncate"],["alt","Blog","width","85",1,"rounded-3",3,"src"],[1,"btn","btn-success","btn-sm",3,"routerLink"],[1,"d-flex","justify-content-center","gap-2","flex-nowrap"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),r(6,"Testimonials"),t(),n(7,"a",7),r(8,"Add Testimonial"),t()(),n(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),r(13," Show "),n(14,"select",12)(15,"option",13),r(16,"10"),t(),n(17,"option",14),r(18,"25"),t(),n(19,"option",15),r(20,"50"),t(),n(21,"option",16),r(22,"100"),t()(),r(23," entries "),t(),c(24,"input",17),t(),n(25,"table",18)(26,"thead",19)(27,"tr")(28,"th"),r(29,"S.no."),t(),n(30,"th"),r(31,"Testimonial Name"),t(),n(32,"th"),r(33,"Testimonial Image"),t(),n(34,"th"),r(35,"Profession"),t(),n(36,"th"),r(37,"Comment"),t(),n(38,"th"),r(39,"Ratings"),t(),n(40,"th"),r(41,"Created On"),t(),n(42,"th"),r(43,"Published On"),t(),n(44,"th",20),r(45,"Edit"),t(),n(46,"th",20),r(47,"Delete"),t()()(),n(48,"tbody"),g(49,or,26,11,"tr",21),ee(50,"paginate"),t()(),n(51,"div",22)(52,"small",23),r(53,"Showing 1 to 10 of 10 entries"),t(),n(54,"pagination-controls",24),u("pageChange",function(d){return o.p=d}),t()()()()()()()()),e&2&&(s(49),m("ngForOf",ne(50,1,o.getData,de(4,tr,o.itemsPerPage,o.p))))},dependencies:[F,T,ue,B,R,pe],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}"]})};function rr(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",36),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function ar(a,i){if(a&1&&(n(0,"div",37)(1,"div",38),r(2),t(),n(3,"div",39),c(4,"div",40),t()()),a&2){let e=p();s(2),x("Image upload: ",e.uploadProgress,"%"),s(2),K("width",e.uploadProgress,"%")}}function lr(a,i){a&1&&(n(0,"div",41),r(1," Image uploaded "),t())}function sr(a,i){a&1&&c(0,"span",42)}var St=class a{constructor(i,e,o,l,d){this.fb=i;this.fileServ=e;this.api=o;this.as=l;this.route=d;this.myForm=this.fb.group({image:[null,v.required],name:["",v.required],profession:["",v.required],comment:["",[v.required,v.maxLength(1500)]],rating:["",v.required]})}myForm;isLoading=!1;image=[];uploading=!1;uploadProgress=0;uploadedImagePath=null;uploadSub;postSub;ngOnInit(){}ngOnDestroy(){this.uploadSub?.unsubscribe(),this.postSub?.unsubscribe()}uploadImage(i){if(i.markAllAsTouched(),!i.valid){this.as?.warningToast?.("Please fill all required fields");return}if(this.uploadedImagePath){this.myForm.patchValue({image:this.uploadedImagePath}),this.onSubmit(i);return}if(this.image.length>0&&!this.uploading){this.uploading=!0,this.uploadProgress=0;let e=this.image[0];this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.as?.errorToast?.(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d.replace(/\\/g,"/"),this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity(),this.as?.successToast?.("Image uploaded"),this.onSubmit(i)):this.as?.warningToast?.("Upload succeeded but server did not return image path.")}})}else this.as?.warningToast?.("Please select an image")}onSubmit(i){if(!i.valid){this.as?.warningToast?.("Please fill all required fields");return}this.isLoading||(this.isLoading=!0,this.uploadedImagePath&&this.myForm.patchValue({image:this.uploadedImagePath}),this.postSub=this.api.post("testimonials",this.myForm.value).pipe(X(1e4),I(e=>w(e)),E(()=>{this.isLoading=!1})).subscribe(e=>{e?(this.as?.successToast?.("Testimonial created successfully!"),alert("Testimonial created successfully!"),this.route.navigate(["/admin/testimonials"])):this.as?.warningToast?.(e?.error?.message||"Error creating testimonial")},e=>{let o=e?.name==="TimeoutError"?"Server is taking too long to respond. Please try again later.":e?.message||"Error creating testimonial";this.as?.errorToast?.(o)}))}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.uploading=!0,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity(),this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.as?.errorToast?.(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d.replace(/\\/g,"/"),this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity(),this.as?.successToast?.("Image uploaded")):this.as?.warningToast?.("Upload succeeded but response missing path")}}))}onRemove(i){this.image.includes(i)&&(this.uploadSub?.unsubscribe(),this.uploadSub=void 0,this.image=[],this.uploading=!1,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}static \u0275fac=function(e){return new(e||a)(f(M),f(D),f(O),f(me),f($))};static \u0275cmp=P({type:a,selectors:[["app-add-testimonial"]],decls:74,vars:8,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/testimonials",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","blog_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","name"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","john doe",1,"form-control"],["for","profession"],["type","text","id","profession","formControlName","profession","placeholder","CEO/ SR Developer/ Businessman",1,"form-control"],["for","description"],["id","description","formControlName","comment","rows","3","placeholder","your course is good",1,"form-control"],["for","rating"],["type","text","formControlName","rating","id","rating",1,"form-control"],["value","","disabled","","selected","","hidden",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],[1,"form-group","col-lg-4"],["for","blog_image"],["ngx-dropzone","",1,"custom-dropzone",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","removable","file"],[1,"mt-2"],[1,"mb-1","small"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Testimonial"),t()(),n(9,"h4",8),r(10,"Add Testimonial"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.uploadImage(o.myForm)}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Testimonial Name ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),n(21,"div",11)(22,"label",15),r(23,"Testimonial Profession ( "),n(24,"span",13),r(25,"required *"),t(),r(26,")"),t(),c(27,"input",16),t(),n(28,"div",11)(29,"label",17),r(30,"Testimonial Comment ( "),n(31,"span",13),r(32,"required *"),t(),r(33,")"),t(),c(34,"textarea",18),n(35,"p",13),r(36,"Max Character Count : 1500 Character"),t()(),n(37,"div",11)(38,"label",19),r(39,"Testimonial Rating ( "),n(40,"span",13),r(41,"required * rate from 1 - 5"),t(),r(42,")"),t(),n(43,"select",20)(44,"option",21),r(45,"Select"),t(),n(46,"option",22),r(47,"1"),t(),n(48,"option",23),r(49,"2"),t(),n(50,"option",24),r(51,"3"),t(),n(52,"option",25),r(53,"4"),t(),n(54,"option",26),r(55,"5"),t()()(),n(56,"div",27)(57,"label",28),r(58,"Testimonial Image ( "),n(59,"span",13),r(60,"required *"),t(),r(61,")"),t(),n(62,"div",29),u("change",function(d){return o.onSelect(d)}),n(63,"ngx-dropzone-label"),r(64,"Drag and drop an image here, or click to select an image"),t(),g(65,rr,1,2,"ngx-dropzone-image-preview",30),t(),g(66,ar,5,3,"div",31)(67,lr,2,0,"div",32),c(68,"br"),t(),c(69,"hr"),n(70,"div",33)(71,"button",34),g(72,sr,1,0,"span",35),r(73),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.myForm),s(50),m("accept","image/*"),s(3),m("ngForOf",o.image),s(),m("ngIf",o.uploading||o.uploadProgress>0),s(),m("ngIf",o.uploadedImagePath&&!o.uploading),s(4),m("disabled",o.isLoading||o.uploading||!o.myForm.valid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Submitting...":"Add"," "))},dependencies:[F,k,T,be,he,_e,L,B,R,N,Pe,V,z,G,Q],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #007bff;border-radius:6px;padding:30px;text-align:center;background-color:#f8f9fa;cursor:pointer;box-shadow:0 4px 8px #0003;transition:background-color .3s ease,box-shadow .3s ease}.dropzone[_ngcontent-%COMP%]:hover{background-color:#e2e6ea;box-shadow:0 8px 16px #0000004d}.dropzone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#007bff}.dropzone[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.preview-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center}.preview-image[_ngcontent-%COMP%]{max-width:25%;max-height:25%;border-radius:6px;box-shadow:0 2px 4px #0000001a}.btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};function dr(a,i){if(a&1&&(n(0,"div",31),c(1,"img",32),t()),a&2){let e=p();s(),m("src",e.selectedTestimonial.image.startsWith("http")||e.selectedTestimonial.image.startsWith("/")?e.selectedTestimonial.image:e.env+"/"+e.selectedTestimonial.image,q)}}function mr(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",33),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function cr(a,i){if(a&1&&(n(0,"div",34)(1,"div",35),r(2),t(),n(3,"div",36),c(4,"div",37),t()()),a&2){let e=p();s(2),x("Image upload: ",e.uploadProgress,"%"),s(2),K("width",e.uploadProgress,"%")}}function pr(a,i){a&1&&(n(0,"div",38),r(1," Image uploaded "),t())}function ur(a,i){a&1&&c(0,"span",39)}var Pt=class a{constructor(i,e,o,l,d,C){this.testimonialService=i;this.fb=e;this.fileServ=o;this.alertService=l;this.router=d;this.route=C;this.myForm=this.fb.group({image:[null],name:["",v.required],profession:["",v.required],comment:["",[v.required,v.maxLength(600)]],rating:["",v.required]})}env=Z.url;selectedTestimonial={};myForm;image=[];uploading=!1;uploadProgress=0;uploadedImagePath=null;isLoading=!1;uploadSub;fetchSub;updateSub;ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i?this.fetchTestimonialById(i):(console.error("Testimonial ID is undefined on initialization"),this.showError("Error: Testimonial ID is undefined on initialization"))}ngOnDestroy(){this.uploadSub?.unsubscribe(),this.fetchSub?.unsubscribe(),this.updateSub?.unsubscribe()}showSuccess(i){try{this.alertService&&typeof this.alertService.successToast=="function"?this.alertService.successToast(i):alert(i)}catch{alert(i)}}showWarning(i){try{this.alertService&&typeof this.alertService.warningToast=="function"?this.alertService.warningToast(i):alert(i)}catch{alert(i)}}showError(i){try{this.alertService&&typeof this.alertService.errorToast=="function"?this.alertService.errorToast(i):alert(i)}catch{alert(i)}}fetchTestimonialById(i){this.fetchSub=this.testimonialService.get(`testimonials/${i}`,{}).subscribe(e=>{e&&e.data&&e.data._id?(this.selectedTestimonial=e.data,this.selectedTestimonial.image&&!this.selectedTestimonial.image.startsWith("http")&&(this.selectedTestimonial.image=this.selectedTestimonial.image.replace(/\\/g,"/")),this.populateForm(),this.uploadedImagePath=this.selectedTestimonial.image||null):(console.error("Testimonial data does not contain an _id:",e),this.showError("Error: Testimonial data is missing an ID."))},e=>{console.error(`Error fetching Testimonial with ID ${i}:`,e),this.showError(`Error fetching Testimonial: ${e?.message||e}`)})}populateForm(){this.myForm.patchValue({name:this.selectedTestimonial.name||"",profession:this.selectedTestimonial.profession||"",comment:this.selectedTestimonial.comment||"",rating:this.selectedTestimonial.rating||"",image:null})}uploadImage(){if(this.myForm.markAllAsTouched(),!this.myForm.valid){this.showWarning("Please fill all required fields");return}if(this.selectedTestimonial.name=this.myForm.value.name,this.selectedTestimonial.profession=this.myForm.value.profession,this.selectedTestimonial.comment=this.myForm.value.comment,this.selectedTestimonial.rating=this.myForm.value.rating,this.image.length>0&&!this.uploadedImagePath){this.uploading=!0,this.uploadProgress=0;let i=this.image[0];this.uploadSub=this.fileServ.uploadFile(i).pipe(I(e=>(this.uploading=!1,this.uploadProgress=0,this.showError(`Image upload failed: ${e?.message||e}`),w(e))),E(()=>{this.uploading=!1})).subscribe(e=>{if(e.type===S.UploadProgress&&e.total)this.uploadProgress=Math.round(e.loaded/e.total*100);else if(e.type===S.Response){let o=e.body,l=o?.file?.path||o?.path||null;if(l){let d=l.replace(/\\/g,"/");this.uploadedImagePath=d,this.selectedTestimonial.image=d,this.updateTestimonial()}else console.error("Image upload response does not contain a valid path"),this.showError("Error: Image upload failed.")}});return}this.updateTestimonial()}updateTestimonial(){if(this.uploadedImagePath&&(this.selectedTestimonial.image=this.uploadedImagePath),!this.selectedTestimonial._id){console.error("Missing testimonial id for update",this.selectedTestimonial),this.showError("Error: Missing testimonial id.");return}this.isLoading||(this.isLoading=!0,this.updateSub=this.testimonialService.put("testimonials",this.selectedTestimonial._id,this.selectedTestimonial).pipe(X(1e4),I(i=>w(i)),E(()=>{this.isLoading=!1})).subscribe(i=>{this.showSuccess("Testimonial updated successfully"),alert("Testimonial updated successfully"),this.router.navigate(["/admin/testimonials"])},i=>{let e=i?.name==="TimeoutError"?"Server is taking too long to respond. Please try again later.":i?.message||"Error updating testimonial";console.error("Error updating Testimonial:",i),this.showError(e)}))}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.uploading=!0,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity(),this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.showError(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d.replace(/\\/g,"/"),this.myForm.patchValue({image:this.uploadedImagePath}),this.selectedTestimonial.image=this.uploadedImagePath,this.myForm.get("image")?.updateValueAndValidity(),this.showSuccess("Image uploaded")):this.showWarning("Upload succeeded but server did not return image path")}}))}onRemove(i){this.image.includes(i)&&(this.uploadSub?.unsubscribe(),this.uploadSub=void 0,this.image=[],this.uploading=!1,this.uploadProgress=0,this.uploadedImagePath=this.selectedTestimonial?.image||null,this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity())}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(D),f(me),f($),f(Se))};static \u0275cmp=P({type:a,selectors:[["app-edit-testimonial"]],decls:63,vars:9,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/testimonials",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","blog_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","name"],[1,"text-danger"],["type","text","id","name","formControlName","name","required","",1,"form-control"],["for","profession"],["type","text","id","profession","formControlName","profession","required","",1,"form-control"],["for","rating"],["type","text","id","rating","formControlName","rating","required","",1,"form-control"],["for","comment"],["id","comment","formControlName","comment","rows","3","required","",1,"form-control"],["class","preview-image",4,"ngIf"],[1,"form-group","col-lg-4"],["for","image"],["ngx-dropzone","",1,"custom-dropzone",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"preview-image"],["alt","Current Blog Image",2,"width","200px","height","200px",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","removable","file"],[1,"mt-2"],[1,"mb-1","small"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Testimonial"),t()(),n(9,"h4",8),r(10,"Edit Testimonial"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.uploadImage()}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Testimonial Name ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),n(21,"div",11)(22,"label",15),r(23,"Testimonial Profession ( "),n(24,"span",13),r(25,"required *"),t(),r(26,")"),t(),c(27,"input",16),t(),n(28,"div",11)(29,"label",17),r(30,"Testimonial Rating ( "),n(31,"span",13),r(32,"required *"),t(),r(33,")"),t(),c(34,"input",18),t(),n(35,"div",11)(36,"label",19),r(37,"Testimonial Comment ( "),n(38,"span",13),r(39,"required *"),t(),r(40,")"),t(),c(41,"textarea",20),n(42,"p",13),r(43,"Max Character Count: 600 Characters"),t()(),g(44,dr,2,1,"div",21),n(45,"div",22)(46,"label",23),r(47,"Testimonial Cover Image ( "),n(48,"span",13),r(49,"Change Image If Required *"),t(),r(50,")"),t(),n(51,"div",24),u("change",function(d){return o.onSelect(d)}),n(52,"ngx-dropzone-label"),r(53,"Drag and drop an image here, or click to select an image"),t(),g(54,mr,1,2,"ngx-dropzone-image-preview",25),t(),g(55,cr,5,3,"div",26)(56,pr,2,0,"div",27),c(57,"br"),t(),c(58,"hr"),n(59,"div",28)(60,"button",29),g(61,ur,1,0,"span",30),r(62),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.myForm),s(32),m("ngIf",o.selectedTestimonial.image),s(7),m("accept","image/*"),s(3),m("ngForOf",o.image),s(),m("ngIf",o.uploading||o.uploadProgress>0),s(),m("ngIf",o.uploadedImagePath&&!o.uploading),s(4),m("disabled",o.isLoading||o.uploading||!o.myForm.valid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Updating...":"Update"," "))},dependencies:[F,k,T,be,he,_e,L,N,V,z,Te,G,Q],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};var gr=["confirmDeleteModal"],fr=(a,i)=>({itemsPerPage:a,currentPage:i}),hr=a=>["edit-team",a];function br(a,i){if(a&1){let e=y();n(0,"div",30)(1,"h5",31),r(2,"Confirm Deletion"),t(),n(3,"button",32),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",33)(5,"p"),r(6,"Are you sure you want to delete this Team member? This action cannot be undone."),t()(),n(7,"div",34)(8,"button",35),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",36),u("click",function(){let l=h(e).$implicit,d=p(2);return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}function _r(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td",25),r(4),t(),n(5,"td"),c(6,"img",26),t(),n(7,"td",25),r(8),t(),n(9,"td",25),r(10),t(),n(11,"td"),r(12),t(),n(13,"td"),r(14),t(),n(15,"td",20)(16,"a",27),r(17,"Edit"),t()(),n(18,"td",20)(19,"div",28)(20,"button",29),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),r(21,"Delete"),t(),g(22,br,12,0,"ng-template",null,0,te),t()()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),_(e.name),s(2),m("src",l.env+"/file/download/"+e.image,q),s(2),x(" ",e.designation," "),s(2),x(" ",e.detail," "),s(2),_(e.created_at),s(2),_(e.updated_at),s(2),m("routerLink",ye(8,hr,e._id))}}var Et=class a{constructor(i,e,o,l){this.teamService=i;this.fb=e;this.modalService=o;this.fileServ=l;this.env=Z.url,this.myForm=this.fb.group({image:[null],name:[""],designation:[""],detail:[""]});for(let d=1;d<=100;d++)this.collection.push(`item ${d}`)}p=1;itemsPerPage=10;env;selectedTeam={};getData;myForm;teamToDeleteId=null;image=[];collection=[];confirmDeleteModal;data;ngOnInit(){this.fetchAllTeams()}fetchAllTeams(){this.teamService.get("teams",{}).subscribe(i=>{this.getData=i,console.log(this.getData.length)})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}editTeam(i,e){this.selectedTeam=re({},i),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"})}onDelete(i){this.teamToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Delete"&&this.teamToDeleteId&&this.teamService.delete("teams",this.teamToDeleteId).subscribe(l=>{console.log(l),this.fetchAllTeams()})})}confirmDelete(i){i.close("Delete")}onDeleteAll(){}handleFileInput(i){this.selectedTeam.image=i.target.files[0]}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.myForm.patchValue({image:e}),this.myForm.get("image")?.updateValueAndValidity())}onRemove(i){this.image.includes(i)&&(this.image=[],this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}uploadImage(i){this.image.length>0?this.fileServ.uploadFile(this.image[0]).subscribe(e=>{if(e.type===S.Response){let l=e.body.file.path;this.selectedTeam.image=l,console.log("teams",this.selectedTeam),this.teamService.put("teams",this.selectedTeam._id,this.selectedTeam).subscribe(d=>{this.fetchAllTeams(),i.close()})}},e=>{alert(`Error uploading image: ${e.message}`)}):alert("Please Select Image")}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(ce),f(D))};static \u0275cmp=P({type:a,selectors:[["app-team"]],viewQuery:function(e,o){if(e&1&&Y(gr,5),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first)}},decls:53,vars:7,consts:[["confirmDeleteModal",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],["routerLink","add-team",1,"btn","btn-primary","btn-sm"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3"],[1,"form-label","mb-0"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1"],["value","10"],["value","25"],["value","50"],["value","100"],["type","search","placeholder","Search",1,"form-control","form-control-sm","w-auto"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-muted"],[3,"pageChange"],[1,"text-truncate"],["alt","Team","width","85",1,"rounded-3",3,"src"],[1,"btn","btn-success","btn-sm",3,"routerLink"],[1,"d-flex","justify-content-center","gap-2","flex-nowrap"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),r(6,"Teams"),t(),n(7,"a",7),r(8,"Add Team"),t()(),n(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),r(13," Show "),n(14,"select",12)(15,"option",13),r(16,"10"),t(),n(17,"option",14),r(18,"25"),t(),n(19,"option",15),r(20,"50"),t(),n(21,"option",16),r(22,"100"),t()(),r(23," entries "),t(),c(24,"input",17),t(),n(25,"table",18)(26,"thead",19)(27,"tr")(28,"th"),r(29,"S.no."),t(),n(30,"th"),r(31,"Team member Name"),t(),n(32,"th"),r(33,"Team member Image"),t(),n(34,"th"),r(35,"Designation"),t(),n(36,"th"),r(37,"detail"),t(),n(38,"th"),r(39,"Created On"),t(),n(40,"th"),r(41,"Published On"),t(),n(42,"th",20),r(43,"Edit"),t(),n(44,"th",20),r(45,"Delete"),t()()(),n(46,"tbody"),g(47,_r,24,10,"tr",21),ee(48,"paginate"),t()(),n(49,"div",22)(50,"small",23),r(51,"Showing 1 to 10 of 10 entries"),t(),n(52,"pagination-controls",24),u("pageChange",function(d){return o.p=d}),t()()()()()()()()),e&2&&(s(47),m("ngForOf",ne(48,1,o.getData,de(4,fr,o.itemsPerPage,o.p))))},dependencies:[F,T,ue,B,R,pe],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}"]})};function vr(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",28),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function xr(a,i){if(a&1&&(n(0,"div",29)(1,"div",30),r(2),t(),n(3,"div",31),c(4,"div",32),t()()),a&2){let e=p();s(2),x("Image upload: ",e.uploadProgress,"%"),s(2),K("width",e.uploadProgress,"%")}}function Cr(a,i){a&1&&(n(0,"div",33),r(1," Image uploaded "),t())}function yr(a,i){a&1&&c(0,"span",34)}var wt=class a{constructor(i,e,o,l,d){this.fb=i;this.fileServ=e;this.api=o;this.as=l;this.route=d;this.myForm=this.fb.group({image:[null,v.required],name:["",v.required],designation:["",v.required],detail:["",[v.required,v.maxLength(1500)]]})}myForm;isLoading=!1;image=[];uploading=!1;uploadProgress=0;uploadedImagePath=null;uploadSub;postSub;ngOnInit(){}ngOnDestroy(){this.uploadSub?.unsubscribe(),this.postSub?.unsubscribe()}uploadImage(i){if(i.markAllAsTouched(),!i.valid){this.as?.warningToast?.("Please fill all required fields");return}if(this.uploadedImagePath){this.myForm.patchValue({image:this.uploadedImagePath}),this.onSubmit(i);return}if(this.image.length>0&&!this.uploading){this.uploading=!0,this.uploadProgress=0;let e=this.image[0];this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.as?.errorToast?.(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d.replace(/\\/g,"/"),this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity(),this.as?.successToast?.("Image uploaded"),this.onSubmit(i)):this.as?.warningToast?.("Upload succeeded but server did not return image path.")}})}else this.as?.warningToast?.("Please select an image")}onSubmit(i){if(!i.valid){this.as?.warningToast?.("Please fill all required fields");return}this.isLoading||(this.isLoading=!0,this.uploadedImagePath&&this.myForm.patchValue({image:this.uploadedImagePath}),this.postSub=this.api.post("teams",this.myForm.value).pipe(X(1e4),I(e=>w(e)),E(()=>{this.isLoading=!1})).subscribe(e=>{e?(this.as?.successToast?.("Team Member Added successfully!"),alert("Team Member Added successfully!"),this.route.navigate(["/admin/teams"])):this.as?.warningToast?.(e?.error?.message||"Error creating team member")},e=>{let o=e?.name==="TimeoutError"?"Server is taking too long to respond. Please try again later.":e?.message||"Error creating team member";this.as?.errorToast?.(o)}))}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.uploading=!0,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity(),this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.as?.errorToast?.(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d.replace(/\\/g,"/"),this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity(),this.as?.successToast?.("Image uploaded")):this.as?.warningToast?.("Upload succeeded but response missing path")}}))}onRemove(i){this.image.includes(i)&&(this.uploadSub?.unsubscribe(),this.uploadSub=void 0,this.image=[],this.uploading=!1,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}static \u0275fac=function(e){return new(e||a)(f(M),f(D),f(O),f(me),f($))};static \u0275cmp=P({type:a,selectors:[["app-add-team"]],decls:55,vars:8,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/teams",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","blog_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","name"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","john doe",1,"form-control"],["for","designation"],["type","text","id","designation","formControlName","designation","placeholder","CEO/ SR Developer/ Businessman",1,"form-control"],["for","detail"],["id","detail","formControlName","detail","rows","3","placeholder","work for 5+ year",1,"form-control"],[1,"form-group","col-lg-4"],["for","blog_image"],["ngx-dropzone","",1,"custom-dropzone",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","removable","file"],[1,"mt-2"],[1,"mb-1","small"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Teams"),t()(),n(9,"h4",8),r(10,"Add Team Member"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.uploadImage(o.myForm)}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Team Member Name ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),n(21,"div",11)(22,"label",15),r(23,"Team Member Designation ( "),n(24,"span",13),r(25,"required *"),t(),r(26,")"),t(),c(27,"input",16),t(),n(28,"div",11)(29,"label",17),r(30,"Team Member Detail ( "),n(31,"span",13),r(32,"required *"),t(),r(33,")"),t(),c(34,"textarea",18),n(35,"p",13),r(36,"Max Character Count : 1500 Character"),t()(),n(37,"div",19)(38,"label",20),r(39,"Team Member Image ( "),n(40,"span",13),r(41,"required *"),t(),r(42,")"),t(),n(43,"div",21),u("change",function(d){return o.onSelect(d)}),n(44,"ngx-dropzone-label"),r(45,"Drag and drop an image here, or click to select an image"),t(),g(46,vr,1,2,"ngx-dropzone-image-preview",22),t(),g(47,xr,5,3,"div",23)(48,Cr,2,0,"div",24),c(49,"br"),t(),c(50,"hr"),n(51,"div",25)(52,"button",26),g(53,yr,1,0,"span",27),r(54),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.myForm),s(31),m("accept","image/*"),s(3),m("ngForOf",o.image),s(),m("ngIf",o.uploading||o.uploadProgress>0),s(),m("ngIf",o.uploadedImagePath&&!o.uploading),s(4),m("disabled",o.isLoading||o.uploading||!o.myForm.valid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Submitting...":"Add"," "))},dependencies:[F,k,T,be,he,_e,L,N,V,z,G,Q],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #007bff;border-radius:6px;padding:30px;text-align:center;background-color:#f8f9fa;cursor:pointer;box-shadow:0 4px 8px #0003;transition:background-color .3s ease,box-shadow .3s ease}.dropzone[_ngcontent-%COMP%]:hover{background-color:#e2e6ea;box-shadow:0 8px 16px #0000004d}.dropzone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#007bff}.dropzone[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.preview-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center}.preview-image[_ngcontent-%COMP%]{max-width:25%;max-height:25%;border-radius:6px;box-shadow:0 2px 4px #0000001a}.btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};function Sr(a,i){if(a&1&&(n(0,"div",29),c(1,"img",30),t()),a&2){let e=p();s(),m("src",e.selectedTeam.image.startsWith("http")||e.selectedTeam.image.startsWith("/")?e.selectedTeam.image:e.env+"/"+e.selectedTeam.image,q)}}function Pr(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",31),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function Er(a,i){if(a&1&&(n(0,"div",32)(1,"div",33),r(2),t(),n(3,"div",34),c(4,"div",35),t()()),a&2){let e=p();s(2),x("Image upload: ",e.uploadProgress,"%"),s(2),K("width",e.uploadProgress,"%")}}function wr(a,i){a&1&&(n(0,"div",36),r(1," Image uploaded "),t())}function Ir(a,i){a&1&&c(0,"span",37)}var It=class a{constructor(i,e,o,l,d,C){this.teamService=i;this.fb=e;this.fileServ=o;this.alertService=l;this.router=d;this.route=C;this.myForm=this.fb.group({image:[null],name:["",v.required],designation:["",v.required],detail:["",[v.required,v.maxLength(600)]]})}env=Z.url;selectedTeam={};myForm;image=[];uploading=!1;uploadProgress=0;uploadedImagePath=null;isLoading=!1;uploadSub;fetchSub;updateSub;ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i?this.fetchTeamById(i):(console.error("Team Member ID is undefined on initialization"),this.showError("Error: Team Member ID is undefined on initialization"))}ngOnDestroy(){this.uploadSub?.unsubscribe(),this.fetchSub?.unsubscribe(),this.updateSub?.unsubscribe()}showSuccess(i){try{this.alertService&&typeof this.alertService.successToast=="function"?this.alertService.successToast(i):alert(i)}catch{alert(i)}}showWarning(i){try{this.alertService&&typeof this.alertService.warningToast=="function"?this.alertService.warningToast(i):alert(i)}catch{alert(i)}}showError(i){try{this.alertService&&typeof this.alertService.errorToast=="function"?this.alertService.errorToast(i):alert(i)}catch{alert(i)}}fetchTeamById(i){this.fetchSub=this.teamService.get(`teams/${i}`,{}).subscribe(e=>{e&&e.data&&e.data._id?(this.selectedTeam=e.data,this.selectedTeam.image&&!this.selectedTeam.image.startsWith("http")&&(this.selectedTeam.image=this.selectedTeam.image.replace(/\\/g,"/")),this.populateForm(),this.uploadedImagePath=this.selectedTeam.image||null):(console.error("Team Member data does not contain an _id:",e),this.showError("Error: Team Member data is missing an ID."))},e=>{console.error(`Error fetching Team Member with ID ${i}:`,e),this.showError(`Error fetching Team Member: ${e?.message||e}`)})}populateForm(){this.myForm.patchValue({name:this.selectedTeam.name||"",designation:this.selectedTeam.designation||"",detail:this.selectedTeam.detail||"",image:null})}uploadImage(){if(this.myForm.markAllAsTouched(),!this.myForm.valid){this.showWarning("Please fill all required fields");return}if(this.selectedTeam.name=this.myForm.value.name,this.selectedTeam.designation=this.myForm.value.designation,this.selectedTeam.detail=this.myForm.value.detail,this.image.length>0&&!this.uploadedImagePath){this.uploading=!0,this.uploadProgress=0;let i=this.image[0];this.uploadSub=this.fileServ.uploadFile(i).pipe(I(e=>(this.uploading=!1,this.uploadProgress=0,this.showError(`Image upload failed: ${e?.message||e}`),w(e))),E(()=>{this.uploading=!1})).subscribe(e=>{if(e.type===S.UploadProgress&&e.total)this.uploadProgress=Math.round(e.loaded/e.total*100);else if(e.type===S.Response){let o=e.body,l=o?.file?.path||o?.path||null;l?(this.uploadedImagePath=l.replace(/\\/g,"/"),this.selectedTeam.image=this.uploadedImagePath,this.updateTeam()):(console.error("Image upload response does not contain a valid path"),this.showError("Error: Image upload failed."))}});return}this.updateTeam()}updateTeam(){if(this.uploadedImagePath&&(this.selectedTeam.image=this.uploadedImagePath),!this.selectedTeam._id){console.error("Missing team id for update",this.selectedTeam),this.showError("Error: Missing team id.");return}this.isLoading||(this.isLoading=!0,this.updateSub=this.teamService.put("teams",this.selectedTeam._id,this.selectedTeam).pipe(X(1e4),I(i=>w(i)),E(()=>{this.isLoading=!1})).subscribe(i=>{this.showSuccess("Team Member updated successfully"),alert("Team Member updated successfully"),this.router.navigate(["/admin/teams"])},i=>{let e=i?.name==="TimeoutError"?"Server is taking too long to respond. Please try again later.":i?.message||"Error updating Team Member";console.error("Error updating Team Member:",i),this.showError(e)}))}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.uploading=!0,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity(),this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.showError(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d.replace(/\\/g,"/"),this.myForm.patchValue({image:this.uploadedImagePath}),this.selectedTeam.image=this.uploadedImagePath,this.myForm.get("image")?.updateValueAndValidity(),this.showSuccess("Image uploaded")):this.showWarning("Upload succeeded but server did not return image path")}}))}onRemove(i){this.image.includes(i)&&(this.uploadSub?.unsubscribe(),this.uploadSub=void 0,this.image=[],this.uploading=!1,this.uploadProgress=0,this.uploadedImagePath=this.selectedTeam?.image||null,this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity())}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(D),f(me),f($),f(Se))};static \u0275cmp=P({type:a,selectors:[["app-edit-team"]],decls:56,vars:9,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/teams",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","blog_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","name"],[1,"text-danger"],["type","text","id","name","formControlName","name","required","",1,"form-control"],["for","designation"],["type","text","id","designation","formControlName","designation","required","",1,"form-control"],["for","detail"],["id","detail","formControlName","detail","rows","3","required","",1,"form-control"],["class","preview-image",4,"ngIf"],[1,"form-group","col-lg-4"],["for","image"],["ngx-dropzone","",1,"custom-dropzone",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"preview-image"],["alt","Current Blog Image",2,"width","200px","height","200px",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","removable","file"],[1,"mt-2"],[1,"mb-1","small"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Teams"),t()(),n(9,"h4",8),r(10,"Edit Team Member"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.uploadImage()}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Team Member Name ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),n(21,"div",11)(22,"label",15),r(23,"Team Member Designation ( "),n(24,"span",13),r(25,"required *"),t(),r(26,")"),t(),c(27,"input",16),t(),n(28,"div",11)(29,"label",17),r(30,"Team Member Comment ( "),n(31,"span",13),r(32,"required *"),t(),r(33,")"),t(),c(34,"textarea",18),n(35,"p",13),r(36,"Max Character Count: 600 Characters"),t()(),g(37,Sr,2,1,"div",19),n(38,"div",20)(39,"label",21),r(40,"Team Member Cover Image ( "),n(41,"span",13),r(42,"Change Image If Required *"),t(),r(43,")"),t(),n(44,"div",22),u("change",function(d){return o.onSelect(d)}),n(45,"ngx-dropzone-label"),r(46,"Drag and drop an image here, or click to select an image"),t(),g(47,Pr,1,2,"ngx-dropzone-image-preview",23),t(),g(48,Er,5,3,"div",24)(49,wr,2,0,"div",25),c(50,"br"),t(),c(51,"hr"),n(52,"div",26)(53,"button",27),g(54,Ir,1,0,"span",28),r(55),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.myForm),s(25),m("ngIf",o.selectedTeam.image),s(7),m("accept","image/*"),s(3),m("ngForOf",o.image),s(),m("ngIf",o.uploading||o.uploadProgress>0),s(),m("ngIf",o.uploadedImagePath&&!o.uploading),s(4),m("disabled",o.isLoading||o.uploading||!o.myForm.valid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Updating...":"Update"," "))},dependencies:[F,k,T,be,he,_e,L,N,V,z,Te,G,Q],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};var Fr=["confirmDeleteModal"],Mr=(a,i)=>({itemsPerPage:a,currentPage:i}),Or=a=>["edit-student",a];function Tr(a,i){if(a&1){let e=y();n(0,"div",30)(1,"h5",31),r(2,"Confirm Deletion"),t(),n(3,"button",32),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",33)(5,"p"),r(6,"Are you sure you want to delete this Student Data? This action cannot be undone."),t()(),n(7,"div",34)(8,"button",35),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",36),u("click",function(){let l=h(e).$implicit,d=p(2);return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}function Dr(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td",25),r(4),t(),n(5,"td"),c(6,"img",26),t(),n(7,"td",25),r(8),t(),n(9,"td",25),r(10),t(),n(11,"td"),r(12),t(),n(13,"td"),r(14),t(),n(15,"td",20)(16,"a",27),r(17,"Edit"),t()(),n(18,"td",20)(19,"div",28)(20,"button",29),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),r(21,"Delete"),t(),g(22,Tr,12,0,"ng-template",null,0,te),t()()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),_(e.name),s(2),m("src",l.env+"/file/download/"+e.image,q),s(2),x(" ",e.company," "),s(2),x(" ",e.college," "),s(2),_(e.created_at),s(2),_(e.updated_at),s(2),m("routerLink",ye(8,Or,e._id))}}var Ft=class a{constructor(i,e,o,l){this.studentService=i;this.fb=e;this.modalService=o;this.fileServ=l;this.env=Z.url,this.myForm=this.fb.group({image:[null],name:[""],company:[""],college:[""]});for(let d=1;d<=100;d++)this.collection.push(`item ${d}`)}p=1;itemsPerPage=10;env;selectedStudent={};getData;myForm;studentToDeleteId=null;image=[];collection=[];confirmDeleteModal;data;ngOnInit(){this.fetchAllStudents()}fetchAllStudents(){this.studentService.get("students",{}).subscribe(i=>{this.getData=i,console.log(this.getData.length)})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}editStudent(i,e){this.selectedStudent=re({},i),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"})}onDelete(i){this.studentToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Delete"&&this.studentToDeleteId&&this.studentService.delete("students",this.studentToDeleteId).subscribe(l=>{console.log(l),this.fetchAllStudents()})})}confirmDelete(i){i.close("Delete")}onDeleteAll(){}handleFileInput(i){this.selectedStudent.image=i.target.files[0]}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.myForm.patchValue({image:e}),this.myForm.get("image")?.updateValueAndValidity())}onRemove(i){this.image.includes(i)&&(this.image=[],this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}uploadImage(i){this.image.length>0?this.fileServ.uploadFile(this.image[0]).subscribe(e=>{if(e.type===S.Response){let l=e.body.file.path;this.selectedStudent.image=l,console.log("students",this.selectedStudent),this.studentService.put("students",this.selectedStudent._id,this.selectedStudent).subscribe(d=>{this.fetchAllStudents(),i.close()})}},e=>{alert(`Error uploading image: ${e.message}`)}):alert("Please Select Image")}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(ce),f(D))};static \u0275cmp=P({type:a,selectors:[["app-student"]],viewQuery:function(e,o){if(e&1&&Y(Fr,5),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first)}},decls:53,vars:7,consts:[["confirmDeleteModal",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],["routerLink","add-student",1,"btn","btn-primary","btn-sm"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3"],[1,"form-label","mb-0"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1"],["value","10"],["value","25"],["value","50"],["value","100"],["type","search","placeholder","Search",1,"form-control","form-control-sm","w-auto"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-muted"],[3,"pageChange"],[1,"text-truncate"],["alt","Student Image","width","85",1,"rounded-3",3,"src"],[1,"btn","btn-success","btn-sm",3,"routerLink"],[1,"d-flex","justify-content-center","gap-2","flex-nowrap"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h4",6),r(6,"Students"),t(),n(7,"a",7),r(8,"Add Students"),t()(),n(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),r(13," Show "),n(14,"select",12)(15,"option",13),r(16,"10"),t(),n(17,"option",14),r(18,"25"),t(),n(19,"option",15),r(20,"50"),t(),n(21,"option",16),r(22,"100"),t()(),r(23," entries "),t(),c(24,"input",17),t(),n(25,"table",18)(26,"thead",19)(27,"tr")(28,"th"),r(29,"S.no."),t(),n(30,"th"),r(31,"Student Name"),t(),n(32,"th"),r(33,"Student Image"),t(),n(34,"th"),r(35,"Company"),t(),n(36,"th"),r(37,"College"),t(),n(38,"th"),r(39,"Created On"),t(),n(40,"th"),r(41,"Published On"),t(),n(42,"th",20),r(43,"Edit"),t(),n(44,"th",20),r(45,"Delete"),t()()(),n(46,"tbody"),g(47,Dr,24,10,"tr",21),ee(48,"paginate"),t()(),n(49,"div",22)(50,"small",23),r(51,"Showing 1 to 10 of 10 entries"),t(),n(52,"pagination-controls",24),u("pageChange",function(d){return o.p=d}),t()()()()()()()()),e&2&&(s(47),m("ngForOf",ne(48,1,o.getData,de(4,Mr,o.itemsPerPage,o.p))))},dependencies:[F,T,ue,B,R,pe],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}"]})};function Ar(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",28),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function kr(a,i){if(a&1&&(n(0,"div",29)(1,"div",30),r(2),t(),n(3,"div",31),c(4,"div",32),t()()),a&2){let e=p();s(2),x("Image upload: ",e.uploadProgress,"%"),s(2),K("width",e.uploadProgress,"%")}}function jr(a,i){a&1&&(n(0,"div",33),r(1," Image uploaded "),t())}function Vr(a,i){a&1&&c(0,"span",34)}var Mt=class a{constructor(i,e,o,l,d){this.fb=i;this.fileServ=e;this.api=o;this.as=l;this.route=d;this.myForm=this.fb.group({image:[null,v.required],name:["",v.required],company:["",v.required],college:["",[v.required,v.maxLength(1500)]]})}myForm;isLoading=!1;image=[];uploading=!1;uploadProgress=0;uploadedImagePath=null;uploadSub;postSub;ngOnInit(){}ngOnDestroy(){this.uploadSub?.unsubscribe(),this.postSub?.unsubscribe()}uploadImage(i){if(i.markAllAsTouched(),!i.valid){this.as?.warningToast?.("Please fill all required fields");return}if(this.uploadedImagePath){this.myForm.patchValue({image:this.uploadedImagePath}),this.onSubmit(i);return}if(this.image.length>0&&!this.uploading){this.uploading=!0,this.uploadProgress=0;let e=this.image[0];this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.as?.errorToast?.(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d.replace(/\\/g,"/"),this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity(),this.as?.successToast?.("Image uploaded"),this.onSubmit(i)):this.as?.warningToast?.("Upload succeeded but server did not return image path.")}})}else this.as?.warningToast?.("Please select an image")}onSubmit(i){if(!i.valid){this.as?.warningToast?.("Please fill all required fields");return}this.isLoading||(this.isLoading=!0,this.uploadedImagePath&&this.myForm.patchValue({image:this.uploadedImagePath}),this.postSub=this.api.post("students",this.myForm.value).pipe(X(1e4),I(e=>w(e)),E(()=>{this.isLoading=!1})).subscribe(e=>{e?(this.as?.successToast?.("Student Card Added successfully!"),alert("Students Card Added successfully!"),this.route.navigate(["/admin/students"])):this.as?.warningToast?.(e?.error?.message||"Error creating student card")},e=>{let o=e?.name==="TimeoutError"?"Server is taking too long to respond. Please try again later.":e?.message||"Error creating Student card";this.as?.errorToast?.(o)}))}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.uploading=!0,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity(),this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.as?.errorToast?.(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d.replace(/\\/g,"/"),this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity(),this.as?.successToast?.("Image uploaded")):this.as?.warningToast?.("Upload succeeded but response missing path")}}))}onRemove(i){this.image.includes(i)&&(this.uploadSub?.unsubscribe(),this.uploadSub=void 0,this.image=[],this.uploading=!1,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity())}static \u0275fac=function(e){return new(e||a)(f(M),f(D),f(O),f(me),f($))};static \u0275cmp=P({type:a,selectors:[["app-add-student"]],decls:55,vars:8,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/students",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","blog_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","name"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","john doe",1,"form-control"],["for","company"],["type","text","id","company","formControlName","company","placeholder","Amazon, Google, Microsoft, etc",1,"form-control"],["for","college"],["id","college","formControlName","college","rows","3","placeholder","Lnct, Cu, Lu",1,"form-control"],[1,"form-group","col-lg-4"],["for","blog_image"],["ngx-dropzone","",1,"custom-dropzone",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","removable","file"],[1,"mt-2"],[1,"mb-1","small"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Students"),t()(),n(9,"h4",8),r(10,"Add Student Card"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.uploadImage(o.myForm)}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Student Name ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),n(21,"div",11)(22,"label",15),r(23,"Student Company ( "),n(24,"span",13),r(25,"required *"),t(),r(26,")"),t(),c(27,"input",16),t(),n(28,"div",11)(29,"label",17),r(30,"Student College ( "),n(31,"span",13),r(32,"required *"),t(),r(33,")"),t(),c(34,"textarea",18),n(35,"p",13),r(36,"Max Character Count : 1500 Character"),t()(),n(37,"div",19)(38,"label",20),r(39,"Student Image ( "),n(40,"span",13),r(41,"required *"),t(),r(42,")"),t(),n(43,"div",21),u("change",function(d){return o.onSelect(d)}),n(44,"ngx-dropzone-label"),r(45,"Drag and drop an image here, or click to select an image"),t(),g(46,Ar,1,2,"ngx-dropzone-image-preview",22),t(),g(47,kr,5,3,"div",23)(48,jr,2,0,"div",24),c(49,"br"),t(),c(50,"hr"),n(51,"div",25)(52,"button",26),g(53,Vr,1,0,"span",27),r(54),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.myForm),s(31),m("accept","image/*"),s(3),m("ngForOf",o.image),s(),m("ngIf",o.uploading||o.uploadProgress>0),s(),m("ngIf",o.uploadedImagePath&&!o.uploading),s(4),m("disabled",o.isLoading||o.uploading||!o.myForm.valid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Submitting...":"Add"," "))},dependencies:[F,k,T,be,he,_e,L,N,V,z,G,Q],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #007bff;border-radius:6px;padding:30px;text-align:center;background-color:#f8f9fa;cursor:pointer;box-shadow:0 4px 8px #0003;transition:background-color .3s ease,box-shadow .3s ease}.dropzone[_ngcontent-%COMP%]:hover{background-color:#e2e6ea;box-shadow:0 8px 16px #0000004d}.dropzone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#007bff}.dropzone[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.preview-container[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center}.preview-image[_ngcontent-%COMP%]{max-width:25%;max-height:25%;border-radius:6px;box-shadow:0 2px 4px #0000001a}.btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};function Nr(a,i){if(a&1&&(n(0,"div",29),c(1,"img",30),t()),a&2){let e=p();s(),m("src",e.selectedStudent.image.startsWith("http")||e.selectedStudent.image.startsWith("/")?e.selectedStudent.image:e.env+"/"+e.selectedStudent.image,q)}}function zr(a,i){if(a&1){let e=y();n(0,"ngx-dropzone-image-preview",31),u("removed",function(){let l=h(e).$implicit,d=p();return b(d.onRemove(l))}),t()}if(a&2){let e=i.$implicit;m("removable",!0)("file",e)}}function Lr(a,i){if(a&1&&(n(0,"div",32)(1,"div",33),r(2),t(),n(3,"div",34),c(4,"div",35),t()()),a&2){let e=p();s(2),x("Image upload: ",e.uploadProgress,"%"),s(2),K("width",e.uploadProgress,"%")}}function Br(a,i){a&1&&(n(0,"div",36),r(1," Image uploaded "),t())}function Rr(a,i){a&1&&c(0,"span",37)}var Ot=class a{constructor(i,e,o,l,d,C){this.studentService=i;this.fb=e;this.fileServ=o;this.alertService=l;this.router=d;this.route=C;this.myForm=this.fb.group({image:[null],name:["",v.required],company:["",v.required],college:["",[v.required,v.maxLength(600)]]})}env=Z.url;selectedStudent={};myForm;image=[];uploading=!1;uploadProgress=0;uploadedImagePath=null;isLoading=!1;uploadSub;fetchSub;updateSub;ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i?this.fetchStudentById(i):(console.error("Student Member ID is undefined on initialization"),this.showError("Error: Student Member ID is undefined on initialization"))}ngOnDestroy(){this.uploadSub?.unsubscribe(),this.fetchSub?.unsubscribe(),this.updateSub?.unsubscribe()}showSuccess(i){try{this.alertService&&typeof this.alertService.successToast=="function"?this.alertService.successToast(i):alert(i)}catch{alert(i)}}showWarning(i){try{this.alertService&&typeof this.alertService.warningToast=="function"?this.alertService.warningToast(i):alert(i)}catch{alert(i)}}showError(i){try{this.alertService&&typeof this.alertService.errorToast=="function"?this.alertService.errorToast(i):alert(i)}catch{alert(i)}}fetchStudentById(i){this.fetchSub=this.studentService.get(`students/${i}`,{}).subscribe(e=>{e&&e.data&&e.data._id?(this.selectedStudent=e.data,this.selectedStudent.image&&!this.selectedStudent.image.startsWith("http")&&(this.selectedStudent.image=this.selectedStudent.image.replace(/\\/g,"/")),this.populateForm(),this.uploadedImagePath=this.selectedStudent.image||null):(console.error("Student Member data does not contain an _id:",e),this.showError("Error: Student Member data is missing an ID."))},e=>{console.error(`Error fetching Student Member with ID ${i}:`,e),this.showError(`Error fetching Student Member: ${e?.message||e}`)})}populateForm(){this.myForm.patchValue({name:this.selectedStudent.name||"",company:this.selectedStudent.company||"",college:this.selectedStudent.college||"",image:null})}uploadImage(){if(this.myForm.markAllAsTouched(),!this.myForm.valid){this.showWarning("Please fill all required fields");return}if(this.selectedStudent.name=this.myForm.value.name,this.selectedStudent.company=this.myForm.value.company,this.selectedStudent.college=this.myForm.value.college,this.image.length>0&&!this.uploadedImagePath){this.uploading=!0,this.uploadProgress=0;let i=this.image[0];this.uploadSub=this.fileServ.uploadFile(i).pipe(I(e=>(this.uploading=!1,this.uploadProgress=0,this.showError(`Image upload failed: ${e?.message||e}`),w(e))),E(()=>{this.uploading=!1})).subscribe(e=>{if(e.type===S.UploadProgress&&e.total)this.uploadProgress=Math.round(e.loaded/e.total*100);else if(e.type===S.Response){let o=e.body,l=o?.file?.path||o?.path||null;l?(this.uploadedImagePath=l.replace(/\\/g,"/"),this.selectedStudent.image=this.uploadedImagePath,this.updateStudent()):(console.error("Image upload response does not contain a valid path"),this.showError("Error: Image upload failed."))}});return}this.updateStudent()}updateStudent(){if(this.uploadedImagePath&&(this.selectedStudent.image=this.uploadedImagePath),!this.selectedStudent._id){console.error("Missing Student id for update",this.selectedStudent),this.showError("Error: Missing Student id.");return}this.isLoading||(this.isLoading=!0,this.updateSub=this.studentService.put("students",this.selectedStudent._id,this.selectedStudent).pipe(X(1e4),I(i=>w(i)),E(()=>{this.isLoading=!1})).subscribe(i=>{this.showSuccess("Student Member updated successfully"),alert("Student Member updated successfully"),this.router.navigate(["/admin/students"])},i=>{let e=i?.name==="TimeoutError"?"Server is taking too long to respond. Please try again later.":i?.message||"Error updating Student Member";console.error("Error updating Student Member:",i),this.showError(e)}))}onSelect(i){let e=i.addedFiles[0];e&&(this.image=[e],this.uploading=!0,this.uploadProgress=0,this.uploadedImagePath=null,this.myForm.patchValue({image:null}),this.myForm.get("image")?.updateValueAndValidity(),this.uploadSub=this.fileServ.uploadFile(e).pipe(I(o=>(this.uploading=!1,this.uploadProgress=0,this.showError(`Image upload failed: ${o?.message||o}`),w(o))),E(()=>{this.uploading=!1})).subscribe(o=>{if(o.type===S.UploadProgress&&o.total)this.uploadProgress=Math.round(o.loaded/o.total*100);else if(o.type===S.Response){let l=o.body,d=l?.file?.path||l?.path||null;d?(this.uploadedImagePath=d.replace(/\\/g,"/"),this.myForm.patchValue({image:this.uploadedImagePath}),this.selectedStudent.image=this.uploadedImagePath,this.myForm.get("image")?.updateValueAndValidity(),this.showSuccess("Image uploaded")):this.showWarning("Upload succeeded but server did not return image path")}}))}onRemove(i){this.image.includes(i)&&(this.uploadSub?.unsubscribe(),this.uploadSub=void 0,this.image=[],this.uploading=!1,this.uploadProgress=0,this.uploadedImagePath=this.selectedStudent?.image||null,this.myForm.patchValue({image:this.uploadedImagePath}),this.myForm.get("image")?.updateValueAndValidity())}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(D),f(me),f($),f(Se))};static \u0275cmp=P({type:a,selectors:[["app-edit-student"]],decls:56,vars:9,consts:[[1,"content-page"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box"],[1,"page-title-right"],["routerLink","/admin/students",1,"btn","btn-primary","btn-sm"],[1,"page-title"],[1,"container"],["id","blog_form",3,"ngSubmit","formGroup"],[1,"form-group","col-lg-12"],["for","name"],[1,"text-danger"],["type","text","id","name","formControlName","name","required","",1,"form-control"],["for","company"],["type","text","id","company","formControlName","company","required","",1,"form-control"],["for","college"],["id","college","formControlName","college","rows","3","required","",1,"form-control"],["class","preview-image",4,"ngIf"],[1,"form-group","col-lg-4"],["for","image"],["ngx-dropzone","",1,"custom-dropzone",3,"change","accept"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],["class","small text-success mt-1",4,"ngIf"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"preview-image"],["alt","Current Blog Image",2,"width","200px","height","200px",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removed","removable","file"],[1,"mt-2"],[1,"mb-1","small"],[1,"progress",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"],[1,"small","text-success","mt-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),r(8,"Students"),t()(),n(9,"h4",8),r(10,"Edit Student Member"),t()()()(),n(11,"div",9)(12,"form",10),u("ngSubmit",function(){return o.uploadImage()}),n(13,"div",3)(14,"div",11)(15,"label",12),r(16,"Student Member Name ( "),n(17,"span",13),r(18,"required *"),t(),r(19,")"),t(),c(20,"input",14),t(),n(21,"div",11)(22,"label",15),r(23,"Student Member Company ( "),n(24,"span",13),r(25,"required *"),t(),r(26,")"),t(),c(27,"input",16),t(),n(28,"div",11)(29,"label",17),r(30,"Student Member Comment ( "),n(31,"span",13),r(32,"required *"),t(),r(33,")"),t(),c(34,"textarea",18),n(35,"p",13),r(36,"Max Character Count: 600 Characters"),t()(),g(37,Nr,2,1,"div",19),n(38,"div",20)(39,"label",21),r(40,"Student Member Cover Image ( "),n(41,"span",13),r(42,"Change Image If Required *"),t(),r(43,")"),t(),n(44,"div",22),u("change",function(d){return o.onSelect(d)}),n(45,"ngx-dropzone-label"),r(46,"Drag and drop an image here, or click to select an image"),t(),g(47,zr,1,2,"ngx-dropzone-image-preview",23),t(),g(48,Lr,5,3,"div",24)(49,Br,2,0,"div",25),c(50,"br"),t(),c(51,"hr"),n(52,"div",26)(53,"button",27),g(54,Rr,1,0,"span",28),r(55),t()()()()()()()()),e&2&&(s(12),m("formGroup",o.myForm),s(25),m("ngIf",o.selectedStudent.image),s(7),m("accept","image/*"),s(3),m("ngForOf",o.image),s(),m("ngIf",o.uploading||o.uploadProgress>0),s(),m("ngIf",o.uploadedImagePath&&!o.uploading),s(4),m("disabled",o.isLoading||o.uploading||!o.myForm.valid),s(),m("ngIf",o.isLoading),s(),x(" ",o.isLoading?"Updating...":"Update"," "))},dependencies:[F,k,T,be,he,_e,L,N,V,z,Te,G,Q],styles:[".btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;line-height:75px;color:#323a46}.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{float:right;margin-top:22px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{padding-top:5px}@media (max-width: 767.98px){.page-title-box[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;line-height:70px}.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.page-title-box[_ngcontent-%COMP%]   .page-title-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 419px){.page-title-box[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:none}}@media print{.footer[_ngcontent-%COMP%], .left-side-menu[_ngcontent-%COMP%], .navbar-custom[_ngcontent-%COMP%], .page-title-box[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%]{display:none}.card-body[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .content-page[_ngcontent-%COMP%], .right-bar[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{padding:0;margin:0}}"]})};var Ei=Mi(Oi(),1);var Ur=["confirmDeleteModal"],qr=["addCertificateModal"],$r=["editCertificateModal"],Gr=["viewCertificateModal"],Qr=(a,i)=>({itemsPerPage:a,currentPage:i});function Wr(a,i){if(a&1){let e=y();n(0,"tr")(1,"td"),r(2),t(),n(3,"td",28),r(4),t(),n(5,"td",28),r(6),t(),n(7,"td",28),r(8),t(),n(9,"td",28),r(10),t(),n(11,"td"),r(12),t(),n(13,"td",28),r(14),t(),n(15,"td",28),r(16),t(),n(17,"td",28),r(18),t(),n(19,"td")(20,"span",29),r(21),t()(),n(22,"td"),r(23),t(),n(24,"td",23)(25,"button",30),u("click",function(){let l=h(e).$implicit,d=p();return b(d.openViewModal(l))}),r(26,"View"),t()(),n(27,"td",23)(28,"button",31),u("click",function(){let l=h(e).$implicit,d=p();return b(d.openEditModal(l))}),r(29,"Edit"),t()(),n(30,"td",23)(31,"button",32),u("click",function(){let l=h(e).$implicit,d=p();return b(d.onDelete(l._id))}),r(32,"Delete"),t()()()}if(a&2){let e=i.$implicit,o=i.index,l=p();s(2),_(l.getSNo(o)),s(2),_(e.certification_id||"Auto Generated"),s(2),qe("",e["First Name"]," ",e["Last Name"],""),s(2),_(e.user_id||"Auto Generated"),s(2),_(e["Course Title"]),s(2),_(l.formatDisplayDate(e.certification_date)),s(2),_(e.server_id),s(2),_(e.lms_id),s(2),_(e.course_id),s(2),m("ngClass",e.status==="active"?"bg-success":e.status==="inactive"?"bg-danger":e.status==="pending"?"bg-warning":e.status==="expired"?"bg-secondary":e.status==="revoked"?"bg-danger":"bg-info"),s(),x(" ",e.status||"N/A"," "),s(2),_(l.formatDisplayDate(e.created_at))}}function Hr(a,i){if(a&1&&(n(0,"option",63),r(1),t()),a&2){let e=i.$implicit;m("value",e.value),s(),x(" ",e.label," ")}}function Jr(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("server_id",e.addForm)," ")}}function Zr(a,i){if(a&1&&(n(0,"option",63),r(1),t()),a&2){let e=i.$implicit;m("value",e.value),s(),x(" ",e.label," ")}}function Yr(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("lms_id",e.addForm)," ")}}function Xr(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("First Name",e.addForm)," ")}}function Kr(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("Last Name",e.addForm)," ")}}function ea(a,i){if(a&1&&(n(0,"option",63),r(1),t()),a&2){let e=i.$implicit;m("value",e.title),s(),qe(" ",e.title," (",e.code,") ")}}function ta(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("Course Title",e.addForm)," ")}}function ia(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("certification_date",e.addForm)," ")}}function na(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("course_id",e.addForm)," ")}}function oa(a,i){if(a&1){let e=y();n(0,"div",33)(1,"h4",34),r(2,"Add New Certificate"),t(),n(3,"button",35),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",36)(5,"form",37),u("ngSubmit",function(){h(e);let l=p();return b(l.onAddSubmit())}),n(6,"div",4)(7,"div",38)(8,"label",39),r(9,"Server ID "),n(10,"span",40),r(11,"*"),t()(),n(12,"select",41)(13,"option",42),r(14,"Select hosting server for certificate"),t(),g(15,Hr,2,2,"option",43),t(),g(16,Jr,2,1,"div",44),t(),n(17,"div",38)(18,"label",39),r(19,"LMS ID "),n(20,"span",40),r(21,"*"),t()(),n(22,"select",45)(23,"option",42),r(24,"Select Learning Management System"),t(),g(25,Zr,2,2,"option",43),t(),g(26,Yr,2,1,"div",44),t()(),n(27,"div",4)(28,"div",38)(29,"label",39),r(30,"First Name "),n(31,"span",40),r(32,"*"),t()(),c(33,"input",46),g(34,Xr,2,1,"div",44),t(),n(35,"div",38)(36,"label",39),r(37,"Last Name "),n(38,"span",40),r(39,"*"),t()(),c(40,"input",47),g(41,Kr,2,1,"div",44),t()(),n(42,"div",4)(43,"div",48)(44,"label",39),r(45,"Course Title "),n(46,"span",40),r(47,"*"),t()(),n(48,"select",49)(49,"option",42),r(50,"Select course completed by student"),t(),g(51,ea,2,3,"option",43),t(),g(52,ta,2,1,"div",44),t()(),n(53,"div",4)(54,"div",38)(55,"label",39),r(56,"Certification Date "),n(57,"span",40),r(58,"*"),t()(),c(59,"input",50),n(60,"small",51),r(61,"Date when the course was completed"),t(),g(62,ia,2,1,"div",44),t(),n(63,"div",38)(64,"label",39),r(65,"Course ID "),n(66,"span",40),r(67,"*"),t()(),c(68,"input",52),n(69,"small",51),r(70,"Automatically set when you select a course"),t(),g(71,na,2,1,"div",44),t()(),n(72,"div",4)(73,"div",48)(74,"label",39),r(75,"Status "),n(76,"span",40),r(77,"*"),t()(),n(78,"select",53)(79,"option",54),r(80,"Active - Certificate is valid and current"),t(),n(81,"option",55),r(82,"Inactive - Certificate has been deactivated"),t(),n(83,"option",56),r(84,"Pending - Awaiting verification/approval"),t(),n(85,"option",57),r(86,"Expired - Certificate validity has ended"),t(),n(87,"option",58),r(88,"Revoked - Certificate has been invalidated"),t(),n(89,"option",59),r(90,"Suspended - Temporarily suspended certificate"),t()()()(),n(91,"div",60)(92,"button",61),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(93,"Cancel"),t(),n(94,"button",62),r(95,"Create Certificate"),t()()()()}if(a&2){let e=p();s(5),m("formGroup",e.addForm),s(7),se("is-invalid",e.isFieldInvalid("server_id",e.addForm)),s(3),m("ngForOf",e.serverOptions),s(),m("ngIf",e.isFieldInvalid("server_id",e.addForm)),s(6),se("is-invalid",e.isFieldInvalid("lms_id",e.addForm)),s(3),m("ngForOf",e.lmsOptions),s(),m("ngIf",e.isFieldInvalid("lms_id",e.addForm)),s(7),se("is-invalid",e.isFieldInvalid("First Name",e.addForm)),s(),m("ngIf",e.isFieldInvalid("First Name",e.addForm)),s(6),se("is-invalid",e.isFieldInvalid("Last Name",e.addForm)),s(),m("ngIf",e.isFieldInvalid("Last Name",e.addForm)),s(7),se("is-invalid",e.isFieldInvalid("Course Title",e.addForm)),s(3),m("ngForOf",e.courseOptions),s(),m("ngIf",e.isFieldInvalid("Course Title",e.addForm)),s(7),se("is-invalid",e.isFieldInvalid("certification_date",e.addForm)),s(3),m("ngIf",e.isFieldInvalid("certification_date",e.addForm)),s(6),se("is-invalid",e.isFieldInvalid("course_id",e.addForm)),s(3),m("ngIf",e.isFieldInvalid("course_id",e.addForm))}}function ra(a,i){if(a&1&&(n(0,"option",63),r(1),t()),a&2){let e=i.$implicit;m("value",e.value),s(),x(" ",e.label," ")}}function aa(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("server_id",e.editForm)," ")}}function la(a,i){if(a&1&&(n(0,"option",63),r(1),t()),a&2){let e=i.$implicit;m("value",e.value),s(),x(" ",e.label," ")}}function sa(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("lms_id",e.editForm)," ")}}function da(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("First Name",e.editForm)," ")}}function ma(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("Last Name",e.editForm)," ")}}function ca(a,i){if(a&1&&(n(0,"option",63),r(1),t()),a&2){let e=i.$implicit;m("value",e.title),s(),qe(" ",e.title," (",e.code,") ")}}function pa(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("Course Title",e.editForm)," ")}}function ua(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("certification_date",e.editForm)," ")}}function ga(a,i){if(a&1&&(n(0,"div",64),r(1),t()),a&2){let e=p(2);s(),x(" ",e.getFieldError("course_id",e.editForm)," ")}}function fa(a,i){if(a&1){let e=y();n(0,"div",33)(1,"h4",34),r(2,"Edit Certificate"),t(),n(3,"button",35),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",36)(5,"form",37),u("ngSubmit",function(){h(e);let l=p();return b(l.onEditSubmit())}),n(6,"div",4)(7,"div",38)(8,"label",39),r(9,"Server ID "),n(10,"span",40),r(11,"*"),t()(),n(12,"select",41)(13,"option",42),r(14,"Select hosting server for certificate"),t(),g(15,ra,2,2,"option",43),t(),g(16,aa,2,1,"div",44),t(),n(17,"div",38)(18,"label",39),r(19,"LMS ID "),n(20,"span",40),r(21,"*"),t()(),n(22,"select",45)(23,"option",42),r(24,"Select Learning Management System"),t(),g(25,la,2,2,"option",43),t(),g(26,sa,2,1,"div",44),t()(),n(27,"div",4)(28,"div",38)(29,"label",39),r(30,"First Name "),n(31,"span",40),r(32,"*"),t()(),c(33,"input",46),g(34,da,2,1,"div",44),t(),n(35,"div",38)(36,"label",39),r(37,"Last Name "),n(38,"span",40),r(39,"*"),t()(),c(40,"input",47),g(41,ma,2,1,"div",44),t()(),n(42,"div",4)(43,"div",48)(44,"label",39),r(45,"Course Title "),n(46,"span",40),r(47,"*"),t()(),n(48,"select",49)(49,"option",42),r(50,"Select course completed by student"),t(),g(51,ca,2,3,"option",43),t(),g(52,pa,2,1,"div",44),t()(),n(53,"div",4)(54,"div",38)(55,"label",39),r(56,"Certification Date "),n(57,"span",40),r(58,"*"),t()(),c(59,"input",50),n(60,"small",51),r(61,"Date when the course was completed"),t(),g(62,ua,2,1,"div",44),t(),n(63,"div",38)(64,"label",39),r(65,"Course ID "),n(66,"span",40),r(67,"*"),t()(),c(68,"input",52),n(69,"small",51),r(70,"Automatically set when you select a course"),t(),g(71,ga,2,1,"div",44),t()(),n(72,"div",4)(73,"div",48)(74,"label",39),r(75,"Status "),n(76,"span",40),r(77,"*"),t()(),n(78,"select",53)(79,"option",54),r(80,"Active - Certificate is valid and current"),t(),n(81,"option",55),r(82,"Inactive - Certificate has been deactivated"),t(),n(83,"option",56),r(84,"Pending - Awaiting verification/approval"),t(),n(85,"option",57),r(86,"Expired - Certificate validity has ended"),t(),n(87,"option",58),r(88,"Revoked - Certificate has been invalidated"),t(),n(89,"option",59),r(90,"Suspended - Temporarily suspended certificate"),t()()()(),n(91,"div",60)(92,"button",61),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(93,"Cancel"),t(),n(94,"button",62),r(95,"Update Certificate"),t()()()()}if(a&2){let e=p();s(5),m("formGroup",e.editForm),s(7),se("is-invalid",e.isFieldInvalid("server_id",e.editForm)),s(3),m("ngForOf",e.serverOptions),s(),m("ngIf",e.isFieldInvalid("server_id",e.editForm)),s(6),se("is-invalid",e.isFieldInvalid("lms_id",e.editForm)),s(3),m("ngForOf",e.lmsOptions),s(),m("ngIf",e.isFieldInvalid("lms_id",e.editForm)),s(7),se("is-invalid",e.isFieldInvalid("First Name",e.editForm)),s(),m("ngIf",e.isFieldInvalid("First Name",e.editForm)),s(6),se("is-invalid",e.isFieldInvalid("Last Name",e.editForm)),s(),m("ngIf",e.isFieldInvalid("Last Name",e.editForm)),s(7),se("is-invalid",e.isFieldInvalid("Course Title",e.editForm)),s(3),m("ngForOf",e.courseOptions),s(),m("ngIf",e.isFieldInvalid("Course Title",e.editForm)),s(7),se("is-invalid",e.isFieldInvalid("certification_date",e.editForm)),s(3),m("ngIf",e.isFieldInvalid("certification_date",e.editForm)),s(6),se("is-invalid",e.isFieldInvalid("course_id",e.editForm)),s(3),m("ngIf",e.isFieldInvalid("course_id",e.editForm))}}function ha(a,i){if(a&1&&c(0,"img",101),a&2){let e=p(3);m("src",e.qrCodeDataUrl,q)}}function ba(a,i){a&1&&(n(0,"div",102)(1,"span"),r(2,"QR Code Pending"),t()())}function _a(a,i){if(a&1&&(n(0,"div",74)(1,"div",75)(2,"div",76)(3,"div",77)(4,"div",78),c(5,"img",79)(6,"img",80),n(7,"h3",81)(8,"b"),r(9,"Instructor Signature"),t()(),n(10,"ul",82)(11,"li")(12,"p",83),r(13,"Certificate Id: "),n(14,"span"),r(15),t()()(),n(16,"li")(17,"p",84),r(18,"Hosting Server Id: "),n(19,"span"),r(20),t()()(),n(21,"li")(22,"p",85),r(23,"Learning Management System Id: "),n(24,"span"),r(25),t()(),c(26,"br")(27,"hr"),t(),n(28,"li")(29,"div",86)(30,"div",87),g(31,ha,1,1,"img",88)(32,ba,3,0,"div",89),t()()()(),n(33,"div",90)(34,"div",91)(35,"h1"),r(36,"Certificate of Completion"),t(),c(37,"br")(38,"br"),n(39,"h2"),r(40,"Congratulations "),n(41,"span"),r(42),t(),r(43,"\xA0"),n(44,"span"),r(45),t()(),c(46,"br"),n(47,"h5",92),r(48,"User Id: "),n(49,"span"),r(50),t()()(),n(51,"div",93)(52,"h1")(53,"span"),r(54),t()(),c(55,"br")(56,"br"),n(57,"h2"),r(58,"Course Completed on: "),n(59,"span",94),r(60),t()(),c(61,"br"),n(62,"h5",95),r(63,"Course Id: "),n(64,"span",96),r(65),t()()(),n(66,"div",97)(67,"address"),r(68,"Taskhive "),c(69,"br"),r(70," 4/20, Shiv Sangam Nagar, Regal Town, Khajurikala,"),c(71,"br"),r(72," Bhopal, Madhya Pradesh 462024"),t(),n(73,"a",98)(74,"em"),r(75,"taskhive.co.in"),t()(),c(76,"hr",99),n(77,"b",100),r(78),t()()()()()()()()),a&2){let e=p(2);s(15),_(e.viewingCertificate.certification_id||"PENDING"),s(5),_(e.viewingCertificate.server_id),s(5),_(e.viewingCertificate.lms_id),s(6),m("ngIf",e.qrCodeDataUrl),s(),m("ngIf",!e.qrCodeDataUrl),s(10),_(e.viewingCertificate["First Name"]),s(3),_(e.viewingCertificate["Last Name"]),s(5),_(e.viewingCertificate.user_id||"PENDING"),s(4),_(e.viewingCertificate["Course Title"]),s(6),_(e.formatCertificationDate(e.viewingCertificate.certification_date)),s(5),_(e.viewingCertificate.course_id),s(13),x("taskhive.co.in/verify?cert=",e.viewingCertificate.certification_id||"PENDING","")}}function va(a,i){if(a&1){let e=y();n(0,"div",33)(1,"h4",34),r(2,"Certificate Preview"),t(),n(3,"div",65)(4,"button",66),u("click",function(){h(e);let l=p();return b(l.printCertificate())}),c(5,"i",67),r(6," Print "),t(),n(7,"button",68),u("click",function(){h(e);let l=p();return b(l.downloadCertificate())}),c(8,"i",69),r(9," Download "),t()(),n(10,"button",35),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(11,"div",70),g(12,_a,79,12,"div",71),t(),n(13,"div",72)(14,"button",73),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(15,"Close"),t()()}if(a&2){let e=p();s(12),m("ngIf",e.viewingCertificate)}}function xa(a,i){if(a&1){let e=y();n(0,"div",33)(1,"h5",34),r(2,"Confirm Deletion"),t(),n(3,"button",35),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),t()(),n(4,"div",36)(5,"p"),r(6,"Are you sure you want to delete this Certificate? This action cannot be undone."),t()(),n(7,"div",72)(8,"button",73),u("click",function(){let l=h(e).$implicit;return b(l.dismiss("Cancel"))}),r(9,"Cancel"),t(),n(10,"button",103),u("click",function(){let l=h(e).$implicit,d=p();return b(d.confirmDelete(l))}),r(11,"Delete"),t()()}}var Je=class a{constructor(i,e,o,l,d){this.apiService=i;this.fb=e;this.modalService=o;this.fileServ=l;this.platformId=d;this.env=Z.url,this.initializeForms()}p=1;itemsPerPage=10;env;selectedCertificate={};getData=[];pagination=null;coursesData=[];addForm;editForm;certificateToDeleteId=null;showAddForm=!1;editingCertificate=null;viewingCertificate=null;Math=Math;qrCodeDataUrl="";serverOptions=[{value:"SERVER001",label:"Main Production Server (SERVER001)"},{value:"SERVER002",label:"Backup Server (SERVER002)"},{value:"SERVER003",label:"Development Server (SERVER003)"}];lmsOptions=[{value:"LMS_MOODLE_001",label:"Moodle Primary (LMS_MOODLE_001)"},{value:"LMS_CANVAS_001",label:"Canvas Learning (LMS_CANVAS_001)"},{value:"LMS_CUSTOM_001",label:"Custom LMS (LMS_CUSTOM_001)"}];courseOptions=[{id:"COURSE001",title:"Web Development Fundamentals",code:"WEB101"},{id:"COURSE002",title:"React.js Advanced",code:"REACT201"},{id:"COURSE003",title:"Node.js Backend Development",code:"NODE301"},{id:"COURSE004",title:"Full Stack JavaScript",code:"FULLJS401"},{id:"COURSE005",title:"Python Programming",code:"PY101"},{id:"COURSE006",title:"Data Science with Python",code:"DS201"},{id:"COURSE007",title:"Machine Learning Basics",code:"ML101"},{id:"COURSE008",title:"Digital Marketing",code:"DM101"}];confirmDeleteModal;addCertificateModal;editCertificateModal;viewCertificateModal;isBrowser(){return ri(this.platformId)}ngOnInit(){this.fetchAllCertificates()}initializeForms(){this.addForm=this.fb.group({server_id:["",v.required],lms_id:["",v.required],"First Name":["",v.required],"Last Name":["",v.required],"Course Title":["",v.required],certification_date:["",v.required],course_id:["",v.required],status:["active"]}),this.editForm=this.fb.group({server_id:["",v.required],lms_id:["",v.required],"First Name":["",v.required],"Last Name":["",v.required],"Course Title":["",v.required],certification_date:["",v.required],course_id:["",v.required],status:["active"]}),this.addForm.get("Course Title")?.valueChanges.subscribe(i=>{let e=this.courseOptions.find(o=>o.title===i);e&&this.addForm.patchValue({course_id:e.id},{emitEvent:!1})}),this.editForm.get("Course Title")?.valueChanges.subscribe(i=>{let e=this.courseOptions.find(o=>o.title===i);e&&this.editForm.patchValue({course_id:e.id},{emitEvent:!1})})}generateQRCode(i){return je(this,null,function*(){if(!i||i==="PENDING")return"";try{let e=`${window.location.origin}/certificate?cert=${i}`;return yield Ei.toDataURL(e,{width:160,margin:1,color:{dark:"#000000",light:"#FFFFFF"}})}catch(e){return console.error("Error generating QR code:",e),""}})}fetchAllCertificates(){this.apiService.get("certificates",{}).subscribe(i=>{i&&i.success?(this.getData=Array.isArray(i.data)?i.data:[],this.pagination=i.pagination??null):Array.isArray(i)?(this.getData=i,this.pagination=null):this.getData=[],console.log("Certificates data:",this.getData,"pagination:",this.pagination)},i=>{console.error("Error fetching certificates",i),this.getData=[],this.pagination=null})}getSNo(i){return(this.p-1)*this.itemsPerPage+i+1}openAddModal(){this.showAddForm=!0,this.addForm.reset(),this.addForm.patchValue({status:"active"}),this.modalService.open(this.addCertificateModal,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openEditModal(i){this.editingCertificate=i,this.editForm.patchValue({server_id:i.server_id,lms_id:i.lms_id,"First Name":i["First Name"],"Last Name":i["Last Name"],"Course Title":i["Course Title"],certification_date:this.formatDateForInput(i.certification_date),course_id:i.course_id,status:i.status}),this.modalService.open(this.editCertificateModal,{ariaLabelledBy:"modal-basic-title",size:"xl"})}openViewModal(i){return je(this,null,function*(){this.viewingCertificate=i,this.isBrowser()&&(this.qrCodeDataUrl=yield this.generateQRCode(i.certification_id)),this.modalService.open(this.viewCertificateModal,{ariaLabelledBy:"modal-basic-title",size:"xl",windowClass:"certificate-modal"})})}formatDateForInput(i){return i?new Date(i).toISOString().split("T")[0]:""}formatDisplayDate(i){return i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""}formatCertificationDate(i){return i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""}onAddSubmit(){if(this.addForm.valid){let i=re({},this.addForm.value);i.certification_date=new Date(i.certification_date).toISOString(),this.apiService.post("certificates",i).subscribe(e=>{console.log("Certificate created:",e),this.fetchAllCertificates(),this.modalService.dismissAll(),this.addForm.reset()},e=>{console.error("Error creating certificate:",e)})}else this.markFormGroupTouched(this.addForm)}onEditSubmit(){if(this.editForm.valid&&this.editingCertificate){let i=re({},this.editForm.value);i.certification_date=new Date(i.certification_date).toISOString(),this.apiService.put("certificates",this.editingCertificate._id,i).subscribe(e=>{console.log("Certificate updated:",e),this.fetchAllCertificates(),this.modalService.dismissAll(),this.editingCertificate=null},e=>{console.error("Error updating certificate:",e)})}else this.markFormGroupTouched(this.editForm)}onDelete(i){this.certificateToDeleteId=i,this.modalService.open(this.confirmDeleteModal,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{o==="Delete"&&this.certificateToDeleteId&&this.apiService.delete("certificates",this.certificateToDeleteId).subscribe(l=>{console.log("Certificate deleted:",l),this.fetchAllCertificates(),this.certificateToDeleteId=null},l=>{console.error("Error deleting certificate:",l)})})}confirmDelete(i){i.close("Delete")}markFormGroupTouched(i){Object.keys(i.controls).forEach(e=>{let o=i.get(e);o?.markAsTouched(),o instanceof li&&this.markFormGroupTouched(o)})}isFieldInvalid(i,e){let o=e.get(i);return!!(o&&o.invalid&&o.touched)}getFieldError(i,e){let o=e.get(i);return o?.errors&&o.errors.required?`${i} is required`:""}printCertificate(){return je(this,null,function*(){if(!this.isBrowser())return;let i=document.querySelector(".certificate-preview");if(i){let e=window.open("","","height=600,width=800");e&&(e.document.write("<html><head><title>Certificate</title>"),e.document.write("<style>"),e.document.write(`
          @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,500;1,400&display=swap');
          * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Montserrat', sans-serif; }
          body { background: white; }
          .cert-container { position: relative; padding: 45px; border: 1px solid #6f6f6f; width: 1056px; height: 816px; margin: auto; }
          .border-gray { padding: 5px; border: 3px solid #58595B; }
          .border-red { border: 3px double #CE202F; }
          .content { padding: 20px; height: 700px; text-align: center; }
          .credentials { position: absolute; right: 100px; top: 120px; color: #58595B; list-style-type: none; font-size: 9pt; font-weight: 300; text-align: right; }
          .copytext-container { position: absolute; left: 114px; top: 275px; text-align: left; line-height: 100%; }
          .congrats-copytext { margin-bottom: 70px; }
          .course-copytext { margin-bottom: 65px; }
          .address-copytext { line-height: 150%; }
          #mt-logo { position: absolute; width: 350px; right: 777px; top: 91px; }
          #mt-stamp { position: absolute; width: 144px; right: 130px; top: 550px; }
          #mt-stamp-sign { position: absolute; width: 144px; right: 85px; top: 550px; }
          #mt-site { color: #CE202F; font-size: 14pt; }
          #user-id-string, #course-id-string { line-height: 7px; }
          h2, h3 { font-weight: 300; }
          address { font-weight: 100; font-size: 14pt; font-style: normal; line-height: 135%; }
          #qrcode-container { float: right; margin-top: 20px; }
          #certificate-qrcode img { width: 160px; height: 160px; display: block; }
        `),e.document.write("</style></head><body>"),e.document.write(i.innerHTML),e.document.write("</body></html>"),e.document.close(),e.onload=()=>{setTimeout(()=>{e.print()},250)})}})}downloadCertificate(){return je(this,null,function*(){this.isBrowser()&&console.log("Download certificate functionality - implement with jsPDF or html2canvas")})}static \u0275fac=function(e){return new(e||a)(f(O),f(M),f(ce),f(D),f(Gt))};static \u0275cmp=P({type:a,selectors:[["app-certificates"]],viewQuery:function(e,o){if(e&1&&(Y(Ur,5),Y(qr,5),Y($r,5),Y(Gr,5)),e&2){let l;H(l=J())&&(o.confirmDeleteModal=l.first),H(l=J())&&(o.addCertificateModal=l.first),H(l=J())&&(o.editCertificateModal=l.first),H(l=J())&&(o.viewCertificateModal=l.first)}},decls:71,vars:11,consts:[["addCertificateModal",""],["editCertificateModal",""],["viewCertificateModal",""],["confirmDeleteModal",""],[1,"row"],[1,"col-12"],[1,"card","shadow-sm"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"card","p-3"],[1,"table-responsive"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-3"],[1,"form-label","mb-0"],[1,"form-select","d-inline-block","w-auto","ms-1","me-1",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["type","search","placeholder","Search",1,"form-control","form-control-sm","w-auto"],[1,"table","table-bordered","table-hover","table-sm","align-middle"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],[1,"text-muted"],[3,"pageChange"],[1,"text-truncate"],[1,"badge",3,"ngClass"],[1,"btn","btn-info","btn-sm","me-1",3,"click"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"col-md-6","mb-3"],[1,"form-label"],[1,"text-danger"],["formControlName","server_id",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["formControlName","lms_id",1,"form-control"],["type","text","formControlName","First Name","placeholder","Enter student's first name",1,"form-control"],["type","text","formControlName","Last Name","placeholder","Enter student's last name",1,"form-control"],[1,"col-md-12","mb-3"],["formControlName","Course Title",1,"form-control"],["type","date","formControlName","certification_date",1,"form-control"],[1,"form-text","text-muted"],["type","text","formControlName","course_id","placeholder","Auto-filled based on course selection","readonly","",1,"form-control"],["formControlName","status",1,"form-control"],["value","active"],["value","inactive"],["value","pending"],["value","expired"],["value","revoked"],["value","suspended"],[1,"text-end"],["type","button",1,"btn","btn-secondary","me-2",3,"click"],["type","submit",1,"btn","btn-primary"],[3,"value"],[1,"invalid-feedback"],[1,"ms-auto"],["type","button",1,"btn","btn-outline-primary","btn-sm","me-2",3,"click"],[1,"fas","fa-print"],["type","button",1,"btn","btn-outline-success","btn-sm","me-2",3,"click"],[1,"fas","fa-download"],[1,"modal-body","p-1","pt-5","mt-5"],["class","certificate-preview",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"certificate-preview"],[1,"cert-container"],[1,"border-gray"],[1,"border-red"],[1,"content"],["id","mt-logo","src","/assets/images/logo.jpg","alt","Logo Goes Here",2,"height","80px","width","200px"],["id","mt-stamp-sign","src","./assets/images/sign.png","alt","Certified Stamp",2,"height","100px","width","200px","margin-top","36px"],["id","mt-stamp",1,"py-3",2,"margin-top","120px"],[1,"credentials"],["id","cert-id"],["id","host-server-id"],["id","lms-id"],["id","qrcode-container"],["id","certificate-qrcode"],["alt","Certificate QR Code",3,"src",4,"ngIf"],["class","qr-placeholder",4,"ngIf"],[1,"copytext-container"],[1,"congrats-copytext"],["id","user-id-string"],[1,"course-copytext"],["id","certification_date"],["id","course-id-string"],["id","course_id"],[1,"address-copytext"],["href","#","id","mt-site",2,"text-decoration","none !important"],[2,"width","300px"],["id","verifyLink",2,"font-size","10px"],["alt","Certificate QR Code",3,"src"],[1,"qr-placeholder"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,o){if(e&1){let l=y();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h4",9),r(6,"Certificates"),t(),n(7,"button",10),u("click",function(){return h(l),b(o.openAddModal())}),r(8,"Add Certificate"),t()(),n(9,"div",11)(10,"div",12)(11,"div",13)(12,"label",14),r(13," Show "),n(14,"select",15),Oe("ngModelChange",function(C){return h(l),Me(o.itemsPerPage,C)||(o.itemsPerPage=C),b(C)}),n(15,"option",16),r(16,"10"),t(),n(17,"option",17),r(18,"25"),t(),n(19,"option",18),r(20,"50"),t(),n(21,"option",19),r(22,"100"),t()(),r(23," entries "),t(),c(24,"input",20),t(),n(25,"table",21)(26,"thead",22)(27,"tr")(28,"th"),r(29,"S.No."),t(),n(30,"th"),r(31,"Certificate ID"),t(),n(32,"th"),r(33,"Student Name"),t(),n(34,"th"),r(35,"User ID"),t(),n(36,"th"),r(37,"Course Title"),t(),n(38,"th"),r(39,"Certification Date"),t(),n(40,"th"),r(41,"Server ID"),t(),n(42,"th"),r(43,"LMS ID"),t(),n(44,"th"),r(45,"Course ID"),t(),n(46,"th"),r(47,"Status"),t(),n(48,"th"),r(49,"Created On"),t(),n(50,"th",23),r(51,"View"),t(),n(52,"th",23),r(53,"Edit"),t(),n(54,"th",23),r(55,"Delete"),t()()(),n(56,"tbody"),g(57,Wr,33,13,"tr",24),ee(58,"paginate"),t()(),n(59,"div",25)(60,"small",26),r(61),t(),n(62,"pagination-controls",27),u("pageChange",function(C){return h(l),b(o.p=C)}),t()()()()()()()(),g(63,oa,96,25,"ng-template",null,0,te)(65,fa,96,25,"ng-template",null,1,te)(67,va,16,1,"ng-template",null,2,te)(69,xa,12,0,"ng-template",null,3,te)}e&2&&(s(14),Fe("ngModel",o.itemsPerPage),s(43),m("ngForOf",ne(58,5,o.getData,de(8,Qr,o.itemsPerPage,o.p))),s(4),Kt("Showing ",(o.p-1)*o.itemsPerPage+1," to ",o.Math.min(o.p*o.itemsPerPage,o.getData.length||0)," of ",o.getData.length||0," entries"))},dependencies:[tt,F,k,ue,L,B,R,N,Pe,V,z,We,G,Q,pe],styles:['@font-face{font-family:Montserrat;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUFjIg1_i6t8kCHKm459Wx7xQYXK0vOoz6jq6R9WXV0poK5.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUFjIg1_i6t8kCHKm459Wx7xQYXK0vOoz6jq6R9WXx0poK5.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUFjIg1_i6t8kCHKm459Wx7xQYXK0vOoz6jq6R9WXd0poK5.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUFjIg1_i6t8kCHKm459Wx7xQYXK0vOoz6jq6R9WXZ0poK5.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUFjIg1_i6t8kCHKm459Wx7xQYXK0vOoz6jq6R9WXh0pg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.btn[_ngcontent-%COMP%]{color:#000;background:#fcdb38;border:none}.btn[_ngcontent-%COMP%]:hover{color:#fff;background:#0399fa}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}.certificate-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh}.certificate-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{height:90vh}.certificate-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{overflow:auto;padding:0}.certificate-preview[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Montserrat,sans-serif}.certificate-preview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6f6f6f;text-decoration:none}.certificate-preview[_ngcontent-%COMP%]   address[_ngcontent-%COMP%]{font-weight:100;font-size:14pt;font-style:normal;line-height:135%}.certificate-preview[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .certificate-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:300}.certificate-preview[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#58595b;text-decoration:none;list-style-type:none;font-size:9pt;font-weight:300;text-align:right}.certificate-preview[_ngcontent-%COMP%]   .cert-container[_ngcontent-%COMP%]{position:relative;padding:45px;border:1px solid #6f6f6f;width:1056px;height:816px;background-image:url(#);background-repeat:no-repeat;background-size:cover;margin:auto;transform:scale(.8);transform-origin:top center}.certificate-preview[_ngcontent-%COMP%]   .border-gray[_ngcontent-%COMP%]{padding:5px;border:3px solid #58595B}.certificate-preview[_ngcontent-%COMP%]   .border-red[_ngcontent-%COMP%]{border:3px double #CE202F}.certificate-preview[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:20px;height:700px;text-align:center}.certificate-preview[_ngcontent-%COMP%]   .credentials[_ngcontent-%COMP%]{position:absolute;right:100px;top:120px}.certificate-preview[_ngcontent-%COMP%]   .copytext-container[_ngcontent-%COMP%]{position:absolute;left:114px;top:205px;text-align:left;line-height:100%}.certificate-preview[_ngcontent-%COMP%]   .congrats-copytext[_ngcontent-%COMP%]{margin-bottom:70px}.certificate-preview[_ngcontent-%COMP%]   .course-copytext[_ngcontent-%COMP%]{margin-bottom:65px}.certificate-preview[_ngcontent-%COMP%]   .address-copytext[_ngcontent-%COMP%]{line-height:150%}.certificate-preview[_ngcontent-%COMP%]   #mt-logo[_ngcontent-%COMP%]{position:absolute;width:350px;right:777px;top:91px}.certificate-preview[_ngcontent-%COMP%]   #mt-stamp[_ngcontent-%COMP%]{position:absolute;width:144px;right:130px;top:550px}.certificate-preview[_ngcontent-%COMP%]   #mt-stamp-sign[_ngcontent-%COMP%]{position:absolute;width:144px;right:85px;top:550px}.certificate-preview[_ngcontent-%COMP%]   #mt-site[_ngcontent-%COMP%]{color:#260ce9;font-size:14pt}.certificate-preview[_ngcontent-%COMP%]   #user-id-string[_ngcontent-%COMP%], .certificate-preview[_ngcontent-%COMP%]   #course-id-string[_ngcontent-%COMP%]{line-height:7px}.certificate-preview[_ngcontent-%COMP%]   #mt-logo-text[_ngcontent-%COMP%]{margin-top:89px;margin-right:-128px;font-size:11px}.certificate-preview[_ngcontent-%COMP%]   #qrcode-container[_ngcontent-%COMP%]{float:right;margin-top:20px}.certificate-preview[_ngcontent-%COMP%]   #certificate-qrcode[_ngcontent-%COMP%]{width:160px;height:160px;display:flex;align-items:center;justify-content:center;background:#fff;border:2px solid #58595B;border-radius:4px;overflow:hidden}.certificate-preview[_ngcontent-%COMP%]   #certificate-qrcode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.certificate-preview[_ngcontent-%COMP%]   #certificate-qrcode[_ngcontent-%COMP%]   .qr-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#f8f9fa;color:#6c757d;font-size:11px;text-align:center;padding:10px}.certificate-preview[_ngcontent-%COMP%]   #certificate-qrcode[_ngcontent-%COMP%]   .qr-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}@media print{.certificate-preview[_ngcontent-%COMP%]   .cert-container[_ngcontent-%COMP%]{border:none;transform:scale(1);page-break-inside:avoid}.certificate-preview[_ngcontent-%COMP%]   #certificate-qrcode[_ngcontent-%COMP%]{border:1px solid #58595B}.certificate-preview[_ngcontent-%COMP%]   #certificate-qrcode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{print-color-adjust:exact;-webkit-print-color-adjust:exact}}.badge.bg-success[_ngcontent-%COMP%]{background-color:#28a745!important}.badge.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.badge.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important;color:#000!important}.badge.bg-secondary[_ngcontent-%COMP%]{background-color:#6c757d!important}.badge.bg-info[_ngcontent-%COMP%]{background-color:#17a2b8!important}']})};var Ca=[{path:"dashboard",component:at,canActivate:[U],data:{title:"Admin Dashboard",description:"View website analytics and manage content."}},{path:"projects",component:lt,canActivate:[U],data:{title:"Manage Projects",description:"Add, edit, and delete projects from the portfolio."}},{path:"projects/add-project",component:st,canActivate:[U],data:{title:"Add New Project",description:"Create a new project entry for the portfolio."}},{path:"projects/edit-project/:id",component:dt,canActivate:[U],data:{title:"Edit Project",description:"Update an existing project."}},{path:"query",component:ut,canActivate:[U],data:{title:"Contact Queries",description:"View and manage user-submitted contact queries."}},{path:"course-query",component:gt,canActivate:[U],data:{title:"Course Queries",description:"View and manage user-submitted course queries."}},{path:"career-query",component:ft,canActivate:[U],data:{title:"Career Queries",description:"View and manage career applications."}},{path:"courses",component:bt,canActivate:[U],data:{title:"Manage Courses",description:"Add, edit, and delete courses."}},{path:"courses/add-courses",component:_t,canActivate:[U],data:{title:"Add New Course",description:"Create a new course."}},{path:"courses/edit-courses/:id",component:vt,canActivate:[U],data:{title:"Edit Course",description:"Update an existing course."}},{path:"careers",component:ht,canActivate:[U],data:{title:"Manage Careers",description:"Add, edit, and delete career openings."}},{path:"careers/add-career",component:xt,canActivate:[U],data:{title:"Add New Career",description:"Create a new career opening."}},{path:"careers/edit-career/:id",component:Ct,canActivate:[U],data:{title:"Edit Career",description:"Update an existing career opening."}},{path:"blogs",component:mt,canActivate:[U],data:{title:"Manage Blogs",description:"Add, edit, and delete blog posts."}},{path:"blogs/add-blog",component:ct,canActivate:[U],data:{title:"Add New Blog Post",description:"Create a new blog post."}},{path:"blogs/edit-blog/:id",component:pt,canActivate:[U],data:{title:"Edit Blog Post",description:"Update an existing blog post."}},{path:"testimonials",component:yt,canActivate:[U],data:{title:"Manage Testimonials",description:"Add, edit, and delete testimonials."}},{path:"testimonials/add-testimonial",component:St,canActivate:[U],data:{title:"Add New Testimonial",description:"Create a new testimonial."}},{path:"testimonials/edit-testimonial/:id",component:Pt,canActivate:[U],data:{title:"Edit Testimonial",description:"Update an existing testimonial."}},{path:"teams",component:Et,canActivate:[U],data:{title:"Manage Teams",description:"Add, edit, and delete team members."}},{path:"teams/add-team",component:wt,canActivate:[U],data:{title:"Add New Team Member",description:"Create a new team member profile."}},{path:"teams/edit-team/:id",component:It,canActivate:[U],data:{title:"Edit Team Member",description:"Update an existing team member profile."}},{path:"students",component:Ft,canActivate:[U],data:{title:"Manage Students",description:"Add, edit, and delete student records."}},{path:"students/add-student",component:Mt,canActivate:[U],data:{title:"Add New Student",description:"Create a new student record."}},{path:"students/edit-student/:id",component:Ot,canActivate:[U],data:{title:"Edit Student",description:"Update an existing student record."}},{path:"certificates",component:Je,canActivate:[U],data:{title:"Manage Certificates",description:"Add, edit, and delete certificates."}},{path:"certificates/add-certificates",component:Je,canActivate:[U],data:{title:"Add New Certificate",description:"Create a new certificate."}},{path:"certificates/edit-certificates/:id",component:Je,canActivate:[U],data:{title:"Edit Certificate",description:"Update an existing certificate."}}],Tt=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=ze({type:a});static \u0275inj=Ne({imports:[Vt.forChild(Ca),Vt]})};var wi=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=ze({type:a});static \u0275inj=Ne({imports:[Ge,Tt,ui,_i,Si,di,mi]})};export{wi as AdmincomponentModule};
