import './polyfills.server.mjs';
import{e as V}from"./chunk-5XUXGTUW.mjs";var X=V((k,D)=>{(function(m,d){typeof k=="object"&&typeof D=="object"?D.exports=d():typeof define=="function"&&define.amd?define([],d):typeof k=="object"?k.AWN=d():m.AWN=d()})(self,function(){return(()=>{"use strict";var m={d:(n,e)=>{for(var a in e)m.o(e,a)&&!m.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:e[a]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},d={};function w(n){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(n)}function I(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function N(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}m.r(d),m.d(d,{default:()=>Q});var R={maxNotifications:10,animationDuration:300,position:"bottom-right",labels:{tip:"Tip",info:"Info",success:"Success",warning:"Attention",alert:"Error",async:"Loading",confirm:"Confirmation required",confirmOk:"OK",confirmCancel:"Cancel"},icons:{tip:"question-circle",info:"info-circle",success:"check-circle",warning:"exclamation-circle",alert:"exclamation-triangle",async:"cog fa-spin",confirm:"exclamation-triangle",prefix:"<i class='fa fas fa-fw fa-",suffix:"'></i>",enabled:!0},replacements:{tip:null,info:null,success:null,warning:null,alert:null,async:null,"async-block":null,modal:null,confirm:null,general:{"<script>":"","</script>":""}},messages:{tip:"",info:"",success:"Action has been succeeded",warning:"",alert:"Action has been failed",confirm:"This action can't be undone. Continue?",async:"Please, wait...","async-block":"Loading"},formatError:function(n){if(n.response){if(!n.response.data)return"500 API Server Error";if(n.response.data.errors)return n.response.data.errors.map(function(e){return e.detail}).join("<br>");if(n.response.statusText)return"".concat(n.response.status," ").concat(n.response.statusText,": ").concat(n.response.data)}return n.message?n.message:n},durations:{global:5e3,success:null,info:null,tip:null,warning:null,alert:null},minDurations:{async:1e3,"async-block":1e3}},A=function(){function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R;I(this,n),Object.assign(this,this.defaultsDeep(i,t))}var e,a;return e=n,a=[{key:"icon",value:function(t){return this.icons.enabled?"".concat(this.icons.prefix).concat(this.icons[t]).concat(this.icons.suffix):""}},{key:"label",value:function(t){return this.labels[t]}},{key:"duration",value:function(t){var i=this.durations[t];return i===null?this.durations.global:i}},{key:"toSecs",value:function(t){return"".concat(t/1e3,"s")}},{key:"applyReplacements",value:function(t,i){if(!t)return this.messages[i]||"";for(var c=0,s=["general",i];c<s.length;c++){var o=s[c];if(this.replacements[o])for(var r in this.replacements[o])t=t.replace(r,this.replacements[o][r])}return t}},{key:"override",value:function(t){return t?new n(t,this):this}},{key:"defaultsDeep",value:function(t,i){var c={};for(var s in t)i.hasOwnProperty(s)?c[s]=w(t[s])==="object"&&t[s]!==null?this.defaultsDeep(t[s],i[s]):i[s]:c[s]=t[s];return c}}],a&&N(e.prototype,a),n}(),y="awn",f={popup:"".concat(y,"-popup"),toast:"".concat(y,"-toast"),btn:"".concat(y,"-btn"),confirm:"".concat(y,"-confirm")},p={prefix:f.toast,klass:{label:"".concat(f.toast,"-label"),content:"".concat(f.toast,"-content"),icon:"".concat(f.toast,"-icon"),progressBar:"".concat(f.toast,"-progress-bar"),progressBarPause:"".concat(f.toast,"-progress-bar-paused")},ids:{container:"".concat(f.toast,"-container")}},l={prefix:f.popup,klass:{buttons:"".concat(y,"-buttons"),button:f.btn,successBtn:"".concat(f.btn,"-success"),cancelBtn:"".concat(f.btn,"-cancel"),title:"".concat(f.popup,"-title"),body:"".concat(f.popup,"-body"),content:"".concat(f.popup,"-content"),dotAnimation:"".concat(f.popup,"-loading-dots")},ids:{wrapper:"".concat(f.popup,"-wrapper"),confirmOk:"".concat(f.confirm,"-ok"),confirmCancel:"".concat(f.confirm,"-cancel")}},B={klass:{hiding:"".concat(y,"-hiding")},lib:y};function L(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}var O=function(){function n(t,i,c,s,o){(function(r,u){if(!(r instanceof u))throw new TypeError("Cannot call a class as a function")})(this,n),this.newNode=document.createElement("div"),i&&(this.newNode.id=i),c&&(this.newNode.className=c),s&&(this.newNode.style.cssText=s),this.parent=t,this.options=o}var e,a;return e=n,a=[{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"insert",value:function(){return this.beforeInsert(),this.el=this.parent.appendChild(this.newNode),this.afterInsert(),this}},{key:"replace",value:function(t){var i=this;if(this.getElement())return this.beforeDelete().then(function(){return i.updateType(t.type),i.parent.replaceChild(t.newNode,i.el),i.el=i.getElement(t.newNode),i.afterInsert(),i})}},{key:"beforeDelete",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.el,c=0;return this.start&&(c=this.options.minDurations[this.type]+this.start-Date.now())<0&&(c=0),new Promise(function(s){setTimeout(function(){i.classList.add(B.klass.hiding),setTimeout(s,t.options.animationDuration)},c)})}},{key:"delete",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.el;return this.getElement(i)?this.beforeDelete(i).then(function(){i.remove(),t.afterDelete()}):null}},{key:"afterDelete",value:function(){}},{key:"getElement",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.el;return t?document.getElementById(t.id):null}},{key:"addEvent",value:function(t,i){this.el.addEventListener(t,i)}},{key:"toggleClass",value:function(t){this.el.classList.toggle(t)}},{key:"updateType",value:function(t){this.type=t,this.duration=this.options.duration(this.type)}}],a&&L(e.prototype,a),n}();function H(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}var M=function(){function n(t,i){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.callback=t,this.remaining=i,this.resume()}var e,a;return e=n,(a=[{key:"pause",value:function(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"resume",value:function(){var t=this;this.paused=!1,this.start=new Date,window.clearTimeout(this.timerId),this.timerId=window.setTimeout(function(){window.clearTimeout(t.timerId),t.callback()},this.remaining)}},{key:"toggle",value:function(){this.paused?this.resume():this.pause()}}])&&H(e.prototype,a),n}();function T(n){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(n)}function q(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function E(n,e){return E=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a},E(n,e)}function K(n,e){if(e&&(T(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function b(n){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(n)}var W=function(n){(function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),r&&E(o,r)})(s,n);var e,a,t,i,c=(t=s,i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var o,r=b(t);if(i){var u=b(this).constructor;o=Reflect.construct(r,arguments,u)}else o=r.apply(this,arguments);return K(this,o)});function s(o,r,u,h){var v;return function(P,C){if(!(P instanceof C))throw new TypeError("Cannot call a class as a function")}(this,s),(v=c.call(this,h,"".concat(p.prefix,"-").concat(Math.floor(Date.now()-100*Math.random())),"".concat(p.prefix," ").concat(p.prefix,"-").concat(r),"animation-duration: ".concat(u.toSecs(u.animationDuration),";"),u)).updateType(r),v.setInnerHtml(o),v}return e=s,a=[{key:"setInnerHtml",value:function(o){this.type==="alert"&&o&&(o=this.options.formatError(o)),o=this.options.applyReplacements(o,this.type),this.newNode.innerHTML='<div class="awn-toast-wrapper">'.concat(this.progressBar).concat(this.label,'<div class="').concat(p.klass.content,'">').concat(o,'</div><span class="').concat(p.klass.icon,'">').concat(this.options.icon(this.type),"</span></div>")}},{key:"beforeInsert",value:function(){var o=this;if(this.parent.childElementCount>=this.options.maxNotifications){var r=Array.from(this.parent.getElementsByClassName(p.prefix));this.delete(r.find(function(u){return!o.isDeleted(u)}))}}},{key:"afterInsert",value:function(){var o=this;if(this.type=="async")return this.start=Date.now();if(this.addEvent("click",function(){return o.delete()}),!(this.duration<=0)){this.timer=new M(function(){return o.delete()},this.duration);for(var r=0,u=["mouseenter","mouseleave"];r<u.length;r++){var h=u[r];this.addEvent(h,function(){o.isDeleted()||(o.toggleClass(p.klass.progressBarPause),o.timer.toggle())})}}}},{key:"isDeleted",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.el;return o.classList.contains(B.klass.hiding)}},{key:"progressBar",get:function(){return this.duration<=0||this.type==="async"?"":"<div class='".concat(p.klass.progressBar,`' style="animation-duration:`).concat(this.options.toSecs(this.duration),';"></div>')}},{key:"label",get:function(){return'<b class="'.concat(p.klass.label,'">').concat(this.options.label(this.type),"</b>")}}],a&&q(e.prototype,a),s}(O);function _(n){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(n)}function U(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function z(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function S(n,e){return S=Object.setPrototypeOf||function(a,t){return a.__proto__=t,a},S(n,e)}function F(n,e){if(e&&(_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(n)}function g(n){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(n)}var x=function(n){(function(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),r&&S(o,r)})(s,n);var e,a,t,i,c=(t=s,i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var o,r=g(t);if(i){var u=g(this).constructor;o=Reflect.construct(r,arguments,u)}else o=r.apply(this,arguments);return F(this,o)});function s(o){var r,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"modal",h=arguments.length>2?arguments[2]:void 0,v=arguments.length>3?arguments[3]:void 0,P=arguments.length>4?arguments[4]:void 0;U(this,s);var C="animation-duration: ".concat(h.toSecs(h.animationDuration),";");return(r=c.call(this,document.body,l.ids.wrapper,null,C,h))[l.ids.confirmOk]=v,r[l.ids.confirmCancel]=P,r.className="".concat(l.prefix,"-").concat(u),["confirm","async-block","modal"].includes(u)||(u="modal"),r.updateType(u),r.setInnerHtml(o),r.insert(),r}return e=s,(a=[{key:"setInnerHtml",value:function(o){var r=this.options.applyReplacements(o,this.type);switch(this.type){case"confirm":var u=["<button class='".concat(l.klass.button," ").concat(l.klass.successBtn,"'id='").concat(l.ids.confirmOk,"'>").concat(this.options.labels.confirmOk,"</button>")];this[l.ids.confirmCancel]!==!1&&u.push("<button class='".concat(l.klass.button," ").concat(l.klass.cancelBtn,"'id='").concat(l.ids.confirmCancel,"'>").concat(this.options.labels.confirmCancel,"</button>")),r="".concat(this.options.icon(this.type),"<div class='").concat(l.klass.title,"'>").concat(this.options.label(this.type),'</div><div class="').concat(l.klass.content,'">').concat(r,"</div><div class='").concat(l.klass.buttons," ").concat(l.klass.buttons,"-").concat(u.length,"'>").concat(u.join(""),"</div>");break;case"async-block":r="".concat(r,'<div class="').concat(l.klass.dotAnimation,'"></div>')}this.newNode.innerHTML='<div class="'.concat(l.klass.body," ").concat(this.className,'">').concat(r,"</div>")}},{key:"keyupListener",value:function(o){if(this.type==="async-block")return o.preventDefault();switch(o.code){case"Escape":o.preventDefault(),this.delete();case"Tab":if(o.preventDefault(),this.type!=="confirm"||this[l.ids.confirmCancel]===!1)return!0;var r=this.okBtn;o.shiftKey?document.activeElement.id==l.ids.confirmOk&&(r=this.cancelBtn):document.activeElement.id!==l.ids.confirmCancel&&(r=this.cancelBtn),r.focus()}}},{key:"afterInsert",value:function(){var o=this;switch(this.listener=function(r){return o.keyupListener(r)},window.addEventListener("keydown",this.listener),this.type){case"async-block":this.start=Date.now();break;case"confirm":this.okBtn.focus(),this.addEvent("click",function(r){if(r.target.nodeName!=="BUTTON")return!1;o.delete(),o[r.target.id]&&o[r.target.id]()});break;default:document.activeElement.blur(),this.addEvent("click",function(r){r.target.id===o.newNode.id&&o.delete()})}}},{key:"afterDelete",value:function(){window.removeEventListener("keydown",this.listener)}},{key:"okBtn",get:function(){return document.getElementById(l.ids.confirmOk)}},{key:"cancelBtn",get:function(){return document.getElementById(l.ids.confirmCancel)}}])&&z(e.prototype,a),s}(O);function j(n){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(n)}function G(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function J(n,e){for(var a=0;a<e.length;a++){var t=e[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}var Q=function(){function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};G(this,n),this.options=new A(t)}var e,a;return e=n,(a=[{key:"tip",value:function(t,i){return this._addToast(t,"tip",i).el}},{key:"info",value:function(t,i){return this._addToast(t,"info",i).el}},{key:"success",value:function(t,i){return this._addToast(t,"success",i).el}},{key:"warning",value:function(t,i){return this._addToast(t,"warning",i).el}},{key:"alert",value:function(t,i){return this._addToast(t,"alert",i).el}},{key:"async",value:function(t,i,c,s,o){var r=this._addToast(s,"async",o);return this._afterAsync(t,i,c,o,r)}},{key:"confirm",value:function(t,i,c,s){return this._addPopup(t,"confirm",s,i,c)}},{key:"asyncBlock",value:function(t,i,c,s,o){var r=this._addPopup(s,"async-block",o);return this._afterAsync(t,i,c,o,r)}},{key:"modal",value:function(t,i,c){return this._addPopup(t,i,c)}},{key:"closeToasts",value:function(){for(var t=this.container;t.firstChild;)t.removeChild(t.firstChild)}},{key:"_addPopup",value:function(t,i,c,s,o){return new x(t,i,this.options.override(c),s,o)}},{key:"_addToast",value:function(t,i,c,s){c=this.options.override(c);var o=new W(t,i,c,this.container);return s?s instanceof x?s.delete().then(function(){return o.insert()}):s.replace(o):o.insert()}},{key:"_afterAsync",value:function(t,i,c,s,o){return t.then(this._responseHandler(i,"success",s,o),this._responseHandler(c,"alert",s,o))}},{key:"_responseHandler",value:function(t,i,c,s){var o=this;return function(r){switch(j(t)){case"undefined":case"string":var u=i==="alert"?t||r:t;o._addToast(u,i,c,s);break;default:s.delete().then(function(){t&&t(r)})}}}},{key:"_createContainer",value:function(){return new O(document.body,p.ids.container,"awn-".concat(this.options.position)).insert().el}},{key:"container",get:function(){return document.getElementById(p.ids.container)||this._createContainer()}}])&&J(e.prototype,a),n}();return d})()})});export default X();
