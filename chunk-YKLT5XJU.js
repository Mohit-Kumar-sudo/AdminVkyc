import{Aa as g,g as a,i,sa as d}from"./chunk-3SR2L3IJ.js";var l={production:!1,url:"http://103.140.73.19:5000"};var n=class extends Error{};n.prototype.name="InvalidTokenError";function u(r){return decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let o=t.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function h(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return u(e)}catch{return atob(e)}}function p(r,e){if(typeof r!="string")throw new n("Invalid token specified: must be a string");e||(e={});let t=e.header===!0?0:1,o=r.split(".")[t];if(typeof o!="string")throw new n(`Invalid token specified: missing part #${t+1}`);let m;try{m=h(o)}catch(c){throw new n(`Invalid token specified: invalid base64 for part #${t+1} (${c.message})`)}try{return JSON.parse(m)}catch(c){throw new n(`Invalid token specified: invalid json for part #${t+1} (${c.message})`)}}var s=class r{constructor(e){this.route=e}decodedToken;token;setToken(e,t){localStorage.setItem("Token",e),localStorage.setItem("refreshToken",t)}getToken(){let e=localStorage.getItem("Token");return this.token=e,e}getRefreshToken(){return localStorage.getItem("refershToken")}deleteToken(){localStorage.removeItem("Token"),localStorage.removeItem("refershToken"),this.route.navigate(["/login"])}setUser(e){localStorage.setItem("user",JSON.stringify(e))}getUser(){return JSON.parse(localStorage.getItem("user")||"{}")}decodeToken(){this.getToken()&&(this.decodedToken=p(this.token))}getDecodeToken(){return p(this.token)}getExpiryTime(){return this.decodeToken(),this.decodedToken?this.decodedToken.exp:null}isTokenExpired(){let e=this.getExpiryTime();return e?1e3*e-new Date().getTime()<5e3:!1}static \u0275fac=function(t){return new(t||r)(i(g))};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};var f=class r{constructor(e,t){this.httpClient=e;this.tokenService=t}apiUrl=`${l.url}/contact`;onContactSave(e){return console.log(e),this.httpClient.post(`${l.url}/contact`,e)}onContactGetAll(){return this.httpClient.get(this.apiUrl)}onContactDelete(e){return this.httpClient.delete(`${this.apiUrl}/${e}`)}onContactFindOne(e){return this.httpClient.get(`${this.apiUrl}/${e}`)}onContactUpdate(e,t){return this.httpClient.put(`${this.apiUrl}/${e}`,t)}onContactDeleteAll(){return this.httpClient.delete(this.apiUrl)}static \u0275fac=function(t){return new(t||r)(i(d),i(s))};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};export{l as a,s as b,f as c};
