(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93293,e=>{"use strict";var t=e.i(48277),s=e.i(30668),a=e.i(18033),l=e.i(53904),r=e.i(96086);e.s(["default",0,()=>{let[e,n]=(0,s.useState)(null),[i,c]=(0,s.useState)([]),[d,o]=(0,s.useState)(!0),[x,m]=(0,s.useState)(!1),{user:u,token:h}=(0,l.useAuth)(),p=(0,r.useRouter)();(0,s.useEffect)(()=>{u&&h?g():p.push("/login")},[u,h]);let g=async()=>{try{o(!0);let[e,t]=await Promise.all([a.default.get("".concat("https://smilify.ai/api","/subscriptions/my-subscription"),{headers:{Authorization:"Bearer ".concat(h)}}),a.default.get("".concat("https://smilify.ai/api","/subscriptions/my-payments?limit=5"),{headers:{Authorization:"Bearer ".concat(h)}})]);n(e.data.subscription),c(t.data.payments||[])}catch(e){console.error("Error fetching subscription:",e)}finally{o(!1)}},b=async()=>{if(confirm("Are you sure you want to cancel your subscription? You can continue using it until the end of your billing period.")){m(!0);try{await a.default.post("".concat("https://smilify.ai/api","/subscriptions/my-subscription/cancel"),{reason:"User requested cancellation"},{headers:{Authorization:"Bearer ".concat(h)}}),alert("Subscription cancelled successfully"),g()}catch(s){var e,t;alert((null==s||null==(t=s.response)||null==(e=t.data)?void 0:e.error)||"Failed to cancel subscription")}finally{m(!1)}}},y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),f=e?Math.ceil((new Date(e.endDate).getTime()-Date.now())/864e5):0;return d?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading subscription..."})]})}):e?(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"My Subscription"}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl shadow-lg p-8 mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:e.planId.name}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat((e=>{switch(e){case"ACTIVE":return"bg-green-100 text-green-800";case"TRIAL":return"bg-blue-100 text-blue-800";case"PAST_DUE":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status})]}),(0,t.jsxs)("div",{className:"text-4xl font-bold text-blue-600 mb-4",children:[e.planId.currency," ",e.planId.price,(0,t.jsxs)("span",{className:"text-lg text-gray-600 font-normal",children:[" / ",e.planId.interval]})]}),(0,t.jsxs)("div",{className:"space-y-2 text-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,t.jsxs)("span",{children:["Started on ",y(e.startDate)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),(0,t.jsxs)("span",{children:[f>0?"".concat(f," days remaining"):"Expired"," Â· Renews on ",y(e.endDate)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-purple-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),(0,t.jsxs)("span",{children:["Auto-renew: ",e.autoRenew?"On":"Off"]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("button",{onClick:()=>p.push("/pricing"),className:"bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-50 border-2 border-blue-600 transition-all",children:"Change Plan"}),"ACTIVE"===e.status&&(0,t.jsx)("button",{onClick:b,disabled:x,className:"bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 disabled:opacity-50 transition-all",children:x?"Canceling...":"Cancel Subscription"})]})]}),(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-300",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Plan Features:"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.planId.features.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),(0,t.jsx)("span",{className:"text-gray-700",children:e})]},s))})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Payment History"}),0===i.length?(0,t.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No payment history available"}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Amount"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Provider"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:i.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:y(e.paymentDate)}),(0,t.jsxs)("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:[e.currency," ",e.amount]}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat("success"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 capitalize",children:e.provider})]},e._id))})]})})]})]}):(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-12 text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-6",children:"ðŸ“‹"}),(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"No Active Subscription"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"You don't have an active subscription. Choose a plan to get started!"}),(0,t.jsx)("button",{onClick:()=>p.push("/pricing"),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg transition-all",children:"View Plans"})]})})}])}]);