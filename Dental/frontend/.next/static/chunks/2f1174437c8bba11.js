(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15548,e=>{"use strict";e.i(39057);var t=e.i(48277),s=e.i(30668),a=e.i(96086),r=e.i(1831),l=e.i(72015),o=e.i(9693),n=e.i(66474);function i(e){let{patientId:a,patientName:l,patientPhone:n,isOpen:i,onClose:d}=e,[c,m]=(0,s.useState)(""),[h,x]=(0,s.useState)(!1),[g,u]=(0,s.useState)(null),[p,b]=(0,s.useState)(0),[f,v]=(0,s.useState)(!1),[j,y]=(0,s.useState)(""),[w,N]=(0,s.useState)("now");(0,s.useEffect)(()=>{if(i){let e=localStorage.getItem("sms_draft_".concat(a));e&&(m(e),b(e.length))}},[i,a]),(0,s.useEffect)(()=>{c.trim()&&localStorage.setItem("sms_draft_".concat(a),c)},[c,a]);let k=async()=>{if(!c.trim())return void u({success:!1,message:"Please enter a message"});x(!0),u(null);try{let e=await r.smsAPI.sendPatientSMS({patientId:a,message:c});u({success:!0,message:e.data.message||"SMS sent successfully!"}),m(""),b(0),localStorage.removeItem("sms_draft_".concat(a)),m(""),b(0),setTimeout(()=>{d()},2e3)}catch(s){var e,t;u({success:!1,message:(null==(t=s.response)||null==(e=t.data)?void 0:e.error)||"Failed to send SMS"})}finally{x(!1)}},L=Math.ceil(p/160)||1,S=(.6*L).toFixed(2);return i?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:[(0,t.jsx)("style",{children:"\n        @keyframes fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes slide-up {\n          from { transform: translateY(20px); opacity: 0; }\n          to { transform: translateY(0); opacity: 1; }\n        }\n        @keyframes slide-down {\n          from { transform: translateY(-10px); opacity: 0; }\n          to { transform: translateY(0); opacity: 1; }\n        }\n        .animate-fade-in { animation: fade-in 0.3s ease-out; }\n        .animate-slide-up { animation: slide-up 0.4s ease-out; }\n        .animate-slide-down { animation: slide-down 0.3s ease-out; }\n      "}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[95vh] overflow-hidden flex flex-col",style:{animation:"slide-up 0.4s ease-out"},children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-cyan-500 to-blue-500 text-white p-6 border-b border-blue-500/20",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center backdrop-blur-sm",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Send SMS"}),(0,t.jsx)("p",{className:"text-blue-100 text-sm mt-0.5",children:"Quick & instant patient communication"})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 bg-white/10 backdrop-blur px-4 py-3 rounded-lg w-fit",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-blue-200 text-xs uppercase tracking-widest",children:"To"}),(0,t.jsx)("p",{className:"text-white font-semibold",children:l})]}),n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"hidden sm:block w-px h-6 bg-white/20"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-blue-200 text-xs uppercase tracking-widest",children:"Phone"}),(0,t.jsxs)("p",{className:"text-white font-mono font-semibold",children:["üì± ",n]})]})]})]})]}),(0,t.jsx)("button",{onClick:d,className:"text-white/80 hover:text-white hover:bg-white/20 rounded-lg p-2 transition-all",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,t.jsxs)("div",{className:"overflow-y-auto flex-1 p-6 space-y-6",children:[!n&&(0,t.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-500 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("svg",{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"font-semibold text-amber-900",children:"No phone number found. Add contact info to send SMS."})]})}),(0,t.jsxs)("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg w-fit",children:[(0,t.jsx)("button",{onClick:()=>N("now"),className:"px-4 py-2 rounded-md font-medium transition-all ".concat("now"===w?"bg-white text-blue-600 shadow-md":"text-gray-600 hover:text-gray-900"),children:"üì§ Send Now"}),(0,t.jsx)("button",{onClick:()=>N("schedule"),className:"px-4 py-2 rounded-md font-medium transition-all ".concat("schedule"===w?"bg-white text-blue-600 shadow-md":"text-gray-600 hover:text-gray-900"),children:"‚è∞ Schedule"})]}),"schedule"===w&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-4 space-y-3",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-800",children:"Schedule for:"}),(0,t.jsx)("input",{type:"datetime-local",value:j,onChange:e=>y(e.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-4 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"‚è±Ô∏è Message will be sent at the scheduled time"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Quick Templates"}),(0,t.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Click to use"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{icon:"üìÖ",title:"Appointment Reminder",desc:"Remind about upcoming visit",template:"Hello ".concat(l,",\n\nüìÖ This is a friendly reminder about your appointment. Please arrive 10 minutes early.\n\nThank you!")},{icon:"üß™",title:"Test Results",desc:"Share test results",template:"Hello ".concat(l,",\n\nüß™ Your test results are ready! Please contact us at your earliest convenience to discuss.\n\nBest regards")},{icon:"üíô",title:"Follow-up Care",desc:"Post-treatment check",template:"Hello ".concat(l,",\n\nüíô Following up on your recent treatment. If you have any concerns or questions, please reach out.\n\nTake care!")},{icon:"üôè",title:"Thank You",desc:"Post-visit message",template:"Hello ".concat(l,",\n\nüôè Thank you for choosing us! We hope you're recovering well. Feel free to contact us anytime.\n\nWarm regards")}].map((e,s)=>(0,t.jsx)("button",{onClick:()=>{var t;m(t=e.template),b(t.length)},className:"group text-left p-4 border-2 border-gray-200 rounded-xl hover:border-blue-400 hover:bg-blue-50 transition-all hover:shadow-md transform hover:scale-105",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xl",children:e.icon}),(0,t.jsx)("h4",{className:"font-bold text-gray-900 group-hover:text-blue-600",children:e.title})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.desc})]}),(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-900",children:"Your Message"}),(0,t.jsx)("button",{onClick:()=>v(!f),className:"text-xl hover:scale-110 transition-transform",title:"Add emoji",children:"üòä"})]}),f&&(0,t.jsx)("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg border border-gray-200 grid grid-cols-8 gap-2",children:["üòä","üëç","‚ù§Ô∏è","‚ú®","üéâ","üìû","üíä","üè•","üë®‚Äç‚öïÔ∏è","üí™","üòÑ","üôè","‚úÖ","‚ö°","üåü","üíØ"].map(e=>(0,t.jsx)("button",{onClick:()=>{let t;m(t=c+e),b(t.length),v(!1)},className:"text-2xl hover:bg-white rounded-lg p-1 transition-all transform hover:scale-125",children:e},e))}),(0,t.jsx)("textarea",{value:c,onChange:e=>{let t=e.target.value;m(t),b(t.length)},placeholder:"Type your message here... Use templates above or compose your own.",rows:5,maxLength:480,className:"w-full rounded-xl border-2 border-gray-200 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-200/50 transition-all resize-none font-medium"}),(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm font-semibold text-gray-700",children:[p," / ",480," characters"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[L," SMS ‚Ä¢ ‚Çπ",S]})]}),p>160&&(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("span",{className:"inline-block px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-semibold",children:["‚ö†Ô∏è Will send as ",L," messages"]})})]}),(0,t.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full transition-all ".concat(p<=160?"bg-green-500":"bg-orange-500"),style:{width:"".concat(Math.min(p/480*100,100),"%")}})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-blue-900 mb-1",children:"üí° Tip"}),(0,t.jsx)("p",{className:"text-xs text-blue-800",children:"Messages are sent instantly to patient's phone."})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-green-900 mb-1",children:"üí∞ Cost"}),(0,t.jsxs)("p",{className:"text-xs text-green-800",children:["‚Çπ",S," for ",L," SMS message(s)"]})]})]}),g&&(0,t.jsx)("div",{className:"rounded-xl p-4 transition-all ".concat(g.success?"bg-gradient-to-r from-green-50 to-emerald-50 text-green-800 border border-green-300":"bg-gradient-to-r from-red-50 to-orange-50 text-red-800 border border-red-300"),style:{animation:"slide-down 0.3s ease-out"},children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[g.success?(0,t.jsx)("svg",{className:"w-6 h-6 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):(0,t.jsx)("svg",{className:"w-6 h-6 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold",children:g.success?"‚úÖ Success!":"‚ùå Error"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:g.message})]})]})})]}),(0,t.jsxs)("div",{className:"bg-gray-50 border-t border-gray-200 p-4 sm:p-6 flex gap-3",children:[(0,t.jsx)(o.Button,{onClick:k,disabled:h||!c.trim()||!n,className:"flex-1 bg-white border-2 border-blue-600 text-blue-600 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send SMS"]})}),(0,t.jsx)(o.Button,{variant:"outline",onClick:d,className:"px-6 border-2 text-gray-700 hover:text-gray-900",children:"Cancel"})]})]})]}):null}function d(){var e;let d=(0,a.useParams)();(0,a.useRouter)();let[c,m]=(0,s.useState)(null),[h,x]=(0,s.useState)(null),[g,u]=(0,s.useState)(null),[p,b]=(0,s.useState)(""),[f,v]=(0,s.useState)(null),[j,y]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),[k,L]=(0,s.useState)(null),[S,C]=(0,s.useState)(null),[M,A]=(0,s.useState)("IMPLANTS"),[T,B]=(0,s.useState)([]),[P,I]=(0,s.useState)(!1),[z,E]=(0,s.useState)(!1),[D,W]=(0,s.useState)(""),[H,F]=(0,s.useState)(!1),[V,R]=(0,s.useState)({rating:5,feedback:"",treatmentType:"SMILE DESIGNING",isPublished:!1}),[O,G]=(0,s.useState)(!1),[U,Y]=(0,s.useState)({isOpen:!1,title:"",message:"",type:"info"}),_=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",a=arguments.length>3?arguments[3]:void 0;Y({isOpen:!0,title:e,message:t,type:s,onConfirm:a})};(0,s.useEffect)(()=>{let e=!1;return(async()=>{let t=await r.patientsAPI.get(d.id);e||m(t.data)})(),N(null),v(null),b(""),L(null),C(null),()=>{e=!0,N(null),v(null),L(null),C(null)}},[d.id]);let q=async(e,t)=>{if(!e)return;"before"===t&&(N(URL.createObjectURL(e)),b("Uploading image..."));let s=new FormData;s.append("images",e),s.append("type",t);try{let e=await fetch("".concat("https://smilify.ai/api","/patients/").concat(d.id,"/before-after"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:s});if(!e.ok)throw Error("Upload failed");let a=await e.json(),l=await r.patientsAPI.get(d.id);if(m(l.data),"before"===t){let e=a.imagePath||a.path;N("".concat("https://smilify.ai/api","/").concat(e)),L(e),C(a.imageId||a._id),b('Before photo uploaded successfully. Click "Generate After Photo" to create AI enhancement.'),console.log("Image uploaded:",{imagePath:e,fullUrl:"".concat("https://smilify.ai/api","/").concat(e)})}else b("After photo uploaded successfully!");"before"===t?x(null):u(null),setTimeout(()=>b(""),5e3)}catch(e){console.error("Upload error:",e),b("Failed to upload ".concat(t," photo")),"before"===t&&N(null),setTimeout(()=>b(""),3e3)}},J=async()=>{if(!k){b("Please upload a Before photo first."),setTimeout(()=>b(""),3e3);return}b("Generating enhanced After photo..."),y(!0);try{let e=await fetch("".concat("https://smilify.ai/api","/patients/").concat(d.id,"/generate-image"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({type:"before",imageId:S,imagePath:k,treatmentType:M})}),t=await e.json();if(!e.ok){403===e.status?_("Limit Exceeded",t.error||"You have exceeded your monthly image conversion limit. Please contact your administrator.","warning"):b("AI generation failed. Please try again."),y(!1),setTimeout(()=>b(""),5e3);return}t.generatedImage?(v(t.generatedImage),b("enhanced After photo generated successfully!")):b("AI generation failed. Please try again.")}catch(e){console.error("Image generation error:",e),b("AI generation failed. Please try again.")}finally{y(!1),setTimeout(()=>b(""),5e3)}},K=async(e,t)=>{_("Confirm Delete","Are you sure you want to delete this ".concat(t," photo?"),"confirm",async()=>{try{if((await fetch("".concat("https://smilify.ai/api","/patients/").concat(d.id,"/delete-image"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({imagePath:e,type:t})})).ok){b("".concat("before"===t?"Before":"After"," photo deleted successfully."));let e=await r.patientsAPI.get(d.id);m(e.data)}else b("Failed to delete ".concat(t," photo."))}catch(e){console.error("Delete photo error:",e),b("Failed to delete ".concat(t," photo."))}setTimeout(()=>b(""),3e3)})},Q=async()=>{if(!k)return void _("Upload Required","Please upload a photo first","warning");I(!0),B([]);try{let e=await fetch("".concat("https://smilify.ai/api","/patients/").concat(d.id,"/generate-progress"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({imagePath:k,treatmentType:M})});if(e.ok){let t=await e.json();B(t.progressData||[]),W(t.progressPlan||""),E(!0)}else{let t=await e.json();403===e.status?_("Limit Exceeded",t.error||"You have exceeded your monthly image conversion limit. Please contact your administrator.","warning"):_("Error","Failed to generate progress images: ".concat(t.error||"Unknown error"),"error")}}catch(e){console.error("Generate progress images error:",e),_("Error","Failed to generate progress images","error")}finally{I(!1)}},X=async()=>{if(!f){b("No generated image to save."),setTimeout(()=>b(""),3e3);return}try{b("Saving After photo...");let e=await fetch(f),t=await e.blob(),s=new FormData;if(s.append("images",t,"after-".concat(Date.now(),".jpg")),s.append("type","after"),(await fetch("".concat("https://smilify.ai/api","/patients/").concat(d.id,"/before-after"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:s})).ok){b("After photo saved successfully!"),v(null);let e=await r.patientsAPI.get(d.id);m(e.data)}else b("Failed to save After photo.")}catch(e){console.error("Save after photo error:",e),b("Failed to save After photo.")}setTimeout(()=>b(""),3e3)},Z=async()=>{if(!V.feedback.trim())return void _("Required Field","Please provide feedback","warning");try{let e=await fetch("".concat("https://smilify.ai/api","/patients/").concat(d.id,"/testimonial"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(V)});if(e.ok){let t=await e.json();m(t),R({rating:5,feedback:"",treatmentType:"SMILE DESIGNING",isPublished:!1}),F(!1),_("Success","Testimonial added successfully!","success")}else{let t=await e.json();_("Error","Failed to add testimonial: ".concat(t.error||"Unknown error"),"error")}}catch(e){console.error("Save testimonial error:",e),_("Error","Failed to add testimonial","error")}},$=async e=>{_("Confirm Delete","Are you sure you want to delete this testimonial?","confirm",async()=>{try{if((await fetch("".concat("https://smilify.ai/api","/patients/").concat(d.id,"/testimonial/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok){let e=await r.patientsAPI.get(d.id);m(e.data),_("Success","Testimonial deleted successfully!","success")}else _("Error","Failed to delete testimonial","error")}catch(e){console.error("Delete testimonial error:",e),_("Error","Failed to delete testimonial","error")}})};if(!c)return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading patient information..."})]})});let ee=(e=>{if(!e)return(null==c?void 0:c.age)||null;let t=new Date(e),s=new Date,a=s.getFullYear()-t.getFullYear(),r=s.getMonth()-t.getMonth();return(r<0||0===r&&s.getDate()<t.getDate())&&a--,a})(c.dob),et=(c.beforeAfterImages||[]).filter(e=>"before"===e.type),es=(c.beforeAfterImages||[]).filter(e=>"after"===e.type);return(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-2 sm:space-y-2 pb-24 lg:pb-8",children:[(0,t.jsx)(l.Card,{className:"shadow-lg border-gray-200 bg-white",children:(0,t.jsx)(l.CardContent,{className:"p-4 sm:p-6",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start gap-4 sm:gap-6",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mx-auto sm:mx-0",children:(0,t.jsx)("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full overflow-hidden bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white text-2xl sm:text-3xl font-bold shadow-lg",children:c.images&&c.images[0]?(0,t.jsx)("img",{src:"".concat("https://smilify.ai/api","/").concat(c.images[0].path),alt:c.name,className:"w-full h-full object-cover"}):c.name.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"flex-grow w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-3 sm:mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1 text-center sm:text-left",children:c.name}),ee&&(0,t.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base text-center sm:text-left",children:["Age ",ee]})]}),(0,t.jsxs)("button",{onClick:()=>G(!0),className:"w-full sm:w-auto bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-semibold py-2.5 px-4 rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-2",title:"Send SMS to patient",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16h8m-1-6H9m6 0h.01M9 12h.01M15 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Send SMS"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:gap-4 mb-3 sm:mb-4",children:[c.contact&&(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-blue-50 p-2 sm:p-0 sm:bg-transparent rounded-lg",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 sm:bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),(0,t.jsx)("span",{className:"text-sm sm:text-base text-gray-700",children:c.contact})]}),c.email&&(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-blue-50 p-2 sm:p-0 sm:bg-transparent rounded-lg",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 sm:bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,t.jsx)("span",{className:"text-sm sm:text-base text-gray-700 truncate",children:c.email})]}),(c.city||c.state)&&(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-blue-50 p-2 sm:p-0 sm:bg-transparent rounded-lg",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 sm:bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsxs)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,t.jsx)("span",{className:"text-sm sm:text-base text-gray-700",children:"".concat(c.city||"").concat(c.city&&c.state?", ":"").concat(c.state||"")})]}),(c.lastVisit||c.updatedAt)&&(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-blue-50 p-2 sm:p-0 sm:bg-transparent rounded-lg",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 sm:bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,t.jsxs)("span",{className:"text-sm sm:text-base text-gray-700",children:["Last visit: ",(e=c.lastVisit||c.updatedAt)?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"]})]})]}),c.treatmentHistory&&c.treatmentHistory.length>0&&(0,t.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,t.jsx)("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2",children:"Treatment History"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:c.treatmentHistory.map((e,s)=>(0,t.jsx)("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-blue-50 text-blue-700 rounded-full text-xs sm:text-sm font-medium",children:e},s))})]}),c.nextAppointment&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 sm:p-3 bg-blue-50 rounded-lg",children:[(0,t.jsx)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-blue-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsxs)("span",{className:"text-xs sm:text-sm text-blue-700 font-medium",children:["Next Appointment: ",c.nextAppointment.date," at ",c.nextAppointment.time]})]})]})]})})}),(0,t.jsx)(l.Card,{className:"shadow-lg border-gray-200 bg-white",children:(0,t.jsxs)(l.CardContent,{className:"p-4 sm:p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6",children:[(0,t.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:(0,t.jsxs)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Patient Photography"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,t.jsx)("label",{className:"block text-xs sm:text-sm font-bold text-gray-800 mb-2 sm:mb-3 uppercase tracking-wide",children:"Select Treatment Type"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:["IMPLANTS","SMILE DESIGNING","TEETH WHITENING","BRACES"].map(e=>(0,t.jsx)("button",{onClick:()=>A(e),className:"px-3 sm:px-6 py-1.5 sm:py-2.5 rounded-full font-semibold text-xs sm:text-sm transition-all ".concat(M===e?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"bg-white text-gray-600 border-2 border-gray-300 hover:border-blue-500 hover:text-blue-600"),children:e},e))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,t.jsx)("h3",{className:"text-base font-bold text-gray-900 uppercase tracking-wide",children:"Before Photo"})]}),w&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)("div",{className:"relative aspect-square overflow-hidden rounded-lg border-2 border-gray-200 group",children:[(0,t.jsx)("img",{src:w,alt:"Before",className:"w-full h-full object-cover",onError:e=>{console.error("Failed to load uploaded before image:",w),e.target.style.display="none"}}),(0,t.jsx)("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-xs px-3 py-1.5 rounded-full font-bold shadow-lg",children:"Before Photo"}),(0,t.jsx)("button",{onClick:()=>{N(null),v(null),x(null),L(null),C(null),b("Images cleared. You can upload a new Before photo."),setTimeout(()=>b(""),3e3)},className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transition-all opacity-0 group-hover:opacity-100",title:"Remove image",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),!f&&!j&&(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,t.jsxs)("button",{onClick:J,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Generate After Photo"]}),(0,t.jsx)("button",{onClick:Q,disabled:P,className:"w-full bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating Progress..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Show Monthly Progress Images"]})})]})]}),!w&&(0,t.jsxs)("div",{className:"border-2 border-dashed border-blue-300 rounded-xl p-10 text-center hover:border-blue-500 hover:bg-blue-50 transition-all bg-gradient-to-br from-blue-50 to-indigo-50",children:[(0,t.jsx)("input",{type:"file",id:"before-photo",accept:"image/*",disabled:j,onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];s&&(x(s),q(s,"before"))},className:"hidden"}),(0,t.jsxs)("label",{htmlFor:"before-photo",className:"block ".concat(j?"opacity-50 cursor-not-allowed":"cursor-pointer"),children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,t.jsx)("p",{className:"text-gray-700 font-medium mb-3",children:"Drag & drop or click to upload"}),(0,t.jsx)("span",{className:"inline-block px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg transform hover:scale-105",children:"Select File"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-600 to-blue-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})})}),(0,t.jsx)("h3",{className:"text-base font-bold text-gray-900 uppercase tracking-wide",children:"After Photo"})]}),f&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"relative aspect-square overflow-hidden rounded-lg border-2 border-blue-500 shadow-xl group",children:[(0,t.jsx)("img",{src:f,alt:"Generated After",className:"w-full h-full object-cover",onError:e=>{console.error("Failed to load generated after image:",f),e.target.style.display="none"}}),(0,t.jsxs)("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-indigo-600 to-blue-600 text-white text-xs px-3 py-1.5 rounded-full font-bold flex items-center gap-1 shadow-lg",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),"Generated"]}),(0,t.jsx)("button",{onClick:()=>{v(null),b("After photo cleared."),setTimeout(()=>b(""),3e3)},className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transition-all opacity-0 group-hover:opacity-100",title:"Remove generated image",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("button",{onClick:X,className:"mt-3 w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save After Photo"]}),"                "]}),j&&(0,t.jsx)("div",{className:"mb-4 p-8 border-2 border-blue-300 rounded-lg bg-blue-50",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-3"}),(0,t.jsx)("p",{className:"text-blue-700 font-medium",children:"Generating enhanced After photo..."}),(0,t.jsx)("p",{className:"text-blue-600 text-sm mt-2",children:"This may take a few moments"})]})}),!f&&!j&&(0,t.jsxs)("div",{className:"border-2 border-dashed border-indigo-300 rounded-xl p-10 text-center hover:border-indigo-500 hover:bg-indigo-50 transition-all bg-gradient-to-br from-indigo-50 to-blue-50",children:[(0,t.jsx)("input",{type:"file",id:"after-photo",accept:"image/*",disabled:j,onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];s&&(u(s),q(s,"after"))},className:"hidden"}),(0,t.jsxs)("label",{htmlFor:"after-photo",className:"block ".concat(j?"opacity-50 cursor-not-allowed":"cursor-pointer"),children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,t.jsx)("p",{className:"text-gray-700 font-medium mb-3",children:"Drag & drop or click to upload"}),(0,t.jsx)("span",{className:"inline-block px-6 py-2.5 bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-lg font-semibold hover:from-indigo-700 hover:to-blue-700 transition-all shadow-md hover:shadow-lg transform hover:scale-105",children:"Select File"})]})]})]})]}),z&&T.length>0&&(0,t.jsxs)("div",{className:"mt-6 border border-green-200 rounded-lg overflow-hidden bg-gradient-to-br from-green-50 to-teal-50",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,t.jsx)("h3",{className:"text-white font-bold text-lg",children:"Monthly Treatment Progress Timeline"})]}),(0,t.jsx)("button",{onClick:()=>E(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-1 transition-all",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("div",{className:"space-y-6",children:T.map((e,s)=>(0,t.jsxs)("div",{className:"relative",children:[s<T.length-1&&(0,t.jsx)("div",{className:"absolute left-6 top-32 bottom-0 w-1 bg-gradient-to-b from-green-400 to-teal-400 transform translate-y-4"}),(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-600 to-teal-600 rounded-full flex items-center justify-center shadow-lg z-10",children:(0,t.jsx)("span",{className:"text-white font-bold text-lg",children:e.month})}),(0,t.jsxs)("div",{className:"mt-1 text-xs font-semibold text-green-700 bg-green-100 px-2 py-1 rounded-full",children:[e.percentage,"%"]})]}),(0,t.jsxs)("div",{className:"flex-grow bg-white rounded-lg border border-green-200 shadow-md overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 bg-gradient-to-r from-green-100 to-teal-100 border-b border-green-200",children:[(0,t.jsxs)("h4",{className:"font-bold text-gray-900 text-lg",children:["Month ",e.month]}),(0,t.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.description})]}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("img",{src:e.originalImage,alt:"Progress Month ".concat(e.month),className:"w-full rounded-lg shadow-md"})})]})]})]},s))}),(0,t.jsx)("div",{className:"mt-6 p-4 bg-white rounded-lg border border-green-200",children:(0,t.jsxs)("p",{className:"text-sm text-gray-700 text-center",children:[(0,t.jsx)("span",{className:"font-semibold text-green-700",children:"üìä Progress Overview:"})," These generated images show the expected treatment progression over time. Actual results may vary based on individual response to treatment."]})})]})]}),p&&(0,t.jsx)("div",{className:"mt-4 px-4 py-3 rounded-lg text-sm font-medium ".concat(p.includes("Failed")?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"),children:p})]})]})}),(et.length>0||es.length>0)&&(0,t.jsx)(l.Card,{className:"shadow-lg border-gray-200 bg-white",children:(0,t.jsxs)(l.CardContent,{className:"p-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,t.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Saved Treatment Photos"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[et.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2",children:(0,t.jsxs)("span",{className:"bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-sm",children:["Before Photos (",et.length,")"]})}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:et.map((e,s)=>(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow group",children:[(0,t.jsxs)("div",{className:"aspect-square overflow-hidden",children:[(0,t.jsx)("img",{src:"".concat("https://smilify.ai/api","/").concat(e.path),alt:"Before ".concat(s+1),className:"w-full h-full object-cover",onError:e=>{let t=e.target.parentElement;t&&(t.innerHTML='\n                                  <div class="w-full h-full flex items-center justify-center bg-gray-100">\n                                    <div class="text-center text-gray-400">\n                                      <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />\n                                      </svg>\n                                      <p class="text-xs">Image not available</p>\n                                    </div>\n                                  </div>\n                                ')}}),(0,t.jsx)("div",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"Before"})]}),(0,t.jsx)("div",{className:"bg-gray-50 px-3 py-2 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-xs text-gray-700 font-medium",children:e.treatmentDate?new Date(e.treatmentDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Date not available"})]})}),(0,t.jsx)("button",{onClick:()=>K(e.path,"before"),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transition-all lg:opacity-0 lg:group-hover:opacity-100",title:"Delete photo",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},s))})]}),es.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2",children:(0,t.jsxs)("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm",children:["After Photos (",es.length,")"]})}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:es.map((e,s)=>(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow group",children:[(0,t.jsxs)("div",{className:"aspect-square overflow-hidden",children:[(0,t.jsx)("img",{src:"".concat("https://smilify.ai/api","/").concat(e.path),alt:"After ".concat(s+1),className:"w-full h-full object-cover",onError:e=>{let t=e.target.parentElement;t&&(t.innerHTML='\n                                  <div class="w-full h-full flex items-center justify-center bg-gray-100">\n                                    <div class="text-center text-gray-400">\n                                      <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />\n                                      </svg>\n                                      <p class="text-xs">Image not available</p>\n                                    </div>\n                                  </div>\n                                ')}}),(0,t.jsx)("div",{className:"absolute top-2 left-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"After"})]}),(0,t.jsx)("div",{className:"bg-gray-50 px-3 py-2 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-xs text-gray-700 font-medium",children:e.treatmentDate?new Date(e.treatmentDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Date not available"})]})}),(0,t.jsx)("button",{onClick:()=>K(e.path,"after"),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transition-all lg:opacity-0 lg:group-hover:opacity-100",title:"Delete photo",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},s))})]})]}),0===et.length&&0===es.length&&(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"No saved photos yet"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Upload photos in the section above to save them"})]})]})}),(0,t.jsx)(l.Card,{className:"shadow-lg border-gray-200 bg-white",children:(0,t.jsxs)(l.CardContent,{className:"p-4 sm:p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4 sm:mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Patient Testimonials"})]}),(0,t.jsx)(o.Button,{onClick:()=>F(!H),className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-3 sm:px-4 py-2 rounded-lg shadow-md text-sm sm:text-base w-full sm:w-auto",children:H?"Cancel":"+ Add Testimonial"})]}),H&&(0,t.jsxs)("div",{className:"mb-4 sm:mb-6 p-4 sm:p-6 bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4",children:"Add New Testimonial"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),(0,t.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(e=>(0,t.jsx)("button",{onClick:()=>R({...V,rating:e}),className:"focus:outline-none",children:(0,t.jsx)("svg",{className:"w-8 h-8 ".concat(e<=V.rating?"text-amber-500":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Treatment Type"}),(0,t.jsxs)("select",{value:V.treatmentType,onChange:e=>R({...V,treatmentType:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent text-gray-900 bg-white",children:[(0,t.jsx)("option",{value:"SMILE DESIGNING",children:"Smile Designing"}),(0,t.jsx)("option",{value:"IMPLANTS",children:"Implants"}),(0,t.jsx)("option",{value:"TEETH WHITENING",children:"Teeth Whitening"}),(0,t.jsx)("option",{value:"BRACES",children:"Braces"}),(0,t.jsx)("option",{value:"OTHER",children:"Other"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback"}),(0,t.jsx)("textarea",{value:V.feedback,onChange:e=>R({...V,feedback:e.target.value}),placeholder:"Share your experience with the treatment...",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent text-gray-900 bg-white"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isPublished",checked:V.isPublished,onChange:e=>R({...V,isPublished:e.target.checked}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),(0,t.jsx)("label",{htmlFor:"isPublished",className:"text-sm text-gray-700",children:"Make this testimonial public"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(o.Button,{onClick:Z,className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-6 py-2 rounded-lg",children:"Save Testimonial"}),(0,t.jsx)(o.Button,{onClick:()=>F(!1),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-lg",children:"Cancel"})]})]})]}),c.testimonials&&c.testimonials.length>0?(0,t.jsx)("div",{className:"space-y-4",children:c.testimonials.map(e=>(0,t.jsx)("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(s=>(0,t.jsx)("svg",{className:"w-5 h-5 ".concat(s<=e.rating?"text-amber-500":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},s))}),(0,t.jsx)("span",{className:"text-xs font-medium px-2 py-1 bg-amber-100 text-amber-700 rounded-full",children:e.treatmentType.replace("_"," ")}),e.isPublished&&(0,t.jsx)("span",{className:"text-xs font-medium px-2 py-1 bg-green-100 text-green-700 rounded-full",children:"Published"})]}),(0,t.jsx)("p",{className:"text-gray-700 leading-relaxed",children:e.feedback}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,t.jsx)("button",{onClick:()=>$(e._id),className:"ml-4 text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-50 transition-all",title:"Delete testimonial",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},e._id))}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"No testimonials yet"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:'Click "Add Testimonial" to collect patient feedback'})]})]})}),(0,t.jsx)(n.Modal,{isOpen:U.isOpen,onClose:()=>{Y({...U,isOpen:!1})},title:U.title,message:U.message,type:U.type,onConfirm:U.onConfirm,confirmText:"confirm"===U.type?"Yes, Delete":"OK",cancelText:"Cancel"}),(0,t.jsx)(i,{isOpen:O,onClose:()=>G(!1),patientId:(null==c?void 0:c._id)||"",patientName:(null==c?void 0:c.name)||"Patient",patientPhone:null==c?void 0:c.contact})]})}e.s(["default",()=>d],15548)}]);