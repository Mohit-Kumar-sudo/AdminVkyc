(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50002,e=>{"use strict";var t=e.i(39057),a=e.i(48277),r=e.i(30668),s=e.i(18033),l=e.i(53904),n=e.i(96086);e.s(["default",0,()=>{let[e,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[c,x]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),{user:u,token:p}=(0,l.useAuth)(),g=(0,n.useRouter)();(0,r.useEffect)(()=>{u&&"admin"===u.role?g.push("/dashboard/admin/pricing"):f()},[u]);let f=async()=>{try{let e=await s.default.get("".concat("https://smilify.ai/api","/plans")),t=Array.isArray(e.data)?e.data:e.data.data||[];i(t),x(null)}catch(e){console.error("Failed to fetch plans:",e),x("Failed to load plans. Please try again later.")}finally{d(!1)}},y=async e=>{if(!u||!p)return void g.push("/login?redirect=/dashboard/pricing");if(!u.id||!e)return void alert("Missing required information. Please try again.");h(e);try{if(!await new Promise(e=>{var t;if(null==(t=window)?void 0:t.Razorpay)return void e(!0);let a=document.createElement("script");a.src="https://checkout.razorpay.com/v1/checkout.js",a.async=!0,a.onload=()=>e(!0),a.onerror=()=>e(!1),document.body.appendChild(a)})){alert("Payment gateway failed to load"),h(null);return}console.log("Creating order with:",{userId:u.id,planId:e});let{orderId:a,amount:r,currency:l,key:n}=(await s.default.post("".concat("https://smilify.ai/api","/payments/create-order"),{userId:u.id,planId:e},{headers:{Authorization:"Bearer ".concat(p)}})).data;new window.Razorpay({key:n||t.default.env.NEXT_PUBLIC_RAZORPAY_KEY_ID,amount:r,currency:l,order_id:a,handler:async t=>{try{await s.default.post("".concat("https://smilify.ai/api","/payments/verify"),{razorpay_order_id:null==t?void 0:t.razorpay_order_id,razorpay_payment_id:null==t?void 0:t.razorpay_payment_id,razorpay_signature:null==t?void 0:t.razorpay_signature,planId:e},{headers:{Authorization:"Bearer ".concat(p)}}),g.push("/dashboard/subscription")}catch(e){var a,r;alert((null==e||null==(r=e.response)||null==(a=r.data)?void 0:a.error)||"Payment verified but failed to update subscription")}},prefill:{name:(null==u?void 0:u.name)||"",email:(null==u?void 0:u.email)||"",contact:(null==u?void 0:u.phone)||""},theme:{color:"#2563eb"}}).open()}catch(e){var a,r,l,n,i;console.error("Payment error:",(null==e||null==(a=e.response)?void 0:a.data)||e),alert((null==e||null==(l=e.response)||null==(r=l.data)?void 0:r.error)||(null==e||null==(i=e.response)||null==(n=i.data)?void 0:n.message)||"Failed to create order. Please try again.")}finally{h(null)}};return o?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading plans..."})]})}):c?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("p",{className:"text-red-600 font-medium text-lg",children:c})]})}):0===e.length?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,a.jsx)("p",{className:"text-gray-600 font-medium text-lg",children:"No plans available at the moment"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Please check back later or contact support"})]})}):(0,a.jsx)("div",{className:"bg-white min-h-screen p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsxs)("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-900 mb-2",children:["Simple, Transparent ",(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-cyan-400 bg-clip-text text-transparent",children:"Pricing"})]}),(0,a.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Choose the perfect plan for your practice. Upgrade or downgrade anytime."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto pt-8 pb-8 items-start",children:e.map((t,r)=>{let s,l,n,i=1===r&&e.length>=3;return(0,a.jsxs)("div",{className:"relative group flex flex-col h-full ".concat("mt-6"),children:[i&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 z-10",children:(0,a.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-cyan-400 text-white text-sm font-bold px-6 py-2 rounded-full shadow-md whitespace-nowrap",children:"MOST POPULAR"})})}),(0,a.jsxs)("div",{className:"relative bg-white p-8 rounded-3xl flex flex-col flex-1 ".concat(i?"shadow-[0_8px_30px_rgb(59,130,246,0.3)] hover:shadow-[0_12px_40px_rgb(59,130,246,0.4)] border border-blue-100":"shadow-sm hover:shadow-md border border-gray-200"," transition-all duration-300"),children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),(0,a.jsx)("div",{className:"mb-6",children:(l=18*(s=t.price)/100,n=s+l,(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("span",{className:"text-gray-500 text-xl font-semibold",children:t.currency}),(0,a.jsx)("span",{className:"text-5xl font-extrabold ".concat(i?"bg-gradient-to-r from-blue-500 to-cyan-400 bg-clip-text text-transparent":"text-gray-900"),children:n.toFixed(0)}),(0,a.jsxs)("span",{className:"text-gray-600 text-lg",children:["/",t.interval||"month"]})]}),(0,a.jsxs)("div",{className:"mt-3 text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{children:["Base: ",t.currency," ",s.toFixed(2)]}),(0,a.jsxs)("div",{className:"text-green-600 font-semibold",children:["+ GST (18%): ",t.currency," ",l.toFixed(2)]})]})]}))}),(0,a.jsx)("ul",{className:"space-y-4 mb-8 flex-grow min-h-[280px]",children:(t.features||[]).map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center ".concat(i?"bg-gradient-to-r from-blue-500 to-cyan-400":"bg-green-100"),children:(0,a.jsx)("svg",{className:"w-4 h-4 ".concat(i?"text-white":"text-green-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("span",{className:"text-gray-700",children:e})]},t))}),(0,a.jsx)("button",{disabled:null!==m,onClick:()=>y(t._id),className:"group/btn relative block w-full text-center py-4 rounded-xl font-bold transition overflow-hidden disabled:opacity-50 disabled:cursor-not-allowed mt-auto ".concat(i?"bg-gradient-to-r from-blue-500 to-cyan-400 text-white hover:shadow-lg":"bg-gray-100 text-gray-900 hover:bg-gray-200"),children:m===t._id?(0,a.jsxs)("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):(0,a.jsxs)("span",{className:"relative z-10 flex items-center justify-center gap-2",children:["Get Started",(0,a.jsx)("svg",{className:"w-4 h-4 group-hover/btn:translate-x-1 transition",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})]},t._id)})})]})})}])}]);