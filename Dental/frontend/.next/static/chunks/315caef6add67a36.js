(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53904,e=>{"use strict";var t=e.i(48277),o=e.i(30668),a=e.i(1831);let r=(0,o.createContext)(void 0);function l(e){let{children:l}=e,[s,n]=(0,o.useState)(null),[u,i]=(0,o.useState)(null),[c,g]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&(i(e),n(JSON.parse(t)))};return e(),g(!1),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);let S=async(e,t)=>{let{user:o,token:r}=(await a.authAPI.login(e,t)).data;n(o),i(r),localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(o))},d=async(e,t,o,r,l)=>{let{user:s,token:u}=(await a.authAPI.register(e,t,o,r,l)).data;n(s),i(u),localStorage.setItem("token",u),localStorage.setItem("user",JSON.stringify(s))},m=async e=>{let{user:t,token:o}=(await a.authAPI.loginWithGoogle(e)).data;n(t),i(o),localStorage.setItem("token",o),localStorage.setItem("user",JSON.stringify(t))};return(0,t.jsx)(r.Provider,{value:{user:s,token:u,login:S,register:d,loginWithGoogle:m,logout:()=>{n(null),i(null),localStorage.removeItem("token"),localStorage.removeItem("user")},isLoading:c},children:l})}function s(){let e=(0,o.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}e.s(["AuthProvider",()=>l,"useAuth",()=>s])}]);