(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96086,(e,t,a)=>{t.exports=e.r(9187)},12059,e=>{"use strict";var t=e.i(39057),a=e.i(48277),r=e.i(30668),l=e.i(18033),s=e.i(53904),n=e.i(96086);e.s(["default",0,()=>{let[e,i]=(0,r.useState)([]),[d,o]=(0,r.useState)(!0),[c,x]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),{user:p,token:h,isLoading:g}=(0,s.useAuth)(),b=(0,n.useRouter)();(0,r.useEffect)(()=>{g||(p?"admin"===p.role?b.replace("/dashboard/admin/pricing"):b.replace("/dashboard/pricing"):y())},[p,g,b]);let y=async()=>{try{let e=await l.default.get("".concat("https://smilify.ai/api","/plans"));i(Array.isArray(e.data)?e.data:e.data.data||[])}catch(a){var e,t;x((null==a||null==(t=a.response)||null==(e=t.data)?void 0:e.error)||"Failed to load plans")}finally{o(!1)}},f=async e=>{if(!p||!h)return void b.push("/login?redirect=/pricing");if(!p.id||!e)return void alert("Missing required information. Please try again.");m(e);try{if(!await new Promise(e=>{var t;if(null==(t=window)?void 0:t.Razorpay)return void e(!0);let a=document.createElement("script");a.src="https://checkout.razorpay.com/v1/checkout.js",a.async=!0,a.onload=()=>e(!0),a.onerror=()=>e(!1),document.body.appendChild(a)})){alert("Payment gateway failed to load"),m(null);return}console.log("Creating order with:",{userId:p.id,planId:e});let{orderId:a,amount:r,currency:s,key:n}=(await l.default.post("".concat("https://smilify.ai/api","/payments/create-order"),{userId:p.id,planId:e},{headers:{Authorization:"Bearer ".concat(h)}})).data;new window.Razorpay({key:n||t.default.env.NEXT_PUBLIC_RAZORPAY_KEY_ID,amount:r,currency:s,order_id:a,handler:async t=>{try{await l.default.post("".concat("https://smilify.ai/api","/payments/verify"),{razorpay_order_id:null==t?void 0:t.razorpay_order_id,razorpay_payment_id:null==t?void 0:t.razorpay_payment_id,razorpay_signature:null==t?void 0:t.razorpay_signature,planId:e},{headers:{Authorization:"Bearer ".concat(h)}}),b.push("/dashboard/subscription")}catch(e){var a,r;alert((null==e||null==(r=e.response)||null==(a=r.data)?void 0:a.error)||"Payment verified but failed to update subscription")}},prefill:{name:(null==p?void 0:p.name)||"",email:(null==p?void 0:p.email)||"",contact:(null==p?void 0:p.phone)||""},theme:{color:"#2563eb"}}).open()}catch(e){var a,r,s,n,i;console.error("Payment error:",(null==e||null==(a=e.response)?void 0:a.data)||e),alert((null==e||null==(s=e.response)||null==(r=s.data)?void 0:r.error)||(null==e||null==(i=e.response)||null==(n=i.data)?void 0:n.message)||"Failed to create order. Please try again.")}finally{m(null)}};return g||p?null:d?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"Loading plans..."})]})}):c?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center bg-white p-8 rounded-lg shadow-lg",children:[(0,a.jsx)("div",{className:"text-red-500 text-5xl mb-4",children:"âš ï¸"}),(0,a.jsx)("p",{className:"text-gray-700 text-lg mb-6",children:c}),(0,a.jsx)("button",{onClick:y,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Try Again"})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 pt-16 pb-16",children:[(0,a.jsxs)("div",{className:"text-center mb-16",children:[(0,a.jsx)("div",{className:"inline-block px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold mb-4",children:"ðŸ’Ž Pricing Plans"}),(0,a.jsx)("h1",{className:"text-5xl md:text-6xl font-extrabold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Choose Your Perfect Plan"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Elevate your dental practice with our comprehensive management solutions"})]}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“‹"}),(0,a.jsx)("p",{className:"text-xl text-gray-500",children:"No plans available"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 items-start",children:e.map((t,r)=>{let l,s,n,i=1===r&&e.length>=3;return(0,a.jsxs)("div",{className:"relative bg-white rounded-2xl border border-gray-200 \n                shadow-[0_10px_30px_rgba(0,0,0,0.06)] \n                hover:shadow-[0_20px_50px_rgba(0,0,0,0.10)] \n                transition-all duration-300 transform hover:-translate-y-2 \n                flex flex-col overflow-hidden",children:[i&&(0,a.jsx)("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 z-10",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-2 rounded-full text-sm font-bold shadow-md whitespace-nowrap",children:"â­ MOST POPULAR"})}),(0,a.jsxs)("div",{className:"p-8 flex flex-col flex-1",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full mb-4 ".concat(i?"bg-gradient-to-br from-blue-500 to-purple-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"text-3xl",children:0===r?"ðŸŒ±":1===r?"ðŸš€":"ðŸ‘‘"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:t.name})]}),(0,a.jsx)("div",{className:"text-center mb-8",children:(s=18*(l=t.price)/100,n=l+s,(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-baseline justify-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-500 text-2xl font-semibold",children:t.currency}),(0,a.jsx)("span",{className:"text-6xl font-extrabold ".concat(i?"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent":"text-gray-900"),children:n.toFixed(0)}),(0,a.jsx)("span",{className:"text-gray-500 text-xl self-end mb-2",children:"/month"})]}),(0,a.jsxs)("div",{className:"mt-3 text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{children:["Base: ",t.currency," ",l.toFixed(2)]}),(0,a.jsxs)("div",{className:"text-green-600 font-semibold",children:["+ GST (18%): ",t.currency," ",s.toFixed(2)]})]})]}))}),(0,a.jsx)("div",{className:"space-y-4 mb-8 flex-grow min-h-[260px]",children:(t.features||[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("span",{className:"text-gray-700",children:e})]},t))}),(0,a.jsx)("button",{disabled:null!==u,onClick:()=>f(t._id),className:"w-full py-4 px-6 rounded-xl font-bold text-lg \n                    transition-all duration-300 transform hover:scale-105 \n                    disabled:opacity-50 disabled:cursor-not-allowed mt-auto \n                    ".concat(i?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md hover:shadow-lg":"bg-gray-900 text-white hover:bg-gray-800 shadow-sm"),children:u===t._id?"Processing...":"Get Started â†’"})]})]},t._id)})})]})})}])}]);