module.exports=[44597,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(4600),e=a.i(97867),f=a.i(94703),g=a.i(98983),h=a.i(93609);function i(){let{user:a}=(0,g.useAuth)(),i=(0,h.useRouter)(),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)({name:"",price:0,currency:"USD",interval:"month",features:[],status:"active"}),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)({isOpen:!1,title:"",message:"",type:"info"}),x=(a,b,c="info",d)=>{w({isOpen:!0,title:a,message:b,type:c,onConfirm:d})};(0,c.useEffect)(()=>{a?.role!=="admin"?i.push("/dashboard"):y()},[a,i]);let y=async()=>{try{let a=await fetch("https://smilify.ai/api/admin/plans",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(a.ok){let b=await a.json();k(b)}}catch(a){console.error("Failed to fetch plans:",a),x("Error","Failed to load plans","error")}finally{m(!1)}},z=()=>{t.trim()&&(s({...r,features:[...r.features,t.trim()]}),u(""))},A=async a=>{if(a.preventDefault(),!r.name||r.price<0)return void x("Error","Please fill in all required fields","error");try{let a=p?`https://smilify.ai/api/admin/plans/${p._id}`:"https://smilify.ai/api/admin/plans",b=await fetch(a,{method:p?"PATCH":"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(b.ok)x("Success",`Plan ${p?"updated":"created"} successfully`,"success"),o(!1),y();else{let a=await b.json();x("Error",a.error||"Failed to save plan","error")}}catch(a){console.error("Error saving plan:",a),x("Error","Failed to save plan","error")}};return l?(0,b.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,b.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:"Plan Management"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Create and manage subscription plans"})]}),(0,b.jsxs)(e.Button,{onClick:()=>{q(null),s({name:"",price:0,currency:"USD",interval:"month",features:[],status:"active"}),u(""),o(!0)},className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white px-6 py-3 rounded-lg shadow-lg hover:shadow-xl transition-all flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Plan"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)(d.Card,{className:"border-0 shadow-md",children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total Plans"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:j.length})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})})}),(0,b.jsx)(d.Card,{className:"border-0 shadow-md",children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Active Plans"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-green-600 mt-1",children:j.filter(a=>"active"===a.status).length})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})}),(0,b.jsx)(d.Card,{className:"border-0 shadow-md",children:(0,b.jsx)(d.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Inactive/Archived"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-600 mt-1",children:j.filter(a=>"active"!==a.status).length})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})})]})})})]}),(0,b.jsxs)(d.Card,{className:"border-0 shadow-lg",children:[(0,b.jsx)(d.CardHeader,{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b",children:(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"All Plans"]})}),(0,b.jsx)(d.CardContent,{className:"p-0",children:0===j.length?(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,b.jsx)("p",{className:"text-gray-600 font-medium",children:"No plans created yet"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:'Click "Create Plan" to add your first plan'})]}):(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:j.map(a=>(0,b.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:a.name}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${"active"===a.status?"bg-green-100 text-green-700 border border-green-300":"inactive"===a.status?"bg-yellow-100 text-yellow-700 border border-yellow-300":"bg-gray-100 text-gray-700 border border-gray-300"}`,children:a.status.toUpperCase()})]}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2 mb-3",children:[(0,b.jsxs)("span",{className:"text-3xl font-bold text-blue-600",children:[a.currency," $",a.price]}),(0,b.jsxs)("span",{className:"text-gray-600",children:["/ ",a.interval]})]}),a.features.length>0&&(0,b.jsx)("div",{className:"space-y-1",children:a.features.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a]},c))}),(0,b.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:["Created: ",new Date(a.createdAt).toLocaleDateString()]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{onClick:()=>{q(a),s({name:a.name,price:a.price,currency:a.currency,interval:a.interval,features:[...a.features],status:a.status}),u(""),o(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,b.jsxs)(e.Button,{onClick:()=>{x("Confirm Delete",`Are you sure you want to archive "${a.name}"?`,"confirm",async()=>{try{(await fetch(`https://smilify.ai/api/admin/plans/${a._id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?(x("Success","Plan archived successfully","success"),y()):x("Error","Failed to archive plan","error")}catch(a){console.error("Error deleting plan:",a),x("Error","Failed to archive plan","error")}})},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Archive"]})]})]})},a._id))})})]}),n&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,b.jsx)(d.Card,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:p?"Edit Plan":"Create New Plan"}),(0,b.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plan Name *"}),(0,b.jsx)("input",{type:"text",value:r.name,onChange:a=>s({...r,name:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",placeholder:"e.g., Pro Plan",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price *"}),(0,b.jsx)("input",{type:"number",value:r.price,onChange:a=>s({...r,price:parseFloat(a.target.value)}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",placeholder:"00.00",required:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),(0,b.jsxs)("select",{value:r.currency,onChange:a=>s({...r,currency:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",children:[(0,b.jsx)("option",{value:"USD",children:"USD"}),(0,b.jsx)("option",{value:"EUR",children:"EUR"}),(0,b.jsx)("option",{value:"GBP",children:"GBP"}),(0,b.jsx)("option",{value:"INR",children:"INR"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Billing Interval"}),(0,b.jsxs)("select",{value:r.interval,onChange:a=>s({...r,interval:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",children:[(0,b.jsx)("option",{value:"month",children:"Monthly"}),(0,b.jsx)("option",{value:"year",children:"Yearly"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,b.jsxs)("select",{value:r.status,onChange:a=>s({...r,status:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",children:[(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"inactive",children:"Inactive"}),(0,b.jsx)("option",{value:"archived",children:"Archived"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Features"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,b.jsx)("input",{type:"text",value:t,onChange:a=>u(a.target.value),onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),z()),className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900",placeholder:"Add a feature..."}),(0,b.jsx)(e.Button,{type:"button",onClick:z,className:"px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Add"})]}),r.features.length>0&&(0,b.jsx)("div",{className:"space-y-2 mt-3",children:r.features.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:a})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{s({...r,features:r.features.filter((a,b)=>b!==c)})},className:"text-red-600 hover:text-red-700",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},c))})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(e.Button,{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white py-3 rounded-lg font-semibold shadow-md hover:shadow-lg transition-all",children:p?"Update Plan":"Create Plan"}),(0,b.jsx)(e.Button,{type:"button",onClick:()=>o(!1),className:"px-6 bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold transition-all",children:"Cancel"})]})]})]})})}),(0,b.jsx)(f.Modal,{isOpen:v.isOpen,onClose:()=>{w({...v,isOpen:!1})},title:v.title,message:v.message,type:v.type,onConfirm:v.onConfirm,confirmText:"confirm"===v.type?"Yes, Archive":"OK",cancelText:"Cancel"})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=frontend_src_app_dashboard_admin_plans_page_tsx_ac168bc0._.js.map