module.exports=[54540,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(73951),e=a.i(98983),f=a.i(93609);a.s(["default",0,()=>{let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)("ALL"),[n,o]=(0,c.useState)("ALL"),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),{user:t,token:u}=(0,e.useAuth)(),v=(0,f.useRouter)();(0,c.useEffect)(()=>{t&&u?"admin"!==t.role?v.push("/dashboard"):w():v.push("/login")},[t,u,l,n,p,r]);let w=async()=>{try{i(!0);let a=new URLSearchParams;"ALL"!==l&&a.set("status",l.toLowerCase()),"ALL"!==n&&a.set("provider",n.toLowerCase()),p&&a.set("from",p),r&&a.set("to",r),a.set("limit","200");let b=await d.default.get(`https://smilify.ai/api/admin/payments?${a.toString()}`,{headers:{Authorization:`Bearer ${u}`}});g(b.data.payments||[])}catch(a){console.error("Error fetching payments:",a),alert(a?.response?.data?.error||"Failed to fetch payments")}finally{i(!1)}},x=(0,c.useMemo)(()=>{if(!j)return a;let b=j.toLowerCase();return a.filter(a=>{let c=a.userId?.name?.toLowerCase()||"",d=a.userId?.email?.toLowerCase()||"",e=a.subscriptionId?.planId?.name?.toLowerCase()||a.planId?.name?.toLowerCase()||"",f=a.providerPaymentId?.toLowerCase()||"";return c.includes(b)||d.includes(b)||e.includes(b)||f.includes(b)})},[a,j]),y=(0,c.useMemo)(()=>{let a=x.length,b=x.filter(a=>"success"===a.status).length,c=x.filter(a=>"pending"===a.status).length;return{total:a,success:b,pending:c,failed:x.filter(a=>"failed"===a.status).length,refunded:x.filter(a=>"refunded"===a.status).length}},[x]);return h?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading transactions..."})]})}):(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Doctor Transactions"}),(0,b.jsx)("p",{className:"text-gray-600",children:"All payments made by doctors"})]}),(0,b.jsxs)("button",{onClick:w,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white shadow-lg",children:[(0,b.jsx)("div",{className:"text-3xl font-bold mb-1",children:y.total}),(0,b.jsx)("div",{className:"text-blue-100",children:"Total"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white shadow-lg",children:[(0,b.jsx)("div",{className:"text-3xl font-bold mb-1",children:y.success}),(0,b.jsx)("div",{className:"text-green-100",children:"Success"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-lg p-6 text-white shadow-lg",children:[(0,b.jsx)("div",{className:"text-3xl font-bold mb-1",children:y.pending}),(0,b.jsx)("div",{className:"text-yellow-100",children:"Pending"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-6 text-white shadow-lg",children:[(0,b.jsx)("div",{className:"text-3xl font-bold mb-1",children:y.failed}),(0,b.jsx)("div",{className:"text-red-100",children:"Failed"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 rounded-lg p-6 text-white shadow-lg",children:[(0,b.jsx)("div",{className:"text-3xl font-bold mb-1",children:y.refunded}),(0,b.jsx)("div",{className:"text-gray-100",children:"Refunded"})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,b.jsx)("div",{className:"md:col-span-2",children:(0,b.jsx)("input",{type:"text",placeholder:"Search name, email, plan, payment id...",value:j,onChange:a=>k(a.target.value),className:"w-full px-4 py-2 border border-gray-400 text-gray-900 placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"})}),(0,b.jsxs)("select",{value:l,onChange:a=>m(a.target.value),className:"px-4 py-2 border border-gray-400 text-gray-900 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",children:[(0,b.jsx)("option",{value:"ALL",children:"All Status"}),(0,b.jsx)("option",{value:"success",children:"Success"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"failed",children:"Failed"}),(0,b.jsx)("option",{value:"refunded",children:"Refunded"})]}),(0,b.jsxs)("select",{value:n,onChange:a=>o(a.target.value),className:"px-4 py-2 border border-gray-400 text-gray-900 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",children:[(0,b.jsx)("option",{value:"ALL",children:"All Providers"}),(0,b.jsx)("option",{value:"razorpay",children:"Razorpay"}),(0,b.jsx)("option",{value:"stripe",children:"Stripe"})]}),(0,b.jsxs)("div",{className:"md:col-span-2 flex flex-wrap gap-2",children:[(0,b.jsx)("input",{type:"date",value:p,onChange:a=>q(a.target.value),className:"w-full min-w-[140px] flex-1 px-3 py-2 border border-gray-400 text-gray-900 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"}),(0,b.jsx)("input",{type:"date",value:r,onChange:a=>s(a.target.value),className:"w-full min-w-[140px] flex-1 px-3 py-2 border border-gray-400 text-gray-900 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500"})]})]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Date"}),(0,b.jsx)("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Doctor"}),(0,b.jsx)("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Plan"}),(0,b.jsx)("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Base Amount"}),(0,b.jsx)("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"GST (18%)"}),(0,b.jsx)("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Total Amount"}),(0,b.jsx)("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Status"}),(0,b.jsx)("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Provider"}),(0,b.jsx)("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Payment ID"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:0===x.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:9,className:"text-center py-10 text-gray-500",children:"No transactions found"})}):x.map(a=>{var c;return(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:(c=a.paymentDate||a.createdAt||null)?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}),(0,b.jsxs)("td",{className:"px-6 py-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.userId?.name||"-"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.userId?.email||"-"})]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:a.subscriptionId?.planId?.name||a.planId?.name||"-"}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 font-semibold",children:[a.currency," ",(a.baseAmount||0).toFixed(2)]}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-green-600 font-semibold",children:[a.currency," ",(a.gstAmount||0).toFixed(2)]}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 font-bold",children:[a.currency," ",a.amount.toFixed(2)]}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(a=>{switch(a){case"success":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(a.status)}`,children:a.status})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:a.provider}),(0,b.jsx)("td",{className:"px-6 py-4 text-xs text-gray-500",children:a.providerPaymentId})]},a._id)})})]})})})]})}])}];

//# sourceMappingURL=frontend_src_app_dashboard_admin_transactions_page_tsx_e5a577a9._.js.map