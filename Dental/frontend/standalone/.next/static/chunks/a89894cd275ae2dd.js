(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39964,7670,e=>{"use strict";var s=e.i(43476);function t(){for(var e,s,t=0,r="",i=arguments.length;t<i;t++)(e=arguments[t])&&(s=function e(s){var t,r,i="";if("string"==typeof s||"number"==typeof s)i+=s;else if("object"==typeof s)if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(r=e(s[t]))&&(i&&(i+=" "),i+=r)}else for(r in s)s[r]&&(i&&(i+=" "),i+=r);return i}(e))&&(r&&(r+=" "),r+=s);return r}function r(e){let{children:r,className:i,...n}=e;return(0,s.jsx)("div",{className:t("rounded-lg border bg-white p-6 shadow-sm",i),...n,children:r})}function i(e){let{children:r,className:i}=e;return(0,s.jsx)("div",{className:t("mb-4",i),children:r})}function n(e){let{children:r,className:i}=e;return(0,s.jsx)("h3",{className:t("text-lg font-semibold text-gray-900",i),children:r})}function l(e){let{children:r,className:i}=e;return(0,s.jsx)("div",{className:t(i),children:r})}e.s(["clsx",()=>t],7670),e.s(["Card",()=>r,"CardContent",()=>l,"CardHeader",()=>i,"CardTitle",()=>n],39964)},59544,e=>{"use strict";var s=e.i(43476),t=e.i(7670);function r(e){let{variant:r="primary",size:i="md",className:n,children:l,...a}=e;return(0,s.jsx)("button",{className:(0,t.clsx)("inline-flex items-center justify-center rounded-lg font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"primary"===r,"bg-gray-200 text-gray-900 hover:bg-gray-300":"secondary"===r,"border-2 border-gray-300 bg-transparent hover:bg-gray-100":"outline"===r,"hover:bg-gray-100":"ghost"===r,"h-8 px-3 text-sm":"sm"===i,"h-10 px-4":"md"===i,"h-12 px-6 text-lg":"lg"===i},n),...a,children:l})}e.s(["Button",()=>r])},3812,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(7670);let i=(0,t.forwardRef)((e,t)=>{let{label:i,error:n,className:l,required:a,...o}=e;return(0,s.jsxs)("div",{className:"w-full",children:[i&&(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:[i,a&&(0,s.jsx)("span",{className:"text-red-600 ml-1",children:"*"})]}),(0,s.jsx)("input",{ref:t,className:(0,r.clsx)("w-full rounded-lg border border-gray-500 px-3 py-2 text-gray-900 placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent","disabled:bg-gray-100 disabled:cursor-not-allowed",n&&"border-red-500",l),...o}),n&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n})]})});i.displayName="Input",e.s(["Input",0,i])},32098,e=>{"use strict";var s=e.i(43476),t=e.i(71645);function r(e){let{isOpen:r,onClose:i,title:n,message:l,type:a="info",onConfirm:o,confirmText:c="OK",cancelText:d="Cancel"}=e;return((0,t.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),r)?(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:i}),(0,s.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle",children:"â€‹"}),(0,s.jsxs)("div",{className:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle animate-modal-in",children:[(0,s.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,s.jsxs)("div",{className:"sm:flex sm:items-start",children:[(()=>{switch(a){case"success":return(0,s.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})});case"error":return(0,s.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})});case"warning":case"confirm":return(0,s.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})});default:return(0,s.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}})(),(0,s.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold leading-6 text-gray-900 mb-2",children:n}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:l})})]})]})}),(0,s.jsx)("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 gap-2",children:"confirm"===a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",onClick:()=>{o&&o(),i()},className:"inline-flex w-full justify-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 sm:ml-3 sm:w-auto transition-colors",children:c}),(0,s.jsx)("button",{type:"button",onClick:i,className:"mt-3 inline-flex w-full justify-center rounded-lg bg-white px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto transition-colors",children:d})]}):(0,s.jsx)("button",{type:"button",onClick:i,className:"inline-flex w-full justify-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 sm:w-auto transition-colors",children:c})})]})]})}):null}e.s(["Modal",()=>r])},76739,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(39964),i=e.i(59544),n=e.i(3812),l=e.i(32098);let a=[{id:"dashboard",label:"Dashboard",description:"View dashboard and analytics"},{id:"patients",label:"Patients",description:"Manage patient records"},{id:"appointments",label:"Appointments",description:"Manage appointments"},{id:"users",label:"Users",description:"Manage users (admin only)"}];function o(){let[e,o]=(0,t.useState)([]),[c,d]=(0,t.useState)(null),[m,x]=(0,t.useState)(""),[u,h]=(0,t.useState)(!0),[g,p]=(0,t.useState)(!1),[b,f]=(0,t.useState)([]),[y,j]=(0,t.useState)({isOpen:!1,title:"",message:"",type:"info"}),v=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";j({isOpen:!0,title:e,message:s,type:t})};(0,t.useEffect)(()=>{N()},[m]);let N=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("".concat("http://103.192.199.158/api","/users").concat(m?"?q=".concat(m):""),{headers:{Authorization:"Bearer ".concat(e)}}),t=await s.json();o(Array.isArray(t)?t:[])}catch(e){console.error("Failed to load users:",e),o([])}finally{h(!1)}},w=async()=>{if(c){p(!0);try{let e=localStorage.getItem("token"),s=await fetch("".concat("http://103.192.199.158/api","/users/").concat(c.id,"/permissions"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({permissions:b})});if(s.ok){let e=await s.json();o(s=>s.map(s=>s.id===e.id?e:s)),d(e),v("Success","Permissions updated successfully!","success")}else{let e=await s.json();v("Error","Failed to update permissions: ".concat(e.error||"Unknown error"),"error")}}catch(e){console.error("Failed to save permissions:",e),v("Error","Failed to save permissions. Please try again.","error")}finally{p(!1)}}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Permission Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage user access to different modules"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{children:"Users"})}),(0,s.jsxs)(r.CardContent,{children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(n.Input,{type:"text",placeholder:"Search users...",value:m,onChange:e=>x(e.target.value)})}),u?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading users..."}):0===e.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No users found"}):(0,s.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:e.map(e=>{var t;return(0,s.jsx)("div",{onClick:()=>{d(e),f(e.permissions||[])},className:"p-4 border rounded-lg cursor-pointer transition-all ".concat((null==c?void 0:c.id)===e.id?"bg-blue-50 border-blue-500":"bg-white border-gray-200 hover:border-blue-300"),children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,s.jsx)("span",{className:"inline-block mt-1 px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:e.role})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[(null==(t=e.permissions)?void 0:t.length)||0," permissions"]})})]})},e.id)})})]})]}),(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsx)(r.CardTitle,{children:c?"Permissions for ".concat(c.name):"Select a user"})}),(0,s.jsx)(r.CardContent,{children:c?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,s.jsx)("strong",{children:"Note:"})," Control which modules this user can access. Unchecked modules will be hidden from their dashboard."]})}),(0,s.jsx)("div",{className:"space-y-3",children:a.map(e=>{let t=b.includes(e.id),r="admin"===c.role&&["users"].includes(e.id);return(0,s.jsx)("div",{onClick:()=>{var s;return!r&&(s=e.id,void f(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]))},className:"border rounded-lg p-4 transition-all cursor-pointer ".concat(t?"bg-green-50 border-green-500":"bg-white border-gray-200 hover:border-gray-300"," ").concat(r?"opacity-60 cursor-not-allowed":""),children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(0,s.jsx)("div",{className:"w-6 h-6 rounded border-2 flex items-center justify-center transition-all ".concat(t?"bg-green-500 border-green-500":"bg-white border-gray-300"," ").concat(r?"opacity-50":""),children:t&&(0,s.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),(0,s.jsxs)("div",{className:"ml-3 flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:e.label}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),r&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1 italic",children:"Always enabled for admins"})]})]})},e.id)})}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(i.Button,{onClick:w,disabled:g,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Permissions"}),(0,s.jsx)(i.Button,{onClick:()=>{d(null),f([])},className:"bg-gray-500 hover:bg-gray-600",children:"Cancel"})]})]}):(0,s.jsxs)("div",{className:"text-center py-16 text-gray-500",children:[(0,s.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,s.jsx)("p",{children:"Select a user from the list to manage their permissions"})]})})]})]}),(0,s.jsx)(l.Modal,{isOpen:y.isOpen,onClose:()=>{j({...y,isOpen:!1})},title:y.title,message:y.message,type:y.type})]})}e.s(["default",()=>o])}]);