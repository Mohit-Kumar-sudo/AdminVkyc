module.exports=[75069,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(19032),f=a.i(62067),g=a.i(96438),h=a.i(48313),i=a.i(56711),j=a.i(57270),k=a.i(67638);function l(a,b,c){let[d,e]=(0,j.normalizeDates)(c?.in,a,b);return+(0,k.startOfDay)(d)==+(0,k.startOfDay)(e)}var m=a.i(74016);function n(a,b){return+(0,m.toDate)(a)<+(0,m.toDate)(b)}var o=a.i(42724);function p(a,b,c){let d=(0,m.toDate)(a,c?.in);if(isNaN(b))return(0,o.constructFrom)(c?.in||a,NaN);if(!b)return d;let e=d.getDate(),f=(0,o.constructFrom)(c?.in||a,d.getTime());return(f.setMonth(d.getMonth()+b+1,0),e>=f.getDate())?f:(d.setFullYear(f.getFullYear(),f.getMonth(),e),d)}var q=a.i(9635),r=a.i(52587);let s={checkup:{bg:"bg-blue-50",dot:"bg-blue-500",label:"Check-up"},cleaning:{bg:"bg-cyan-50",dot:"bg-cyan-500",label:"Cleaning"},filling:{bg:"bg-green-50",dot:"bg-green-500",label:"Filling"},crown:{bg:"bg-indigo-50",dot:"bg-indigo-500",label:"Crown"},"root-canal":{bg:"bg-red-50",dot:"bg-red-500",label:"Root Canal"},extraction:{bg:"bg-rose-50",dot:"bg-rose-500",label:"Extraction"},orthodontics:{bg:"bg-pink-50",dot:"bg-pink-500",label:"Orthodontics"},whitening:{bg:"bg-amber-50",dot:"bg-amber-500",label:"Whitening"},other:{bg:"bg-gray-50",dot:"bg-gray-500",label:"Other"}};function t({appointments:a,onDateClick:d,onCreateAppointment:e}){var f;let g,h,t,u,v,w,x,[y,z]=(0,c.useState)(new Date),A=((g=(0,m.toDate)(y,void 0)).setDate(1),g.setHours(0,0,0,0),g),B=(t=(h=(0,m.toDate)(y,void 0)).getMonth(),h.setFullYear(h.getFullYear(),t+1,0),h.setHours(23,59,59,999),h),C=function(a,b){let{start:c,end:d}=function(a,b){let[c,d]=(0,j.normalizeDates)(a,b.start,b.end);return{start:c,end:d}}(void 0,a),e=+c>+d,f=e?+c:+d,g=e?d:c;g.setHours(0,0,0,0);let h=(void 0)??1;if(!h)return[];h<0&&(h=-h,e=!e);let i=[];for(;+g<=f;)i.push((0,o.constructFrom)(c,g)),g.setDate(g.getDate()+h),g.setHours(0,0,0,0);return e?i.reverse():i}({start:(0,q.startOfWeek)(A,{weekStartsOn:1}),end:(f={weekStartsOn:1},u=(0,r.getDefaultOptions)(),v=f?.weekStartsOn??f?.locale?.options?.weekStartsOn??u.weekStartsOn??u.locale?.options?.weekStartsOn??0,x=(w=(0,m.toDate)(B,f?.in)).getDay(),w.setDate(w.getDate()+((x<v?-7:0)+6-(x-v))),w.setHours(23,59,59,999),w)});return(0,b.jsxs)("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-2xl overflow-hidden border border-gray-100",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-purple-600 via-purple-500 to-indigo-600 px-4 sm:px-8 py-4 sm:py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl sm:text-3xl font-bold text-white",children:(0,i.format)(y,"MMMM yyyy")}),(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,b.jsx)("button",{onClick:()=>z(new Date),className:"px-2 sm:px-4 py-1.5 sm:py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg text-xs sm:text-sm font-semibold transition-all backdrop-blur-sm",children:"Today"}),(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("button",{onClick:()=>z(p(y,-1,void 0)),className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center bg-white/20 hover:bg-white/30 rounded-lg transition-all backdrop-blur-sm group",title:"Previous month",children:(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-white group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),(0,b.jsx)("button",{onClick:()=>z(p(y,1)),className:"w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center bg-white/20 hover:bg-white/30 rounded-lg transition-all backdrop-blur-sm group",title:"Next month",children:(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-white group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})})]})]})]})}),(0,b.jsxs)("div",{className:"p-3 sm:p-6",children:[(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1 sm:gap-2 mb-2 sm:mb-3",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(a=>(0,b.jsx)("div",{className:"text-center py-1 sm:py-3",children:(0,b.jsx)("span",{className:"text-[10px] sm:text-xs font-bold text-gray-500 uppercase tracking-wider",children:a})},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:C.map((c,e)=>{let f=a.filter(a=>l(new Date(a.startAt),c)),g=function(a,b,c){let[d,e]=(0,j.normalizeDates)(void 0,a,b);return d.getFullYear()===e.getFullYear()&&d.getMonth()===e.getMonth()}(c,y),h=l((0,o.constructFrom)(c,c),(0,o.constructFrom)(c,Date.now())),m=[0,6].includes(c.getDay()),p=n((0,k.startOfDay)(c),(0,k.startOfDay)(new Date));return(0,b.jsxs)("button",{onClick:()=>!p&&d(c),disabled:p,className:`
                  relative min-h-[60px] sm:min-h-[100px] p-1.5 sm:p-3 rounded-lg sm:rounded-xl border sm:border-2 transition-all duration-200
                  ${h?"bg-blue-50 border-blue-400 shadow-md ring-1 sm:ring-2 ring-blue-200":g?p?"bg-gray-100 border-gray-200 cursor-not-allowed opacity-50":"bg-gray-50 border-gray-200 hover:border-purple-300 hover:shadow-lg sm:hover:scale-[1.02]":"bg-gray-50/50 border-gray-100"}
                  ${!g?"opacity-40":""}
                  ${m&&g&&!p?"bg-orange-50/30":""}
                `,children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-1 sm:mb-2",children:[(0,b.jsx)("span",{className:`
                    text-xs sm:text-base font-semibold
                    ${h?"text-blue-600 bg-blue-100 w-5 h-5 sm:w-7 sm:h-7 flex items-center justify-center rounded-full text-[10px] sm:text-base":g?"text-gray-900":"text-gray-400"}
                  `,children:(0,i.format)(c,"d")}),f.length>0&&(0,b.jsx)("span",{className:"bg-purple-600 text-white text-[8px] sm:text-[10px] font-bold px-1 sm:px-1.5 py-0.5 rounded-full min-w-[14px] sm:min-w-[18px] text-center",children:f.length})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-0.5 sm:gap-1 mt-1 sm:mt-2",children:[f.slice(0,3).map((a,c)=>{let d=s[a.treatmentType||"other"]||s.other;return(0,b.jsx)("div",{className:`w-2 h-2 rounded-full ${d.dot} shadow-sm`,title:`${d.label} - ${(0,i.format)(new Date(a.startAt),"p")}`},c)}),f.length>3&&(0,b.jsxs)("span",{className:"text-[10px] text-gray-600 font-medium",children:["+",f.length-3]})]}),g&&(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/0 to-indigo-500/0 hover:from-purple-500/5 hover:to-indigo-500/5 rounded-xl transition-all pointer-events-none"})]},e)})}),(0,b.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,b.jsx)("h3",{className:"text-sm font-bold text-gray-700 mb-3 uppercase tracking-wide",children:"Appointment Types"}),(0,b.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-x-4 gap-y-2",children:Object.entries(s).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${c.dot} shadow-sm`}),(0,b.jsx)("span",{className:"text-xs text-gray-700 font-medium",children:c.label})]},a))})]})]})]})}var u=a.i(66778);function v(){let a=(0,d.useRouter)(),[j,m]=(0,c.useState)([]),[o,p]=(0,c.useState)("calendar"),[q,r]=(0,c.useState)("all"),[s,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!1),C=async a=>{if(!confirm(`Are you sure you want to delete ${a.length} appointment(s)?`))return;let b=a.map(a=>a._id);try{await Promise.all(b.map(a=>e.appointmentsAPI.delete(a))),m(a=>a.filter(a=>!b.includes(a._id)))}catch(a){console.error("Failed to delete appointments:",a),alert("Failed to delete some appointments. Please try again.")}},D=[{key:"date",label:"Date & Time",sortable:!0,render:a=>(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 p-3 rounded-xl",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-gray-900",children:(0,i.format)(new Date(a.startAt),"PPP")}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:(0,i.format)(new Date(a.startAt),"p")})]})]}),exportRender:a=>(0,i.format)(new Date(a.startAt),"PPP p")},{key:"patient",label:"Patient",sortable:!0,render:a=>{let c="object"==typeof a.patient?a.patient.name:"Unknown Patient";return(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-sm",children:(0,b.jsx)("span",{className:"text-white text-xs font-bold",children:c.charAt(0).toUpperCase()})}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:c})]})},exportRender:a=>"object"==typeof a.patient?a.patient.name:"Unknown"},{key:"treatmentType",label:"Treatment",sortable:!0,render:a=>{var c;let d;return(0,b.jsx)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${(c=a.treatmentType,(d={cleaning:"bg-cyan-100 text-cyan-700 border-cyan-200",checkup:"bg-blue-100 text-blue-700 border-blue-200",filling:"bg-green-100 text-green-700 border-green-200","root-canal":"bg-red-100 text-red-700 border-red-200",crown:"bg-indigo-100 text-indigo-700 border-indigo-200",extraction:"bg-rose-100 text-rose-700 border-rose-200",orthodontics:"bg-pink-100 text-pink-700 border-pink-200",whitening:"bg-amber-100 text-amber-700 border-amber-200",other:"bg-gray-100 text-gray-700 border-gray-200"})[c]||d.other)}`,children:a.treatmentType?.replace("-"," ").toUpperCase()||"CHECKUP"})},exportRender:a=>a.treatmentType||"checkup"},{key:"status",label:"Status",sortable:!0,render:a=>(0,b.jsx)("span",{className:`px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wide ${"scheduled"===a.status?"bg-blue-100 text-blue-700":"completed"===a.status?"bg-green-100 text-green-700":"cancelled"===a.status?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:a.status}),exportRender:a=>a.status},{key:"notes",label:"Notes",render:a=>(0,b.jsx)("span",{className:"text-sm text-gray-600 truncate max-w-[200px] block",children:a.notes||"â€”"}),exportRender:a=>a.notes||""}];(0,c.useEffect)(()=>{let a=!1;return(async()=>{try{let b=await e.appointmentsAPI.list("all"!==q?{type:q}:void 0);a||m(b.data)}catch(a){console.error("Failed to load appointments:",a)}finally{a||v(!1)}})(),()=>{a=!0}},[q]);let E=a=>{if(a){let b=(0,i.format)(a,"yyyy-MM-dd");window.location.href=`/dashboard/appointments/new?date=${b}`}else window.location.href="/dashboard/appointments/new"};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Appointments"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Click on any date to view or create appointments"})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[(0,b.jsxs)("button",{onClick:()=>p("calendar"),className:`px-4 py-2 rounded-md text-sm font-semibold transition-all flex items-center gap-2 ${"calendar"===o?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Calendar"]}),(0,b.jsxs)("button",{onClick:()=>p("list"),className:`px-4 py-2 rounded-md text-sm font-semibold transition-all flex items-center gap-2 ${"list"===o?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"List"]})]})})]}),s?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-purple-200 border-t-purple-600 mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading appointments..."})]})}):"calendar"===o?(0,b.jsx)(t,{appointments:j,onDateClick:a=>{let b=j.filter(b=>l(new Date(b.startAt),a));x(a),z(b),B(!0)},onCreateAppointment:E}):(0,b.jsxs)(f.Card,{className:"shadow-lg border-0 bg-white rounded-xl overflow-hidden",children:[(0,b.jsx)(f.CardHeader,{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-purple-100 p-4",children:(0,b.jsx)("div",{className:"flex gap-3",children:["all","upcoming","past"].map(a=>(0,b.jsx)("button",{onClick:()=>r(a),className:`px-5 py-2.5 rounded-lg text-sm font-semibold transition-all ${q===a?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})}),(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)(u.DataTable,{data:j,columns:D,loading:s,keyExtractor:a=>a._id,searchPlaceholder:"Search by patient, treatment type, or notes...",onRowClick:b=>a.push(`/dashboard/appointments/${b._id}`),exportFileName:"appointments",selectable:!0,bulkActions:[{label:"Delete Selected",action:C,variant:"danger",icon:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}],actions:c=>(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)("button",{onClick:()=>a.push(`/dashboard/appointments/${c._id}`),className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white text-sm font-medium rounded-lg shadow-md hover:shadow-lg transition-all",children:["View",(0,b.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})]})}),emptyMessage:"No appointments found. Create your first appointment to get started."})})]}),A&&w&&(0,b.jsx)(h.Modal,{isOpen:A,onClose:()=>B(!1),title:(0,i.format)(w,"EEEE, MMMM d, yyyy"),children:(0,b.jsxs)("div",{className:"space-y-4",children:[w&&!n((0,k.startOfDay)(w),(0,k.startOfDay)(new Date))&&(0,b.jsx)("div",{className:"pb-4 border-b border-gray-200",children:(0,b.jsxs)(g.Button,{onClick:()=>E(w),className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 shadow-lg",children:[(0,b.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Appointment"]})}),0===y.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,b.jsx)("p",{className:"text-gray-600 font-medium",children:"No appointments scheduled for this day"})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Scheduled Appointments"}),y.map(a=>{let c="object"==typeof a.patient?a.patient.name:"Unknown Patient";return(0,b.jsxs)("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border border-purple-200 hover:shadow-md transition-all",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-gray-900",children:(0,i.format)(new Date(a.startAt),"p")}),(0,b.jsx)("p",{className:"text-sm font-medium text-purple-700",children:c}),(0,b.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:a.treatmentType?.replace("-"," ")})]}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${"scheduled"===a.status?"bg-blue-100 text-blue-700":"completed"===a.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:a.status})]}),a.notes&&(0,b.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:a.notes}),(0,b.jsxs)("a",{href:`/dashboard/appointments/${a._id}`,className:"text-purple-600 text-sm font-semibold hover:text-purple-700 inline-flex items-center gap-1",children:["View Details",(0,b.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},a._id)})]})})]})})]})}a.s(["default",()=>v],75069)}];

//# sourceMappingURL=src_app_dashboard_appointments_page_tsx_5f8089a2._.js.map