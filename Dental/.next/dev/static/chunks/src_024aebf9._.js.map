{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohitkumar/Documents/new/Dental/frontend/src/components/ui/Card.tsx"],"sourcesContent":["import { ReactNode, HTMLAttributes } from 'react';\nimport { clsx } from 'clsx';\n\ninterface CardProps extends HTMLAttributes<HTMLDivElement> {\n  children: ReactNode;\n  className?: string;\n}\n\nexport function Card({ children, className, ...props }: CardProps) {\n  return (\n    <div className={clsx('rounded-lg border bg-white p-6 shadow-sm', className)} {...props}>\n      {children}\n    </div>\n  );\n}\n\nexport function CardHeader({ children, className }: CardProps) {\n  return <div className={clsx('mb-4', className)}>{children}</div>;\n}\n\nexport function CardTitle({ children, className }: CardProps) {\n  return <h3 className={clsx('text-lg font-semibold text-gray-900', className)}>{children}</h3>;\n}\n\nexport function CardContent({ children, className }: CardProps) {\n  return <div className={clsx(className)}>{children}</div>;\n}\n"],"names":[],"mappings":";;;;;;;;;;;AACA;;;AAOO,SAAS,KAAK,KAA4C;QAA5C,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAkB,GAA5C;IACnB,qBACE,6LAAC;QAAI,WAAW,IAAA,gJAAI,EAAC,4CAA4C;QAAa,GAAG,KAAK;kBACnF;;;;;;AAGP;KANgB;AAQT,SAAS,WAAW,KAAkC;QAAlC,EAAE,QAAQ,EAAE,SAAS,EAAa,GAAlC;IACzB,qBAAO,6LAAC;QAAI,WAAW,IAAA,gJAAI,EAAC,QAAQ;kBAAa;;;;;;AACnD;MAFgB;AAIT,SAAS,UAAU,KAAkC;QAAlC,EAAE,QAAQ,EAAE,SAAS,EAAa,GAAlC;IACxB,qBAAO,6LAAC;QAAG,WAAW,IAAA,gJAAI,EAAC,uCAAuC;kBAAa;;;;;;AACjF;MAFgB;AAIT,SAAS,YAAY,KAAkC;QAAlC,EAAE,QAAQ,EAAE,SAAS,EAAa,GAAlC;IAC1B,qBAAO,6LAAC;QAAI,WAAW,IAAA,gJAAI,EAAC;kBAAa;;;;;;AAC3C;MAFgB"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohitkumar/Documents/new/Dental/frontend/src/components/ui/Button.tsx"],"sourcesContent":["import { ReactNode } from 'react';\nimport { clsx } from 'clsx';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n  children: ReactNode;\n}\n\nexport function Button({\n  variant = 'primary',\n  size = 'md',\n  className,\n  children,\n  ...props\n}: ButtonProps) {\n  return (\n    <button\n      className={clsx(\n        'inline-flex items-center justify-center rounded-lg font-medium transition-colors',\n        'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2',\n        'disabled:pointer-events-none disabled:opacity-50',\n        {\n          'bg-blue-600 text-white hover:bg-blue-700': variant === 'primary',\n          'bg-gray-200 text-gray-900 hover:bg-gray-300': variant === 'secondary',\n          'border-2 border-gray-300 bg-transparent hover:bg-gray-100': variant === 'outline',\n          'hover:bg-gray-100': variant === 'ghost',\n          'h-8 px-3 text-sm': size === 'sm',\n          'h-10 px-4': size === 'md',\n          'h-12 px-6 text-lg': size === 'lg',\n        },\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAQO,SAAS,OAAO,KAMT;QANS,EACrB,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,SAAS,EACT,QAAQ,EACR,GAAG,OACS,GANS;IAOrB,qBACE,6LAAC;QACC,WAAW,IAAA,gJAAI,EACb,oFACA,+EACA,oDACA;YACE,4CAA4C,YAAY;YACxD,+CAA+C,YAAY;YAC3D,6DAA6D,YAAY;YACzE,qBAAqB,YAAY;YACjC,oBAAoB,SAAS;YAC7B,aAAa,SAAS;YACtB,qBAAqB,SAAS;QAChC,GACA;QAED,GAAG,KAAK;kBAER;;;;;;AAGP;KA7BgB"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohitkumar/Documents/new/Dental/frontend/src/app/dashboard/patients/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\nimport { patientsAPI, Patient } from '@/lib/api';\nimport { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/Card';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport { Modal } from '@/components/ui/Modal';\n\nexport default function PatientDetailPage() {\n  const params = useParams<{ id: string }>();\n  const router = useRouter();\n  const [patient, setPatient] = useState<Patient | null>(null);\n  const [beforePhotoFile, setBeforePhotoFile] = useState<File | null>(null);\n  const [afterPhotoFile, setAfterPhotoFile] = useState<File | null>(null);\n  const [uploadMessage, setUploadMessage] = useState('');\n  const [generatedAfterImage, setGeneratedAfterImage] = useState<string | null>(null);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [uploadedBeforeImage, setUploadedBeforeImage] = useState<string | null>(null);\n  const [uploadedImagePath, setUploadedImagePath] = useState<string | null>(null);\n  const [uploadedImageId, setUploadedImageId] = useState<string | null>(null);\n  const [selectedTreatment, setSelectedTreatment] = useState<string>('IMPLANTS');\n  const [photoAnalysis, setPhotoAnalysis] = useState<string>('');\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [showAnalysis, setShowAnalysis] = useState(false);\n  const [progressImages, setProgressImages] = useState<Array<{month: number, percentage: number, description: string, originalImage: string}>>([]);\n  const [isGeneratingProgress, setIsGeneratingProgress] = useState(false);\n  const [showProgressImages, setShowProgressImages] = useState(false);\n  const [progressPlan, setProgressPlan] = useState<string>('');\n  const [showTestimonialForm, setShowTestimonialForm] = useState(false);\n  const [testimonialForm, setTestimonialForm] = useState({ rating: 5, feedback: '', treatmentType: 'SMILE DESIGNING', isPublished: false });\n\n  // Modal state\n  const [modal, setModal] = useState<{\n    isOpen: boolean;\n    title: string;\n    message: string;\n    type: 'success' | 'error' | 'warning' | 'info' | 'confirm';\n    onConfirm?: () => void;\n  }>({\n    isOpen: false,\n    title: '',\n    message: '',\n    type: 'info'\n  });\n\n  const showModal = (\n    title: string,\n    message: string,\n    type: 'success' | 'error' | 'warning' | 'info' | 'confirm' = 'info',\n    onConfirm?: () => void\n  ) => {\n    setModal({ isOpen: true, title, message, type, onConfirm });\n  };\n\n  const closeModal = () => {\n    setModal({ ...modal, isOpen: false });\n  };\n\n  useEffect(() => {\n    let cancelled = false;\n    const loadPatient = async () => {\n      const res = await patientsAPI.get(params.id);\n      if (!cancelled) {\n        setPatient(res.data);\n      }\n    };\n    loadPatient();\n    \n    // Clear uploaded and generated images on component mount (page load/refresh)\n    setUploadedBeforeImage(null);\n    setGeneratedAfterImage(null);\n    setUploadMessage('');\n    setUploadedImagePath(null);\n    setUploadedImageId(null);\n    \n    // Cleanup function - clear images when navigating away\n    return () => { \n      cancelled = true;\n      setUploadedBeforeImage(null);\n      setGeneratedAfterImage(null);\n      setUploadedImagePath(null);\n      setUploadedImageId(null);\n    };\n  }, [params.id]);\n\n  const handleFileUpload = async (file: File, type: 'before' | 'after') => {\n    if (!file) return;\n    const fd = new FormData();\n    fd.append('images', file);\n    fd.append('type', type);\n    \n    try {\n      // Upload the image first\n      const uploadResponse = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/patients/${params.id}/before-after`, { \n        method: 'POST', \n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }, \n        body: fd \n      });\n      \n      const uploadData = await uploadResponse.json();\n      \n      // Refresh patient data\n      const res = await patientsAPI.get(params.id); \n      setPatient(res.data);\n      \n      // Store upload info for Before photos (for later generation)\n      if (type === 'before') {\n        const imagePath = uploadData.imagePath || uploadData.path;\n        setUploadedBeforeImage(`${process.env.NEXT_PUBLIC_API_URL?.replace('/api', '')}/${imagePath}`);\n        setUploadedImagePath(imagePath);\n        setUploadedImageId(uploadData.imageId || uploadData._id);\n        setUploadMessage('Before photo uploaded successfully. Click \"Generate After Photo\" to create AI enhancement.');\n      } else {\n        setUploadMessage('After photo uploaded successfully!');\n      }\n      \n      if (type === 'before') setBeforePhotoFile(null);\n      else setAfterPhotoFile(null);\n      setTimeout(() => setUploadMessage(''), 5000);\n    } catch (e) { \n      setUploadMessage(`Failed to upload ${type} photo`);\n      setTimeout(() => setUploadMessage(''), 3000);\n    }\n  };\n\n  const handleGenerateAfterPhoto = async () => {\n    if (!uploadedImagePath) {\n      setUploadMessage('Please upload a Before photo first.');\n      setTimeout(() => setUploadMessage(''), 3000);\n      return;\n    }\n\n    setUploadMessage('Generating enhanced After photo...');\n    setIsGenerating(true);\n    \n    try {\n      const generateResponse = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/patients/${params.id}/generate-image`, {\n        method: 'POST',\n        headers: { \n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ \n          type: 'before',\n          imageId: uploadedImageId,\n          imagePath: uploadedImagePath,\n          treatmentType: selectedTreatment\n        })\n      });\n      \n      const generatedData = await generateResponse.json();\n      \n      if (generatedData.generatedImage) {\n        setGeneratedAfterImage(generatedData.generatedImage);\n        setUploadMessage('enhanced After photo generated successfully!');\n      } else {\n        setUploadMessage('AI generation failed. Please try again.');\n      }\n    } catch (genError) {\n      console.error('Image generation error:', genError);\n      setUploadMessage('AI generation failed. Please try again.');\n    } finally {\n      setIsGenerating(false);\n      setTimeout(() => setUploadMessage(''), 5000);\n    }\n  };\n\n  const handleRemoveBeforeImage = () => {\n    setUploadedBeforeImage(null);\n    setGeneratedAfterImage(null);\n    setBeforePhotoFile(null);\n    setUploadedImagePath(null);\n    setUploadedImageId(null);\n    setUploadMessage('Images cleared. You can upload a new Before photo.');\n    setTimeout(() => setUploadMessage(''), 3000);\n  };\n\n  const handleRemoveAfterImage = () => {\n    setGeneratedAfterImage(null);\n    setUploadMessage('After photo cleared.');\n    setTimeout(() => setUploadMessage(''), 3000);\n  };\n\n  const handleDeleteSavedPhoto = async (imagePath: string, type: 'before' | 'after') => {\n    showModal(\n      'Confirm Delete',\n      `Are you sure you want to delete this ${type} photo?`,\n      'confirm',\n      async () => {\n        try {\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/patients/${params.id}/delete-image`, {\n        method: 'DELETE',\n        headers: { \n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ imagePath, type })\n      });\n\n      if (response.ok) {\n        setUploadMessage(`${type === 'before' ? 'Before' : 'After'} photo deleted successfully.`);\n        // Refresh patient data\n        const res = await patientsAPI.get(params.id);\n        setPatient(res.data);\n      } else {\n        setUploadMessage(`Failed to delete ${type} photo.`);\n      }\n    } catch (error) {\n      console.error('Delete photo error:', error);\n      setUploadMessage(`Failed to delete ${type} photo.`);\n        }\n        setTimeout(() => setUploadMessage(''), 3000);\n      }\n    );\n  };\n\n  const handleAnalyzePhoto = async () => {\n    if (!uploadedImagePath) {\n      showModal('Upload Required', 'Please upload a photo first', 'warning');\n      return;\n    }\n\n    setIsAnalyzing(true);\n    setPhotoAnalysis('');\n    \n    try {\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/patients/${params.id}/analyze-photo`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ imagePath: uploadedImagePath })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setPhotoAnalysis(data.analysis);\n        setShowAnalysis(true);\n      } else {\n        const error = await response.json();\n        alert(`Failed to analyze photo: ${error.error || 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('Analyze photo error:', error);\n      alert('Failed to analyze photo');\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n\n  const handleGenerateProgressImages = async () => {\n    if (!uploadedImagePath) {\n      showModal('Upload Required', 'Please upload a photo first', 'warning');\n      return;\n    }\n\n    setIsGeneratingProgress(true);\n    setProgressImages([]);\n    \n    try {\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/patients/${params.id}/generate-progress`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ \n          imagePath: uploadedImagePath,\n          treatmentType: selectedTreatment\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setProgressImages(data.progressData || []);\n        setProgressPlan(data.progressPlan || '');\n        setShowProgressImages(true);\n        setShowAnalysis(false); // Hide text analysis when showing images\n      } else {\n        const error = await response.json();\n        alert(`Failed to generate progress images: ${error.error || 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('Generate progress images error:', error);\n      alert('Failed to generate progress images');\n    } finally {\n      setIsGeneratingProgress(false);\n    }\n  };\n\n  const handleSaveAfterPhoto = async () => {\n    if (!generatedAfterImage) {\n      setUploadMessage('No generated image to save.');\n      setTimeout(() => setUploadMessage(''), 3000);\n      return;\n    }\n\n    try {\n      setUploadMessage('Saving After photo...');\n      \n      // Convert base64 or URL to blob\n      const response = await fetch(generatedAfterImage);\n      const blob = await response.blob();\n      \n      // Create FormData and append the image\n      const formData = new FormData();\n      formData.append('images', blob, `after-${Date.now()}.jpg`);\n      formData.append('type', 'after');\n      \n      // Upload to backend\n      const uploadResponse = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/patients/${params.id}/before-after`, {\n        method: 'POST',\n        headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` },\n        body: formData\n      });\n\n      if (uploadResponse.ok) {\n        setUploadMessage('After photo saved successfully!');\n        // Clear the temporary generated image\n        setGeneratedAfterImage(null);\n        // Refresh patient data to show in saved photos\n        const res = await patientsAPI.get(params.id);\n        setPatient(res.data);\n      } else {\n        setUploadMessage('Failed to save After photo.');\n      }\n    } catch (error) {\n      console.error('Save after photo error:', error);\n      setUploadMessage('Failed to save After photo.');\n    }\n    setTimeout(() => setUploadMessage(''), 3000);\n  };\n\n  const handleSaveTestimonial = async () => {\n    if (!testimonialForm.feedback.trim()) {\n      alert('Please provide feedback');\n      return;\n    }\n\n    try {\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/patients/${params.id}/testimonial`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(testimonialForm)\n      });\n\n      if (response.ok) {\n        const updatedPatient = await response.json();\n        setPatient(updatedPatient);\n        setTestimonialForm({ rating: 5, feedback: '', treatmentType: 'SMILE DESIGNING', isPublished: false });\n        setShowTestimonialForm(false);\n        alert('Testimonial added successfully!');\n      } else {\n        const error = await response.json();\n        alert(`Failed to add testimonial: ${error.error || 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('Save testimonial error:', error);\n      alert('Failed to add testimonial');\n    }\n  };\n\n  const handleDeleteTestimonial = async (testimonialId: string) => {\n    showModal(\n      'Confirm Delete',\n      'Are you sure you want to delete this testimonial?',\n      'confirm',\n      async () => {\n        try {\n      const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/patients/${params.id}/testimonial/${testimonialId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`,\n        }\n      });\n\n      if (response.ok) {\n        const res = await patientsAPI.get(params.id);\n        setPatient(res.data);\n        showModal('Success', 'Testimonial deleted successfully!', 'success');\n      } else {\n        showModal('Error', 'Failed to delete testimonial', 'error');\n      }\n        } catch (error) {\n          console.error('Delete testimonial error:', error);\n          showModal('Error', 'Failed to delete testimonial', 'error');\n        }\n      }\n    );\n  };\n\n  const calculateAge = (dob?: string) => {\n    if (!dob) return patient?.age || null;\n    const birthDate = new Date(dob);\n    const today = new Date();\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDiff = today.getMonth() - birthDate.getMonth();\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n    return age;\n  };\n\n  const formatDate = (dateStr?: string) => {\n    if (!dateStr) return 'N/A';\n    const date = new Date(dateStr);\n    return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });\n  };\n\n  if (!patient) return (\n    <div className=\"flex items-center justify-center min-h-[400px]\">\n      <div className=\"text-center\">\n        <div className=\"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n        <p className=\"text-gray-600\">Loading patient information...</p>\n      </div>\n    </div>\n  );\n\n  const age = calculateAge(patient.dob);\n  const beforeImages = (patient.beforeAfterImages || []).filter(img => img.type === 'before');\n  const afterImages = (patient.beforeAfterImages || []).filter(img => img.type === 'after');\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-3 space-y-3\">\n      {/* Patient Header Card */}\n      <Card className=\"shadow-lg border-gray-200 bg-white\">\n        <CardContent className=\"p-4\">\n          <div className=\"flex items-start gap-6\">\n            {/* Profile Photo */}\n            <div className=\"flex-shrink-0\">\n              <div className=\"w-24 h-24 rounded-full overflow-hidden bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white text-3xl font-bold shadow-lg\">\n                {patient.images && patient.images[0] ? (\n                  <img \n                    src={`${process.env.NEXT_PUBLIC_API_URL?.replace('/api', '')}/${patient.images[0].path}`} \n                    alt={patient.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  patient.name.charAt(0).toUpperCase()\n                )}\n              </div>\n            </div>\n\n            {/* Patient Info */}\n            <div className=\"flex-grow\">\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-1\">{patient.name}</h1>\n              {age && <p className=\"text-gray-600 text-base mb-4\">Age {age}</p>}\n\n              {/* Contact Info Grid */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                {/* Phone */}\n                {patient.contact && (\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0\">\n                      <svg className=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\n                      </svg>\n                    </div>\n                    <span className=\"text-gray-700\">{patient.contact}</span>\n                  </div>\n                )}\n\n                {/* Email */}\n                {patient.email && (\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0\">\n                      <svg className=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n                      </svg>\n                    </div>\n                    <span className=\"text-gray-700\">{patient.email}</span>\n                  </div>\n                )}\n\n                {/* Address */}\n                {patient.address && (\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0\">\n                      <svg className=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n                      </svg>\n                    </div>\n                    <span className=\"text-gray-700\">{patient.address}</span>\n                  </div>\n                )}\n\n                {/* Last Visit */}\n                {(patient.lastVisit || patient.updatedAt) && (\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0\">\n                      <svg className=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                      </svg>\n                    </div>\n                    <span className=\"text-gray-700\">Last visit: {formatDate(patient.lastVisit || patient.updatedAt)}</span>\n                  </div>\n                )}\n              </div>\n\n              {/* Treatment History */}\n              {patient.treatmentHistory && patient.treatmentHistory.length > 0 && (\n                <div className=\"mb-4\">\n                  <h3 className=\"text-sm font-semibold text-gray-900 mb-2\">Treatment History</h3>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {patient.treatmentHistory.map((treatment, idx) => (\n                      <span key={idx} className=\"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm font-medium\">\n                        {treatment}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Next Appointment */}\n              {patient.nextAppointment && (\n                <div className=\"flex items-center gap-2 p-3 bg-blue-50 rounded-lg\">\n                  <svg className=\"w-5 h-5 text-blue-600 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                  <span className=\"text-blue-700 font-medium\">\n                    Next Appointment: {patient.nextAppointment.date} at {patient.nextAppointment.time}\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Patient Photography Section */}\n      <Card className=\"shadow-lg border-gray-200 bg-white\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center gap-3 mb-6\">\n            <div className=\"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" />\n              </svg>\n            </div>\n            <h2 className=\"text-xl font-bold text-gray-900\">Patient Photography</h2>\n          </div>\n\n          <div>\n\n            {/* Treatment Type Selection */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-bold text-gray-800 mb-3 uppercase tracking-wide\">Select Treatment Type</label>\n              <div className=\"flex flex-wrap gap-3\">\n                {['IMPLANTS', 'SMILE DESIGNING', 'TEETH WHITENING', 'BRACES'].map((treatment) => (\n                  <button\n                    key={treatment}\n                    onClick={() => setSelectedTreatment(treatment)}\n                    className={`px-6 py-2.5 rounded-full font-semibold text-sm transition-all transform hover:scale-105 ${\n                      selectedTreatment === treatment\n                        ? 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg'\n                        : 'bg-white text-gray-600 border-2 border-gray-300 hover:border-blue-500 hover:text-blue-600'\n                    }`}\n                  >\n                    {treatment}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Before Photo */}\n              <div>\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <div className=\"w-8 h-8 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center\">\n                    <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                    </svg>\n                  </div>\n                  <h3 className=\"text-base font-bold text-gray-900 uppercase tracking-wide\">Before Photo</h3>\n                </div>\n              \n              {/* Show uploaded before image if exists */}\n              {uploadedBeforeImage && (\n                <div className=\"mb-3\">\n                  <div className=\"relative aspect-square overflow-hidden rounded-lg border-2 border-gray-200 group\">\n                    <img \n                      src={uploadedBeforeImage} \n                      alt=\"Before\"\n                      className=\"w-full h-full object-cover\" \n                    />\n                    <div className=\"absolute top-2 left-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-xs px-3 py-1.5 rounded-full font-bold shadow-lg\">\n                      Before Photo\n                    </div>\n                    {/* Delete Button */}\n                    <button\n                      onClick={handleRemoveBeforeImage}\n                      className=\"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transition-all opacity-0 group-hover:opacity-100\"\n                      title=\"Remove image\"\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                      </svg>\n                    </button>\n                  </div>\n                  {/* Generate Button - Show only if no generated image yet */}\n                  {!generatedAfterImage && !isGenerating && (\n                    <div className=\"mt-3 space-y-2\">\n                      <button\n                        onClick={handleGenerateAfterPhoto}\n                        className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-2\"\n                      >\n                        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                        </svg>\n                        Generate After Photo\n                      </button>\n                      \n                      <button\n                        onClick={handleAnalyzePhoto}\n                        disabled={isAnalyzing}\n                        className=\"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {isAnalyzing ? (\n                          <>\n                            <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                            Analyzing...\n                          </>\n                        ) : (\n                          <>\n                            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                            </svg>\n                            Analyze & Suggest Treatments\n                          </>\n                        )}\n                      </button>\n                      \n                      <button\n                        onClick={handleGenerateProgressImages}\n                        disabled={isGeneratingProgress}\n                        className=\"w-full bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {isGeneratingProgress ? (\n                          <>\n                            <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n                            Generating Progress...\n                          </>\n                        ) : (\n                          <>\n                            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                            </svg>\n                            Show Monthly Progress Images\n                          </>\n                        )}\n                      </button>\n                    </div>\n                  )}\n                </div>\n              )}\n              \n              {/* Upload area - only show if no uploaded image */}\n                {!uploadedBeforeImage && (\n                  <div className=\"border-2 border-dashed border-blue-300 rounded-xl p-10 text-center hover:border-blue-500 hover:bg-blue-50 transition-all bg-gradient-to-br from-blue-50 to-indigo-50\">\n                  <input\n                    type=\"file\"\n                    id=\"before-photo\"\n                    accept=\"image/*\"\n                    disabled={isGenerating}\n                    onChange={(e) => {\n                      const file = e.target.files?.[0];\n                      if (file) {\n                        setBeforePhotoFile(file);\n                        handleFileUpload(file, 'before');\n                      }\n                    }}\n                    className=\"hidden\"\n                  />\n                    <label htmlFor=\"before-photo\" className={`block ${isGenerating ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}>\n                      <div className=\"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg\">\n                        <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                        </svg>\n                      </div>\n                      <p className=\"text-gray-700 font-medium mb-3\">Drag & drop or click to upload</p>\n                      <span className=\"inline-block px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg transform hover:scale-105\">\n                        Select File\n                      </span>\n                    </label>\n                  </div>\n                )}\n            </div>\n\n              {/* After Photo */}\n              <div>\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <div className=\"w-8 h-8 bg-gradient-to-br from-indigo-600 to-blue-600 rounded-lg flex items-center justify-center\">\n                    <svg className=\"w-4 h-4 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                  <h3 className=\"text-base font-bold text-gray-900 uppercase tracking-wide\">After Photo</h3>\n                </div>\n              \n              {/* Show AI-generated after image */}\n                {generatedAfterImage && (\n                  <div className=\"mb-4\">\n                    <div className=\"relative aspect-square overflow-hidden rounded-lg border-2 border-blue-500 shadow-xl group\">\n                    <img \n                      src={generatedAfterImage} \n                      alt=\"Generated After\"\n                      className=\"w-full h-full object-cover\" \n                    />\n                      <div className=\"absolute top-2 left-2 bg-gradient-to-r from-indigo-600 to-blue-600 text-white text-xs px-3 py-1.5 rounded-full font-bold flex items-center gap-1 shadow-lg\">\n                      <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z\" clipRule=\"evenodd\" />\n                      </svg>\n                      Generated\n                    </div>\n                    {/* Delete Button */}\n                    <button\n                      onClick={handleRemoveAfterImage}\n                      className=\"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transition-all opacity-0 group-hover:opacity-100\"\n                      title=\"Remove generated image\"\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                      </svg>\n                    </button>\n                    </div>\n                    {/* Save Button */}\n                  <button\n                    onClick={handleSaveAfterPhoto}\n                    className=\"mt-3 w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\n                    </svg>\n                    Save After Photo\n                  </button>                </div>\n              )}\n              \n              {/* Loading State - Show in After section when generating */}\n              {isGenerating && (\n                <div className=\"mb-4 p-8 border-2 border-blue-300 rounded-lg bg-blue-50\">\n                  <div className=\"flex flex-col items-center\">\n                    <div className=\"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-3\"></div>\n                    <p className=\"text-blue-700 font-medium\">Generating enhanced After photo...</p>\n                    <p className=\"text-blue-600 text-sm mt-2\">This may take a few moments</p>\n                  </div>\n                </div>\n              )}\n              \n              {/* Upload area - only show if no generated image and not generating */}\n                {!generatedAfterImage && !isGenerating && (\n                  <div className=\"border-2 border-dashed border-indigo-300 rounded-xl p-10 text-center hover:border-indigo-500 hover:bg-indigo-50 transition-all bg-gradient-to-br from-indigo-50 to-blue-50\">\n                  <input\n                    type=\"file\"\n                    id=\"after-photo\"\n                    accept=\"image/*\"\n                    disabled={isGenerating}\n                    onChange={(e) => {\n                      const file = e.target.files?.[0];\n                      if (file) {\n                        setAfterPhotoFile(file);\n                        handleFileUpload(file, 'after');\n                      }\n                    }}\n                    className=\"hidden\"\n                  />\n                  <label htmlFor=\"after-photo\" className={`block ${isGenerating ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}>\n                    <div className=\"w-16 h-16 bg-gradient-to-br from-indigo-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg\">\n                      <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                      </svg>\n                    </div>\n                    <p className=\"text-gray-700 font-medium mb-3\">Drag & drop or click to upload</p>\n                    <span className=\"inline-block px-6 py-2.5 bg-gradient-to-r from-indigo-600 to-blue-600 text-white rounded-lg font-semibold hover:from-indigo-700 hover:to-blue-700 transition-all shadow-md hover:shadow-lg transform hover:scale-105\">\n                      Select File\n                    </span>\n                  </label>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* AI Analysis Section */}\n          {showAnalysis && photoAnalysis && (\n            <div className=\"mt-6 border border-purple-200 rounded-lg overflow-hidden bg-gradient-to-br from-purple-50 to-pink-50\">\n              <div className=\"bg-gradient-to-r from-purple-600 to-pink-600 px-4 py-3 flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n                  </svg>\n                  <h3 className=\"text-white font-bold text-lg\">AI Analysis & Treatment Suggestions</h3>\n                </div>\n                <button\n                  onClick={() => setShowAnalysis(false)}\n                  className=\"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-1 transition-all\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              <div className=\"p-6\">\n                <div className=\"prose prose-sm max-w-none\">\n                  {photoAnalysis.split('\\n').map((line, index) => {\n                    const trimmed = line.trim();\n                    if (!trimmed) return <br key={index} />;\n                    \n                    // Headers (lines starting with ##, ###, or bold **)\n                    if (trimmed.startsWith('##') || trimmed.startsWith('**')) {\n                      const text = trimmed.replace(/^#+\\s*/, '').replace(/\\*\\*/g, '');\n                      return (\n                        <h3 key={index} className=\"text-lg font-bold text-purple-900 mt-4 mb-2 flex items-center gap-2\">\n                          <span className=\"w-2 h-2 bg-purple-600 rounded-full\"></span>\n                          {text}\n                        </h3>\n                      );\n                    }\n                    \n                    // List items\n                    if (trimmed.match(/^[\\d\\-\\*]\\./)) {\n                      return (\n                        <p key={index} className=\"text-gray-700 mb-2 ml-4 flex items-start gap-2\">\n                          <span className=\"text-purple-600 font-bold\">â€¢</span>\n                          <span>{trimmed.replace(/^[\\d\\-\\*]\\.\\s*/, '')}</span>\n                        </p>\n                      );\n                    }\n                    \n                    // Regular paragraph\n                    return <p key={index} className=\"text-gray-700 mb-2\">{trimmed}</p>;\n                  })}\n                </div>\n                \n\n              </div>\n            </div>\n          )}\n\n          {/* Progress Images Timeline */}\n          {showProgressImages && progressImages.length > 0 && (\n            <div className=\"mt-6 border border-green-200 rounded-lg overflow-hidden bg-gradient-to-br from-green-50 to-teal-50\">\n              <div className=\"bg-gradient-to-r from-green-600 to-teal-600 px-4 py-3 flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\n                  </svg>\n                  <h3 className=\"text-white font-bold text-lg\">Monthly Treatment Progress Timeline</h3>\n                </div>\n                <button\n                  onClick={() => setShowProgressImages(false)}\n                  className=\"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-1 transition-all\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              <div className=\"p-6\">\n                <div className=\"space-y-6\">\n                  {progressImages.map((step, index) => (\n                    <div key={index} className=\"relative\">\n                      {/* Timeline connector */}\n                      {index < progressImages.length - 1 && (\n                        <div className=\"absolute left-6 top-32 bottom-0 w-1 bg-gradient-to-b from-green-400 to-teal-400 transform translate-y-4\"></div>\n                      )}\n                      \n                      <div className=\"flex items-start gap-4\">\n                        {/* Timeline dot with percentage */}\n                        <div className=\"flex-shrink-0 flex flex-col items-center\">\n                          <div className=\"w-12 h-12 bg-gradient-to-br from-green-600 to-teal-600 rounded-full flex items-center justify-center shadow-lg z-10\">\n                            <span className=\"text-white font-bold text-lg\">{step.month}</span>\n                          </div>\n                          <div className=\"mt-1 text-xs font-semibold text-green-700 bg-green-100 px-2 py-1 rounded-full\">\n                            {step.percentage}%\n                          </div>\n                        </div>\n                        \n                        {/* Content */}\n                        <div className=\"flex-grow bg-white rounded-lg border border-green-200 shadow-md overflow-hidden\">\n                          <div className=\"p-4 bg-gradient-to-r from-green-100 to-teal-100 border-b border-green-200\">\n                            <h4 className=\"font-bold text-gray-900 text-lg\">Month {step.month}</h4>\n                            <p className=\"text-sm text-gray-700 mt-1\">{step.description}</p>\n                          </div>\n                          <div className=\"p-4\">\n                            <img \n                              src={step.originalImage} \n                              alt={`Progress Month ${step.month}`}\n                              className=\"w-full rounded-lg shadow-md\"\n                            />\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                \n                <div className=\"mt-6 p-4 bg-white rounded-lg border border-green-200\">\n                  <p className=\"text-sm text-gray-700 text-center\">\n                    <span className=\"font-semibold text-green-700\">ðŸ“Š Progress Overview:</span> These generated images show the expected treatment progression over time. Actual results may vary based on individual response to treatment.\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Upload Message */}\n          {uploadMessage && (\n            <div className={`mt-4 px-4 py-3 rounded-lg text-sm font-medium ${\n              uploadMessage.includes('Failed') ? 'bg-red-50 text-red-700 border border-red-200' : 'bg-green-50 text-green-700 border border-green-200'\n            }`}>\n              {uploadMessage}\n            </div>\n          )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Saved Before & After Images Section */}\n      {(beforeImages.length > 0 || afterImages.length > 0) && (\n        <Card className=\"shadow-lg border-gray-200 bg-white\">\n          <CardContent className=\"p-8\">\n            <div className=\"flex items-center gap-2 mb-6\">\n              <svg className=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n              </svg>\n              <h2 className=\"text-xl font-semibold text-gray-900\">Saved Treatment Photos</h2>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n              {/* Saved Before Photos */}\n              {beforeImages.length > 0 && (\n                <div>\n                  <h3 className=\"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n                    <span className=\"bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-sm\">Before Photos ({beforeImages.length})</span>\n                  </h3>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    {beforeImages.map((img, idx) => (\n                      <div key={idx} className=\"relative aspect-square overflow-hidden rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow group\">\n                        <img \n                          src={`${process.env.NEXT_PUBLIC_API_URL?.replace('/api', '')}/${img.path}`} \n                          alt={`Before ${idx + 1}`}\n                          className=\"w-full h-full object-cover\" \n                        />\n                        <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2\">\n                          <p className=\"text-white text-xs font-medium\">Before</p>\n                        </div>\n                        {/* Delete Button */}\n                        <button\n                          onClick={() => handleDeleteSavedPhoto(img.path, 'before')}\n                          className=\"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transition-all opacity-0 group-hover:opacity-100\"\n                          title=\"Delete photo\"\n                        >\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                          </svg>\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Saved After Photos */}\n              {afterImages.length > 0 && (\n                <div>\n                  <h3 className=\"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2\">\n                    <span className=\"bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm\">After Photos ({afterImages.length})</span>\n                  </h3>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    {afterImages.map((img, idx) => (\n                      <div key={idx} className=\"relative aspect-square overflow-hidden rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-md transition-shadow group\">\n                        <img \n                          src={`${process.env.NEXT_PUBLIC_API_URL?.replace('/api', '')}/${img.path}`} \n                          alt={`After ${idx + 1}`}\n                          className=\"w-full h-full object-cover\" \n                        />\n                        <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2\">\n                          <p className=\"text-white text-xs font-medium\">After</p>\n                        </div>\n                        {/* Delete Button */}\n                        <button\n                          onClick={() => handleDeleteSavedPhoto(img.path, 'after')}\n                          className=\"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 shadow-lg transition-all opacity-0 group-hover:opacity-100\"\n                          title=\"Delete photo\"\n                        >\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                          </svg>\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {beforeImages.length === 0 && afterImages.length === 0 && (\n              <div className=\"text-center py-8 text-gray-500\">\n                <svg className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n                <p className=\"text-lg font-medium\">No saved photos yet</p>\n                <p className=\"text-sm mt-1\">Upload photos in the section above to save them</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Testimonials Section */}\n      <Card className=\"shadow-lg border-gray-200 bg-white\">\n        <CardContent className=\"p-8\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div className=\"flex items-center gap-2\">\n              <svg className=\"w-6 h-6 text-amber-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\" />\n              </svg>\n              <h2 className=\"text-xl font-semibold text-gray-900\">Patient Testimonials</h2>\n            </div>\n            <Button\n              onClick={() => setShowTestimonialForm(!showTestimonialForm)}\n              className=\"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-4 py-2 rounded-lg shadow-md\"\n            >\n              {showTestimonialForm ? 'Cancel' : '+ Add Testimonial'}\n            </Button>\n          </div>\n\n          {/* Testimonial Form */}\n          {showTestimonialForm && (\n            <div className=\"mb-6 p-6 bg-gradient-to-br from-amber-50 to-orange-50 border border-amber-200 rounded-lg\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Add New Testimonial</h3>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Rating</label>\n                  <div className=\"flex gap-2\">\n                    {[1, 2, 3, 4, 5].map((star) => (\n                      <button\n                        key={star}\n                        onClick={() => setTestimonialForm({ ...testimonialForm, rating: star })}\n                        className=\"focus:outline-none\"\n                      >\n                        <svg\n                          className={`w-8 h-8 ${star <= testimonialForm.rating ? 'text-amber-500' : 'text-gray-300'}`}\n                          fill=\"currentColor\"\n                          viewBox=\"0 0 20 20\"\n                        >\n                          <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                        </svg>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Treatment Type</label>\n                  <select\n                    value={testimonialForm.treatmentType}\n                    onChange={(e) => setTestimonialForm({ ...testimonialForm, treatmentType: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent text-gray-900 bg-white\"\n                  >\n                    <option value=\"SMILE DESIGNING\">Smile Designing</option>\n                    <option value=\"IMPLANTS\">Implants</option>\n                    <option value=\"TEETH WHITENING\">Teeth Whitening</option>\n                    <option value=\"BRACES\">Braces</option>\n                    <option value=\"OTHER\">Other</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Feedback</label>\n                  <textarea\n                    value={testimonialForm.feedback}\n                    onChange={(e) => setTestimonialForm({ ...testimonialForm, feedback: e.target.value })}\n                    placeholder=\"Share your experience with the treatment...\"\n                    rows={4}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent text-gray-900 bg-white\"\n                  />\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"isPublished\"\n                    checked={testimonialForm.isPublished}\n                    onChange={(e) => setTestimonialForm({ ...testimonialForm, isPublished: e.target.checked })}\n                    className=\"w-4 h-4 text-amber-600 rounded focus:ring-amber-500\"\n                  />\n                  <label htmlFor=\"isPublished\" className=\"text-sm text-gray-700\">\n                    Make this testimonial public\n                  </label>\n                </div>\n\n                <div className=\"flex gap-3\">\n                  <Button\n                    onClick={handleSaveTestimonial}\n                    className=\"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white px-6 py-2 rounded-lg\"\n                  >\n                    Save Testimonial\n                  </Button>\n                  <Button\n                    onClick={() => setShowTestimonialForm(false)}\n                    className=\"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-lg\"\n                  >\n                    Cancel\n                  </Button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Testimonials List */}\n          {patient.testimonials && patient.testimonials.length > 0 ? (\n            <div className=\"space-y-4\">\n              {patient.testimonials.map((testimonial: any) => (\n                <div key={testimonial._id} className=\"p-6 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <div className=\"flex\">\n                          {[1, 2, 3, 4, 5].map((star) => (\n                            <svg\n                              key={star}\n                              className={`w-5 h-5 ${star <= testimonial.rating ? 'text-amber-500' : 'text-gray-300'}`}\n                              fill=\"currentColor\"\n                              viewBox=\"0 0 20 20\"\n                            >\n                              <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                            </svg>\n                          ))}\n                        </div>\n                        <span className=\"text-xs font-medium px-2 py-1 bg-amber-100 text-amber-700 rounded-full\">\n                          {testimonial.treatmentType.replace('_', ' ')}\n                        </span>\n                        {testimonial.isPublished && (\n                          <span className=\"text-xs font-medium px-2 py-1 bg-green-100 text-green-700 rounded-full\">\n                            Published\n                          </span>\n                        )}\n                      </div>\n                      <p className=\"text-gray-700 leading-relaxed\">{testimonial.feedback}</p>\n                      <p className=\"text-xs text-gray-500 mt-2\">\n                        {new Date(testimonial.createdAt).toLocaleDateString('en-US', { \n                          year: 'numeric', \n                          month: 'long', \n                          day: 'numeric' \n                        })}\n                      </p>\n                    </div>\n                    <button\n                      onClick={() => handleDeleteTestimonial(testimonial._id)}\n                      className=\"ml-4 text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-50 transition-all\"\n                      title=\"Delete testimonial\"\n                    >\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8 text-gray-500\">\n              <svg className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\" />\n              </svg>\n              <p className=\"text-lg font-medium\">No testimonials yet</p>\n              <p className=\"text-sm mt-1\">Click &quot;Add Testimonial&quot; to collect patient feedback</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}