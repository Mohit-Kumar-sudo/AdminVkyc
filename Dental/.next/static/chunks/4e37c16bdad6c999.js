(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39964,7670,e=>{"use strict";var t=e.i(43476);function s(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=function e(t){var s,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(a=e(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}(e))&&(a&&(a+=" "),a+=t);return a}function a(e){let{children:a,className:r,...n}=e;return(0,t.jsx)("div",{className:s("rounded-lg border bg-white p-6 shadow-sm",r),...n,children:a})}function r(e){let{children:a,className:r}=e;return(0,t.jsx)("div",{className:s("mb-4",r),children:a})}function n(e){let{children:a,className:r}=e;return(0,t.jsx)("h3",{className:s("text-lg font-semibold text-gray-900",r),children:a})}function l(e){let{children:a,className:r}=e;return(0,t.jsx)("div",{className:s(r),children:a})}e.s(["clsx",()=>s],7670),e.s(["Card",()=>a,"CardContent",()=>l,"CardHeader",()=>r,"CardTitle",()=>n],39964)},59544,e=>{"use strict";var t=e.i(43476),s=e.i(7670);function a(e){let{variant:a="primary",size:r="md",className:n,children:l,...i}=e;return(0,t.jsx)("button",{className:(0,s.clsx)("inline-flex items-center justify-center rounded-lg font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"primary"===a,"bg-gray-200 text-gray-900 hover:bg-gray-300":"secondary"===a,"border-2 border-gray-300 bg-transparent hover:bg-gray-100":"outline"===a,"hover:bg-gray-100":"ghost"===a,"h-8 px-3 text-sm":"sm"===r,"h-10 px-4":"md"===r,"h-12 px-6 text-lg":"lg"===r},n),...i,children:l})}e.s(["Button",()=>a])},65836,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(9165),r=e.i(39964),n=e.i(59544),l=e.i(32341),i=e.i(18566);function c(){let{user:e}=(0,l.useAuth)(),c=(0,i.useRouter)(),[d,o]=(0,s.useState)([]),[x,m]=(0,s.useState)([]),[h,u]=(0,s.useState)(null),[p,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(null==e?void 0:e.role)!=="admin"&&c.push("/dashboard")},[e,c]),(0,s.useEffect)(()=>{(async()=>{o((await a.usersAPI.list()).data),m((await a.clientsAPI.list()).data)})()},[]);let j=async(e,t)=>{g(!0);try{let s=await fetch("".concat("http://103.192.199.158/api","/patients?doctorId=").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),a=await s.json();u({id:e,name:t,patients:a||[]})}catch(e){console.error("Failed to load doctor patients:",e)}finally{g(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Users"}),(0,t.jsx)(n.Button,{onClick:()=>c.push("/dashboard/admin/users/new"),children:"New User"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsx)(r.CardTitle,{children:"All Users"})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b text-left text-sm text-gray-600",children:[(0,t.jsx)("th",{className:"pb-3 font-medium",children:"Name"}),(0,t.jsx)("th",{className:"pb-3 font-medium",children:"Email"}),(0,t.jsx)("th",{className:"pb-3 font-medium",children:"Role"}),(0,t.jsx)("th",{className:"pb-3 font-medium",children:"Client"}),(0,t.jsx)("th",{className:"pb-3 font-medium",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:d.map(e=>{var s,a;return(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-3 font-semibold text-gray-900",children:e.name}),(0,t.jsx)("td",{className:"py-3 text-sm text-gray-700",children:e.email}),(0,t.jsx)("td",{className:"py-3 text-sm text-gray-700",children:(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("admin"===e.role?"bg-purple-100 text-purple-700":"doctor"===e.role?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:e.role})}),(0,t.jsx)("td",{className:"py-3 text-sm text-gray-700",children:(s=e.client,(null==(a=x.find(e=>e._id===s))?void 0:a.name)||"â€”")}),(0,t.jsx)("td",{className:"py-3",children:"doctor"===e.role&&(0,t.jsx)(n.Button,{onClick:()=>j(e.id,e.name),className:"text-xs px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white",children:"View Patients"})})]},e.id)})})]}),0===d.length&&(0,t.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No users"})]})})]})}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(r.Card,{className:"sticky top-4",children:[(0,t.jsx)(r.CardHeader,{children:(0,t.jsx)(r.CardTitle,{children:h?"".concat(h.name,"'s Patients"):"Doctor Patients"})}),(0,t.jsx)(r.CardContent,{children:p?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Loading patients..."})]}):h?0===h.patients.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"No patients yet"})]}):(0,t.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:h.patients.map((e,s)=>{var a;return(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-white text-xs font-bold",children:(null==(a=e.name)?void 0:a.charAt(0).toUpperCase())||"?"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900 text-sm truncate",children:e.name}),e.email&&(0,t.jsx)("p",{className:"text-xs text-gray-600 truncate",children:e.email}),e.contact&&(0,t.jsx)("p",{className:"text-xs text-gray-600",children:e.contact})]})]})},e._id||s)})}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)("svg",{className:"w-16 h-16 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,t.jsx)("p",{className:"text-sm",children:"Select a doctor to view their patients"}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:'ðŸ‘ˆ Click "View Patients" button'})]})})]})})]})]})}e.s(["default",()=>c])}]);