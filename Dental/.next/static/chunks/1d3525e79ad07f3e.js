(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39964,7670,e=>{"use strict";var s=e.i(43476);function r(){for(var e,s,r=0,t="",a=arguments.length;r<a;r++)(e=arguments[r])&&(s=function e(s){var r,t,a="";if("string"==typeof s||"number"==typeof s)a+=s;else if("object"==typeof s)if(Array.isArray(s)){var i=s.length;for(r=0;r<i;r++)s[r]&&(t=e(s[r]))&&(a&&(a+=" "),a+=t)}else for(t in s)s[t]&&(a&&(a+=" "),a+=t);return a}(e))&&(t&&(t+=" "),t+=s);return t}function t(e){let{children:t,className:a,...i}=e;return(0,s.jsx)("div",{className:r("rounded-lg border bg-white p-6 shadow-sm",a),...i,children:t})}function a(e){let{children:t,className:a}=e;return(0,s.jsx)("div",{className:r("mb-4",a),children:t})}function i(e){let{children:t,className:a}=e;return(0,s.jsx)("h3",{className:r("text-lg font-semibold text-gray-900",a),children:t})}function n(e){let{children:t,className:a}=e;return(0,s.jsx)("div",{className:r(a),children:t})}e.s(["clsx",()=>r],7670),e.s(["Card",()=>t,"CardContent",()=>n,"CardHeader",()=>a,"CardTitle",()=>i],39964)},59544,e=>{"use strict";var s=e.i(43476),r=e.i(7670);function t(e){let{variant:t="primary",size:a="md",className:i,children:n,...l}=e;return(0,s.jsx)("button",{className:(0,r.clsx)("inline-flex items-center justify-center rounded-lg font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"primary"===t,"bg-gray-200 text-gray-900 hover:bg-gray-300":"secondary"===t,"border-2 border-gray-300 bg-transparent hover:bg-gray-100":"outline"===t,"hover:bg-gray-100":"ghost"===t,"h-8 px-3 text-sm":"sm"===a,"h-10 px-4":"md"===a,"h-12 px-6 text-lg":"lg"===a},i),...l,children:n})}e.s(["Button",()=>t])},3812,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(7670);let a=(0,r.forwardRef)((e,r)=>{let{label:a,error:i,className:n,...l}=e;return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:a}),(0,s.jsx)("input",{ref:r,className:(0,t.clsx)("w-full rounded-lg border border-gray-500 px-3 py-2 text-gray-900 placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent","disabled:bg-gray-100 disabled:cursor-not-allowed",i&&"border-red-500",n),...l}),i&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i})]})});a.displayName="Input",e.s(["Input",0,a])},76739,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(39964),a=e.i(59544),i=e.i(3812);let n=[{id:"dashboard",label:"Dashboard",description:"View dashboard and analytics"},{id:"patients",label:"Patients",description:"Manage patient records"},{id:"appointments",label:"Appointments",description:"Manage appointments"},{id:"users",label:"Users",description:"Manage users (admin only)"},{id:"clients",label:"Clients",description:"Manage clients (admin only)"}];function l(){let[e,l]=(0,r.useState)([]),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(""),[m,x]=(0,r.useState)(!0),[h,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)([]);(0,r.useEffect)(()=>{y()},[d]);let y=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("".concat("http://103.192.199.158/api","/users").concat(d?"?q=".concat(d):""),{headers:{Authorization:"Bearer ".concat(e)}}),r=await s.json();l(Array.isArray(r)?r:[])}catch(e){console.error("Failed to load users:",e),l([])}finally{x(!1)}},f=async()=>{if(o){g(!0);try{let e=localStorage.getItem("token"),s=await fetch("".concat("http://103.192.199.158/api","/users/").concat(o.id,"/permissions"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({permissions:p})});if(s.ok){let e=await s.json();l(s=>s.map(s=>s.id===e.id?e:s)),c(e),alert("Permissions updated successfully!")}else{let e=await s.json();alert("Failed to update permissions: ".concat(e.error||"Unknown error"))}}catch(e){console.error("Failed to save permissions:",e),alert("Failed to save permissions. Please try again.")}finally{g(!1)}}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Permission Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage user access to different modules"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:"Users"})}),(0,s.jsxs)(t.CardContent,{children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(i.Input,{type:"text",placeholder:"Search users...",value:d,onChange:e=>u(e.target.value)})}),m?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading users..."}):0===e.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No users found"}):(0,s.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:e.map(e=>{var r;return(0,s.jsx)("div",{onClick:()=>{c(e),b(e.permissions||[])},className:"p-4 border rounded-lg cursor-pointer transition-all ".concat((null==o?void 0:o.id)===e.id?"bg-blue-50 border-blue-500":"bg-white border-gray-200 hover:border-blue-300"),children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,s.jsx)("span",{className:"inline-block mt-1 px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:e.role})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[(null==(r=e.permissions)?void 0:r.length)||0," permissions"]})})]})},e.id)})})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsx)(t.CardTitle,{children:o?"Permissions for ".concat(o.name):"Select a user"})}),(0,s.jsx)(t.CardContent,{children:o?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,s.jsx)("strong",{children:"Note:"})," Control which modules this user can access. Unchecked modules will be hidden from their dashboard."]})}),(0,s.jsx)("div",{className:"space-y-3",children:n.map(e=>{let r=p.includes(e.id),t="admin"===o.role&&["users","clients"].includes(e.id);return(0,s.jsx)("div",{className:"border rounded-lg p-4 transition-all ".concat(r?"bg-green-50 border-green-300":"bg-white border-gray-200"),children:(0,s.jsxs)("label",{className:"flex items-start cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:r,onChange:()=>{var s;return s=e.id,void b(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s])},disabled:t,className:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,s.jsxs)("div",{className:"ml-3 flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:e.label}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),t&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1 italic",children:"Always enabled for admins"})]})]})},e.id)})}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(a.Button,{onClick:f,disabled:h,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Permissions"}),(0,s.jsx)(a.Button,{onClick:()=>{c(null),b([])},className:"bg-gray-500 hover:bg-gray-600",children:"Cancel"})]})]}):(0,s.jsxs)("div",{className:"text-center py-16 text-gray-500",children:[(0,s.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,s.jsx)("p",{children:"Select a user from the list to manage their permissions"})]})})]})]})]})}e.s(["default",()=>l])}]);