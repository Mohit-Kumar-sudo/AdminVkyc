module.exports=[62067,98621,a=>{"use strict";var b=a.i(87924);function c(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}function d({children:a,className:d,...e}){return(0,b.jsx)("div",{className:c("rounded-lg border bg-white p-6 shadow-sm",d),...e,children:a})}function e({children:a,className:d}){return(0,b.jsx)("div",{className:c("mb-4",d),children:a})}function f({children:a,className:d}){return(0,b.jsx)("h3",{className:c("text-lg font-semibold text-gray-900",d),children:a})}function g({children:a,className:d}){return(0,b.jsx)("div",{className:c(d),children:a})}a.s(["clsx",()=>c],98621),a.s(["Card",()=>d,"CardContent",()=>g,"CardHeader",()=>e,"CardTitle",()=>f],62067)},96438,a=>{"use strict";var b=a.i(87924),c=a.i(98621);function d({variant:a="primary",size:d="md",className:e,children:f,...g}){return(0,b.jsx)("button",{className:(0,c.clsx)("inline-flex items-center justify-center rounded-lg font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"primary"===a,"bg-gray-200 text-gray-900 hover:bg-gray-300":"secondary"===a,"border-2 border-gray-300 bg-transparent hover:bg-gray-100":"outline"===a,"hover:bg-gray-100":"ghost"===a,"h-8 px-3 text-sm":"sm"===d,"h-10 px-4":"md"===d,"h-12 px-6 text-lg":"lg"===d},e),...g,children:f})}a.s(["Button",()=>d])},94988,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(98621);let e=(0,c.forwardRef)(({label:a,error:c,className:e,...f},g)=>(0,b.jsxs)("div",{className:"w-full",children:[a&&(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:a}),(0,b.jsx)("input",{ref:g,className:(0,d.clsx)("w-full rounded-lg border border-gray-500 px-3 py-2 text-gray-900 placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent","disabled:bg-gray-100 disabled:cursor-not-allowed",c&&"border-red-500",e),...f}),c&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c})]}));e.displayName="Input",a.s(["Input",0,e])},78838,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(62067),e=a.i(96438),f=a.i(94988);let g=[{id:"dashboard",label:"Dashboard",description:"View dashboard and analytics"},{id:"patients",label:"Patients",description:"Manage patient records"},{id:"appointments",label:"Appointments",description:"Manage appointments"},{id:"users",label:"Users",description:"Manage users (admin only)"},{id:"clients",label:"Clients",description:"Manage clients (admin only)"}];function h(){let[a,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)([]);(0,c.useEffect)(()=>{s()},[k]);let s=async()=>{try{let a=localStorage.getItem("token"),b=await fetch(`http://103.192.199.158/api/users${k?`?q=${k}`:""}`,{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();h(Array.isArray(c)?c:[])}catch(a){console.error("Failed to load users:",a),h([])}finally{n(!1)}},t=async()=>{if(i){p(!0);try{let a=localStorage.getItem("token"),b=await fetch(`http://103.192.199.158/api/users/${i.id}/permissions`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({permissions:q})});if(b.ok){let a=await b.json();h(b=>b.map(b=>b.id===a.id?a:b)),j(a),alert("Permissions updated successfully!")}else{let a=await b.json();alert(`Failed to update permissions: ${a.error||"Unknown error"}`)}}catch(a){console.error("Failed to save permissions:",a),alert("Failed to save permissions. Please try again.")}finally{p(!1)}}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Permission Management"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage user access to different modules"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Users"})}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)(f.Input,{type:"text",placeholder:"Search users...",value:k,onChange:a=>l(a.target.value)})}),m?(0,b.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading users..."}):0===a.length?(0,b.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No users found"}):(0,b.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:a.map(a=>(0,b.jsx)("div",{onClick:()=>{j(a),r(a.permissions||[])},className:`p-4 border rounded-lg cursor-pointer transition-all ${i?.id===a.id?"bg-blue-50 border-blue-500":"bg-white border-gray-200 hover:border-blue-300"}`,children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.email}),(0,b.jsx)("span",{className:"inline-block mt-1 px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",children:a.role})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.permissions?.length||0," permissions"]})})]})},a.id))})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:i?`Permissions for ${i.name}`:"Select a user"})}),(0,b.jsx)(d.CardContent,{children:i?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,b.jsx)("strong",{children:"Note:"})," Control which modules this user can access. Unchecked modules will be hidden from their dashboard."]})}),(0,b.jsx)("div",{className:"space-y-3",children:g.map(a=>{let c=q.includes(a.id),d="admin"===i.role&&["users","clients"].includes(a.id);return(0,b.jsx)("div",{className:`border rounded-lg p-4 transition-all ${c?"bg-green-50 border-green-300":"bg-white border-gray-200"}`,children:(0,b.jsxs)("label",{className:"flex items-start cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:c,onChange:()=>{var b;return b=a.id,void r(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},disabled:d,className:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,b.jsxs)("div",{className:"ml-3 flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a.label}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.description}),d&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1 italic",children:"Always enabled for admins"})]})]})},a.id)})}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(e.Button,{onClick:t,disabled:o,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Permissions"}),(0,b.jsx)(e.Button,{onClick:()=>{j(null),r([])},className:"bg-gray-500 hover:bg-gray-600",children:"Cancel"})]})]}):(0,b.jsxs)("div",{className:"text-center py-16 text-gray-500",children:[(0,b.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,b.jsx)("p",{children:"Select a user from the list to manage their permissions"})]})})]})]})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=src_ca95f36d._.js.map